module.exports=[185538,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(432005),g=a.i(715318),h=a.i(265190),i=a.i(836538),j=a.i(640327),k=a.i(820723),l=a.i(977839),m=a.i(431993),n=a.i(567556),o=a.i(146485),p=a.i(979779),q=a.i(796119),r=a.i(684990),s=a.i(189771),t=a.i(220486),u=a.i(265391),v=a.i(776610),w=a.i(857534),x=a.i(243757),y=a.i(333296),z=b([f,g,h,i,j,k,l,m,n]);function A(){let[a,b]=(0,e.useState)(1),[c,z]=(0,e.useState)(""),[A,B]=(0,e.useState)("all"),[C,D]=(0,e.useState)("all"),[E,F]=(0,e.useState)("publishedAt"),[G,H]=(0,e.useState)("desc"),[I,J]=(0,e.useState)(null),[K,L]=(0,e.useState)(null),[M,N]=(0,e.useState)(null),O=new URLSearchParams({page:a.toString(),limit:"10",...c&&{search:c},..."all"!==A&&{category:A},..."all"!==C&&{status:C},sortBy:E,order:G}).toString(),{data:P,error:Q,isLoading:R,refetch:S}=(0,f.useApi)(`/api/blog?${O}`),{data:T,isLoading:U,error:V}=(0,f.useApi)("/api/blog/categories"),W=P?.posts||[],X=P?.pagination||{page:1,totalPages:1,hasNextPage:!1,hasPrevPage:!1};(0,e.useEffect)(()=>{console.log("BlogAdminPage - categoriesData:",T),console.log("BlogAdminPage - categoriesLoading:",U),console.log("BlogAdminPage - categoriesError:",V),T&&(console.log("BlogAdminPage - categoriesData length:",T.length),T.length>0&&console.log("BlogAdminPage - first category:",T[0]))},[T,U,V]),(0,e.useEffect)(()=>{console.log("BlogAdminPage - blogData:",P),console.log("BlogAdminPage - posts array:",W),console.log("BlogAdminPage - pagination:",X),console.log("BlogAdminPage - isLoading:",R),console.log("BlogAdminPage - error:",Q),console.log("BlogAdminPage - queryString:",O),P&&console.log("BlogAdminPage - blogData structure:",{hasPostsProperty:P.hasOwnProperty("posts"),postsType:Array.isArray(P.posts)?"array":typeof P.posts,hasPagination:P.hasOwnProperty("pagination"),paginationType:typeof P.pagination})},[P,W,X,R,Q,O]);let Y=a=>{E===a?H("asc"===G?"desc":"asc"):(F(a),H("asc"))},Z=()=>{I&&_({},"DELETE")},$=()=>{J(null)},{mutate:_,isLoading:aa}=(0,f.useApiMutation)(`/blog/${I?.id}`,{onSuccess:()=>{J(null),L("Post deleted successfully"),S(),setTimeout(()=>{L(null)},3e3)},onError:a=>{N(a.message||"Failed to delete post"),J(null),setTimeout(()=>{N(null)},3e3)}});return(0,d.jsxs)(g.AdminLayout,{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold",children:"Blog Posts"}),(0,d.jsx)(h.Button,{asChild:!0,children:(0,d.jsxs)(y.default,{href:"/admin/blog/new",children:[(0,d.jsx)(o.PlusCircle,{className:"mr-2 h-4 w-4"}),"Add New Post"]})})]}),K&&(0,d.jsxs)(n.Alert,{className:"mb-6",children:[(0,d.jsx)(w.CheckCircle2,{className:"h-4 w-4"}),(0,d.jsx)(n.AlertTitle,{children:"Success"}),(0,d.jsx)(n.AlertDescription,{children:K})]}),M&&(0,d.jsxs)(n.Alert,{variant:"destructive",className:"mb-6",children:[(0,d.jsx)(x.AlertCircle,{className:"h-4 w-4"}),(0,d.jsx)(n.AlertTitle,{children:"Error"}),(0,d.jsx)(n.AlertDescription,{children:M})]}),(0,d.jsx)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)(p.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,d.jsx)(i.Input,{placeholder:"Search posts...",className:"pl-8",value:c,onChange:a=>z(a.target.value)})]})}),(0,d.jsx)("div",{className:"border rounded-md",children:(0,d.jsxs)(j.Table,{children:[(0,d.jsx)(j.TableHeader,{children:(0,d.jsxs)(j.TableRow,{children:[(0,d.jsx)(j.TableHead,{className:"w-[300px]",children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>Y("title"),children:["Title",(0,d.jsx)(t.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>Y("category"),children:["Category",(0,d.jsx)(t.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>Y("status"),children:["Status",(0,d.jsx)(t.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>Y("viewCount"),children:["Views",(0,d.jsx)(t.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>Y("publishedAt"),children:["Published Date",(0,d.jsx)(t.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,d.jsx)(j.TableBody,{children:R?[,,,,,].fill(0).map((a,b)=>(0,d.jsxs)(j.TableRow,{children:[(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(l.Skeleton,{className:"h-6 w-[250px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(l.Skeleton,{className:"h-6 w-[100px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(l.Skeleton,{className:"h-6 w-[80px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(l.Skeleton,{className:"h-6 w-[50px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(l.Skeleton,{className:"h-6 w-[100px]"})}),(0,d.jsx)(j.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(l.Skeleton,{className:"h-8 w-8 rounded-md"}),(0,d.jsx)(l.Skeleton,{className:"h-8 w-8 rounded-md"}),(0,d.jsx)(l.Skeleton,{className:"h-8 w-8 rounded-md"})]})})]},b)):Q?(0,d.jsx)(j.TableRow,{children:(0,d.jsx)(j.TableCell,{colSpan:6,className:"text-center py-4 text-destructive",children:"Error loading blog posts. Please try again."})}):0===W.length?(0,d.jsx)(j.TableRow,{children:(0,d.jsx)(j.TableCell,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"No blog posts found. Create your first post!"})}):W.map(a=>(0,d.jsxs)(j.TableRow,{children:[(0,d.jsx)(j.TableCell,{className:"font-medium",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[a.featuredImage&&(0,d.jsx)("img",{src:a.featuredImage,alt:a.title,className:"h-8 w-8 rounded object-cover"}),(0,d.jsx)("span",{className:"truncate max-w-[200px]",children:a.title})]})}),(0,d.jsx)(j.TableCell,{children:a.category.name}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(k.Badge,{variant:(a=>{switch(a){case"PUBLISHED":default:return"default";case"DRAFT":return"secondary";case"ARCHIVED":return"outline"}})(a.status),children:a.status})}),(0,d.jsx)(j.TableCell,{children:a.viewCount}),(0,d.jsx)(j.TableCell,{children:a.publishedAt?new Date(a.publishedAt).toLocaleDateString():"Not published"}),(0,d.jsx)(j.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,d.jsxs)(y.default,{href:`/blog/${a.slug}`,children:[(0,d.jsx)(s.Eye,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"View"})]})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,d.jsxs)(y.default,{href:`/admin/blog/${a.id}/edit`,children:[(0,d.jsx)(q.Edit,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Edit"})]})}),(0,d.jsxs)(m.AlertDialog,{children:[(0,d.jsx)(m.AlertDialogTrigger,{asChild:!0,children:(0,d.jsxs)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{J(a)},children:[(0,d.jsx)(r.Trash2,{className:"h-4 w-4 text-destructive"}),(0,d.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,d.jsxs)(m.AlertDialogContent,{children:[(0,d.jsxs)(m.AlertDialogHeader,{children:[(0,d.jsx)(m.AlertDialogTitle,{children:"Are you sure?"}),(0,d.jsxs)(m.AlertDialogDescription,{children:['This action cannot be undone. This will permanently delete the blog post "',I?.title,'".']})]}),(0,d.jsxs)(m.AlertDialogFooter,{children:[(0,d.jsx)(m.AlertDialogCancel,{onClick:$,children:"Cancel"}),(0,d.jsx)(m.AlertDialogAction,{onClick:Z,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:aa?"Deleting...":"Delete"})]})]})]})]})})]},a.id))})]})}),!R&&(0,d.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,d.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing page ",X.page," of ",X.totalPages]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>b(a=>a-1),disabled:!X.hasPrevPage,children:[(0,d.jsx)(u.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>b(a=>a+1),disabled:!X.hasNextPage,children:["Next",(0,d.jsx)(v.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})}[f,g,h,i,j,k,l,m,n]=z.then?(await z)():z,a.s(["default",()=>A]),c()}catch(a){c(a)}},!1),498325,a=>a.a(async(b,c)=>{try{var d=a.i(670010),e=a.i(561761),f=a.i(299441),g=a.i(14393),h=a.i(798225),i=a.i(185538),j=a.i(189906),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/blog/index",pathname:"/admin/blog",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/blog/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_astralis-nextjs_69cac325._.js.map