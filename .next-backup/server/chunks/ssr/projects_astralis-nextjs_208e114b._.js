module.exports=[308909,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(432005),g=a.i(715318),h=a.i(265190),i=a.i(836538),j=a.i(640327),k=a.i(778609),l=a.i(820723),m=a.i(977839),n=a.i(431993),o=a.i(567556),p=a.i(146485),q=a.i(979779),r=a.i(796119),s=a.i(684990),t=a.i(189771),u=a.i(220486),v=a.i(265391),w=a.i(776610),x=a.i(857534),y=a.i(243757),z=a.i(333296),A=a.i(789927),B=b([f,g,h,i,j,k,l,m,n,o,A]);function C(){let[a,b]=(0,e.useState)(1),[c,B]=(0,e.useState)(""),[C,D]=(0,e.useState)("all"),[E,F]=(0,e.useState)("all"),[G,H]=(0,e.useState)("createdAt"),[I,J]=(0,e.useState)("desc"),[K,L]=(0,e.useState)(null),[M,N]=(0,e.useState)(null),[O,P]=(0,e.useState)(null),Q=new URLSearchParams({page:a.toString(),limit:"10",...c&&{search:c},..."all"!==C&&{category:C},..."all"!==E&&{status:E},sortBy:G,order:I}).toString(),{data:R,error:S,isLoading:T,refetch:U}=(0,f.useApi)(`/api/marketplace?${Q}`),{data:V,isLoading:W,error:X}=(0,f.useApi)("/api/marketplace/categories"),Y=R?.items||[],Z=R?.pagination||{page:1,totalPages:1,hasNextPage:!1,hasPrevPage:!1};(0,e.useEffect)(()=>{console.log("MarketplaceAdminPage - marketplaceData:",R),console.log("MarketplaceAdminPage - isLoading:",T),console.log("MarketplaceAdminPage - error:",S),R?.items&&(console.log("MarketplaceAdminPage - items count:",R.items.length),R.items.length>0&&console.log("MarketplaceAdminPage - first item:",R.items[0]))},[R,T,S]),(0,e.useEffect)(()=>{console.log("MarketplaceAdminPage - categoriesData:",V),console.log("MarketplaceAdminPage - categoriesLoading:",W),console.log("MarketplaceAdminPage - categoriesError:",X),V&&(console.log("MarketplaceAdminPage - categories count:",V.length),V.length>0&&console.log("MarketplaceAdminPage - first category:",V[0]))},[V,W,X]),(0,e.useEffect)(()=>{console.log("MarketplaceAdminPage - items array:",Y),console.log("MarketplaceAdminPage - pagination:",Z),console.log("MarketplaceAdminPage - queryString:",Q),R&&console.log("MarketplaceAdminPage - marketplaceData structure:",{hasItemsProperty:R.hasOwnProperty("items"),itemsType:Array.isArray(R.items)?"array":typeof R.items,hasPagination:R.hasOwnProperty("pagination"),paginationType:typeof R.pagination})},[R,Y,Z,Q]);let $=a=>{G===a?J("asc"===I?"desc":"asc"):(H(a),J("asc"))},_=()=>{K&&ab({},"DELETE")},aa=()=>{L(null)},{mutate:ab,isLoading:ac}=(0,f.useApiMutation)(`/marketplace/${K?.id}`,{onSuccess:()=>{L(null),N("Item deleted successfully"),setTimeout(()=>{window.location.reload()},1e3),setTimeout(()=>{N(null)},3e3)},onError:a=>{P(a.message||"Failed to delete item"),L(null),setTimeout(()=>{P(null)},3e3)}});return(0,d.jsxs)(g.AdminLayout,{children:[(0,d.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,d.jsx)("h1",{className:"text-3xl font-bold",children:"Marketplace Items"}),(0,d.jsx)(h.Button,{asChild:!0,children:(0,d.jsxs)(z.default,{href:"/admin/marketplace/new",children:[(0,d.jsx)(p.PlusCircle,{className:"mr-2 h-4 w-4"}),"Add New Item"]})})]}),M&&(0,d.jsxs)(o.Alert,{className:"mb-6",children:[(0,d.jsx)(x.CheckCircle2,{className:"h-4 w-4"}),(0,d.jsx)(o.AlertTitle,{children:"Success"}),(0,d.jsx)(o.AlertDescription,{children:M})]}),O&&(0,d.jsxs)(o.Alert,{variant:"destructive",className:"mb-6",children:[(0,d.jsx)(y.AlertCircle,{className:"h-4 w-4"}),(0,d.jsx)(o.AlertTitle,{children:"Error"}),(0,d.jsx)(o.AlertDescription,{children:O})]}),(0,d.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,d.jsxs)("div",{className:"relative flex-1",children:[(0,d.jsx)(q.Search,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),(0,d.jsx)(i.Input,{placeholder:"Search items...",className:"pl-8",value:c,onChange:a=>B(a.target.value)})]}),(0,d.jsxs)(k.Select,{value:C,onValueChange:D,children:[(0,d.jsx)(k.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,d.jsx)(k.SelectValue,{placeholder:"All Categories"})}),(0,d.jsxs)(k.SelectContent,{children:[(0,d.jsx)(k.SelectItem,{value:"all",children:"All Categories"}),V?.length?V.map(a=>(0,d.jsx)(k.SelectItem,{value:a.slug||a.name,children:a.name},a.slug)):(0,d.jsx)(k.SelectItem,{value:"no-categories",disabled:!0,children:"No categories available"})]})]}),(0,d.jsxs)(k.Select,{value:E,onValueChange:F,children:[(0,d.jsx)(k.SelectTrigger,{className:"w-full md:w-[180px]",children:(0,d.jsx)(k.SelectValue,{placeholder:"All Status"})}),(0,d.jsxs)(k.SelectContent,{children:[(0,d.jsx)(k.SelectItem,{value:"all",children:"All Status"}),(0,d.jsx)(k.SelectItem,{value:"AVAILABLE",children:"Available"}),(0,d.jsx)(k.SelectItem,{value:"SOLD_OUT",children:"Sold Out"}),(0,d.jsx)(k.SelectItem,{value:"COMING_SOON",children:"Coming Soon"})]})]})]}),(0,d.jsx)("div",{className:"border rounded-md",children:(0,d.jsxs)(j.Table,{children:[(0,d.jsx)(j.TableHeader,{children:(0,d.jsxs)(j.TableRow,{children:[(0,d.jsx)(j.TableHead,{className:"w-[250px]",children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>$("title"),children:["Title",(0,d.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>$("price"),children:["Price",(0,d.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{children:"Category"}),(0,d.jsx)(j.TableHead,{children:"Status"}),(0,d.jsx)(j.TableHead,{children:(0,d.jsxs)("div",{className:"flex items-center cursor-pointer",onClick:()=>$("createdAt"),children:["Created",(0,d.jsx)(u.ArrowUpDown,{className:"ml-2 h-4 w-4"})]})}),(0,d.jsx)(j.TableHead,{className:"text-right",children:"Actions"})]})}),(0,d.jsx)(j.TableBody,{children:T?[,,,,,].fill(0).map((a,b)=>(0,d.jsxs)(j.TableRow,{children:[(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[200px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[80px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[100px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[80px]"})}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[100px]"})}),(0,d.jsx)(j.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(m.Skeleton,{className:"h-8 w-8 rounded-md"}),(0,d.jsx)(m.Skeleton,{className:"h-8 w-8 rounded-md"}),(0,d.jsx)(m.Skeleton,{className:"h-8 w-8 rounded-md"})]})})]},b)):S?(0,d.jsx)(j.TableRow,{children:(0,d.jsx)(j.TableCell,{colSpan:6,className:"text-center py-4 text-destructive",children:"Error loading marketplace items. Please try again."})}):0===Y.length?(0,d.jsx)(j.TableRow,{children:(0,d.jsx)(j.TableCell,{colSpan:6,className:"text-center py-4 text-muted-foreground",children:"No marketplace items found. Create your first item!"})}):Y.map(a=>(0,d.jsxs)(j.TableRow,{children:[(0,d.jsx)(j.TableCell,{className:"font-medium",children:(0,d.jsxs)("div",{className:"flex items-center gap-2",children:[(0,d.jsx)("img",{src:a.imageUrl,alt:a.title,className:"h-8 w-8 rounded object-cover"}),(0,d.jsx)("span",{className:"truncate max-w-[150px]",children:a.title})]})}),(0,d.jsx)(j.TableCell,{children:(0,A.formatCurrency)(a.price)}),(0,d.jsx)(j.TableCell,{children:a.category.name}),(0,d.jsx)(j.TableCell,{children:(0,d.jsx)(l.Badge,{variant:(a=>{switch(a){case"AVAILABLE":default:return"default";case"SOLD_OUT":return"secondary";case"COMING_SOON":return"outline"}})(a.status),children:a.status})}),(0,d.jsx)(j.TableCell,{children:new Date(a.createdAt).toLocaleDateString()}),(0,d.jsx)(j.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,d.jsxs)(z.default,{href:`/marketplace/${a.slug}`,children:[(0,d.jsx)(t.Eye,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"View"})]})}),(0,d.jsx)(h.Button,{variant:"ghost",size:"icon",asChild:!0,children:(0,d.jsxs)(z.default,{href:`/admin/marketplace/${a.id}/edit`,children:[(0,d.jsx)(r.Edit,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Edit"})]})}),(0,d.jsxs)(n.AlertDialog,{children:[(0,d.jsx)(n.AlertDialogTrigger,{asChild:!0,children:(0,d.jsxs)(h.Button,{variant:"ghost",size:"icon",onClick:()=>{L(a)},children:[(0,d.jsx)(s.Trash2,{className:"h-4 w-4 text-destructive"}),(0,d.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,d.jsxs)(n.AlertDialogContent,{children:[(0,d.jsxs)(n.AlertDialogHeader,{children:[(0,d.jsx)(n.AlertDialogTitle,{children:"Are you sure?"}),(0,d.jsxs)(n.AlertDialogDescription,{children:['This action cannot be undone. This will permanently delete the marketplace item "',K?.title,'".']})]}),(0,d.jsxs)(n.AlertDialogFooter,{children:[(0,d.jsx)(n.AlertDialogCancel,{onClick:aa,children:"Cancel"}),(0,d.jsx)(n.AlertDialogAction,{onClick:_,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:ac?"Deleting...":"Delete"})]})]})]})]})})]},a.id))})]})}),!T&&(0,d.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,d.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing page ",Z.page," of ",Z.totalPages]}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>b(a=>a-1),disabled:!Z.hasPrevPage,children:[(0,d.jsx)(v.ChevronLeft,{className:"h-4 w-4 mr-1"}),"Previous"]}),(0,d.jsxs)(h.Button,{variant:"outline",size:"sm",onClick:()=>b(a=>a+1),disabled:!Z.hasNextPage,children:["Next",(0,d.jsx)(w.ChevronRight,{className:"h-4 w-4 ml-1"})]})]})]})]})}[f,g,h,i,j,k,l,m,n,o,A]=B.then?(await B)():B,a.s(["default",()=>C]),c()}catch(a){c(a)}},!1),784893,a=>a.a(async(b,c)=>{try{var d=a.i(670010),e=a.i(561761),f=a.i(299441),g=a.i(14393),h=a.i(798225),i=a.i(308909),j=a.i(189906),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/marketplace/index",pathname:"/admin/marketplace",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/marketplace/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_astralis-nextjs_208e114b._.js.map