module.exports=[327412,a=>a.a(async(b,c)=>{try{var d=a.i(508171),e=a.i(127669),f=a.i(205092),g=a.i(432005),h=a.i(715318),i=a.i(265190),j=a.i(836538),k=a.i(869112),l=a.i(640327),m=a.i(977839),n=a.i(682506),o=a.i(431993),p=a.i(567556),q=a.i(77678),r=a.i(146485),s=a.i(796119),t=a.i(684990),u=a.i(74867),v=a.i(409516),w=a.i(857534),x=a.i(243757),y=a.i(333296),z=a.i(497010),A=a.i(906197),B=a.i(348155),C=b([g,h,i,j,k,l,m,n,o,p,q,z,A,B]);[g,h,i,j,k,l,m,n,o,p,q,z,A,B]=C.then?(await C)():C;let E=z.z.object({name:z.z.string().min(2,"Name must be at least 2 characters"),slug:z.z.string().min(2,"Slug must be at least 2 characters"),description:z.z.string().optional().nullable()});function D(){(0,f.useRouter)();let[a,b]=(0,e.useState)(!1),[c,z]=(0,e.useState)(!1),[C,D]=(0,e.useState)(null),[F,G]=(0,e.useState)(null),[H,I]=(0,e.useState)(null),[J,K]=(0,e.useState)(null),{data:L,error:M,isLoading:N,refetch:O}=(0,g.useApi)("/api/blog/categories");console.log("categoriesData:",L),console.log("isLoading:",N),console.log("error:",M);let P=Array.isArray(L?.data)?L.data:[];console.log("categories array:",P);let{mutate:Q,isLoading:R}=(0,g.useApiMutation)("/blog/categories",{onSuccess:()=>{b(!1),I("Category added successfully"),O(),setTimeout(()=>{I(null)},3e3)},onError:a=>{K(a.message||"Failed to add category"),setTimeout(()=>{K(null)},3e3)}}),{mutate:S,isLoading:T}=(0,g.useApiMutation)(`/blog/categories/${C?.id}`,{onSuccess:()=>{z(!1),D(null),I("Category updated successfully"),O(),setTimeout(()=>{I(null)},3e3)},onError:a=>{K(a.message||"Failed to update category"),setTimeout(()=>{K(null)},3e3)}}),{mutate:U,isLoading:V}=(0,g.useApiMutation)("/blog/categories/delete",{method:"DELETE",onSuccess:()=>{G(null),I("Category deleted successfully"),O(),setTimeout(()=>{I(null)},3e3)},onError:a=>{K(a.message||"Failed to delete category"),G(null),setTimeout(()=>{K(null)},3e3)}}),W=(0,A.useForm)({resolver:(0,B.zodResolver)(E),defaultValues:{name:"",slug:"",description:""}}),X=(0,A.useForm)({resolver:(0,B.zodResolver)(E),defaultValues:{name:C?.name||"",slug:C?.slug||"",description:C?.description||""}});(0,e.useEffect)(()=>{C&&X.reset({name:C.name,slug:C.slug,description:C.description})},[C,X]);let Y=a=>{C&&S(a,"PATCH")},Z=()=>{F?.id&&U({id:Number(F.id)})},$=a=>a.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-"),_=(a,b)=>{let c=a.target.value;b.setValue("name",c);let d=b.getValues("slug"),e=C?.name||"",f=C?.slug||"";d&&d!==$(e)&&d!==f||b.setValue("slug",$(c))};return(0,d.jsxs)(h.AdminLayout,{children:[(0,d.jsxs)("div",{className:"flex items-center mb-6",children:[(0,d.jsx)(i.Button,{variant:"ghost",size:"sm",asChild:!0,className:"mr-4",children:(0,d.jsxs)(y.default,{href:"/admin/blog",children:[(0,d.jsx)(u.ArrowLeft,{className:"mr-2 h-4 w-4"}),"Back to Blog"]})}),(0,d.jsx)("h1",{className:"text-3xl font-bold",children:"Blog Categories"})]}),H&&(0,d.jsxs)(p.Alert,{className:"mb-6",children:[(0,d.jsx)(w.CheckCircle2,{className:"h-4 w-4"}),(0,d.jsx)(p.AlertTitle,{children:"Success"}),(0,d.jsx)(p.AlertDescription,{children:H})]}),J&&(0,d.jsxs)(p.Alert,{variant:"destructive",className:"mb-6",children:[(0,d.jsx)(x.AlertCircle,{className:"h-4 w-4"}),(0,d.jsx)(p.AlertTitle,{children:"Error"}),(0,d.jsx)(p.AlertDescription,{children:J})]}),(0,d.jsx)("div",{className:"mb-6",children:(0,d.jsxs)(n.Dialog,{open:a,onOpenChange:b,children:[(0,d.jsx)(n.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(i.Button,{children:[(0,d.jsx)(r.PlusCircle,{className:"mr-2 h-4 w-4"}),"Add Category"]})}),(0,d.jsx)(n.DialogContent,{children:(0,d.jsxs)("form",{onSubmit:W.handleSubmit(a=>{Q(a)}),children:[(0,d.jsxs)(n.DialogHeader,{children:[(0,d.jsx)(n.DialogTitle,{children:"Add New Category"}),(0,d.jsx)(n.DialogDescription,{children:"Create a new category for blog posts."})]}),(0,d.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,d.jsxs)("div",{className:"grid gap-2",children:[(0,d.jsx)(q.Label,{htmlFor:"name",children:"Name *"}),(0,d.jsx)(j.Input,{id:"name",...W.register("name"),onChange:a=>_(a,W)}),W.formState.errors.name&&(0,d.jsx)("p",{className:"text-sm text-destructive",children:W.formState.errors.name.message})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[(0,d.jsx)(q.Label,{htmlFor:"slug",children:"Slug *"}),(0,d.jsx)(j.Input,{id:"slug",...W.register("slug")}),W.formState.errors.slug&&(0,d.jsx)("p",{className:"text-sm text-destructive",children:W.formState.errors.slug.message})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[(0,d.jsx)(q.Label,{htmlFor:"description",children:"Description"}),(0,d.jsx)(k.Textarea,{id:"description",...W.register("description"),rows:3})]})]}),(0,d.jsxs)(n.DialogFooter,{children:[(0,d.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>b(!1),children:"Cancel"}),(0,d.jsxs)(i.Button,{type:"submit",disabled:R,children:[R&&(0,d.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Add Category"]})]})]})})]})}),(0,d.jsx)("div",{className:"border rounded-md",children:(0,d.jsxs)(l.Table,{children:[(0,d.jsx)(l.TableHeader,{children:(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableHead,{children:"Name"}),(0,d.jsx)(l.TableHead,{children:"Slug"}),(0,d.jsx)(l.TableHead,{children:"Description"}),(0,d.jsx)(l.TableHead,{children:"Posts"}),(0,d.jsx)(l.TableHead,{className:"text-right",children:"Actions"})]})}),(0,d.jsx)(l.TableBody,{children:N?[,,,,,].fill(0).map((a,b)=>(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[150px]"})}),(0,d.jsx)(l.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[150px]"})}),(0,d.jsx)(l.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[200px]"})}),(0,d.jsx)(l.TableCell,{children:(0,d.jsx)(m.Skeleton,{className:"h-6 w-[50px]"})}),(0,d.jsx)(l.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsx)(m.Skeleton,{className:"h-8 w-8 rounded-md"}),(0,d.jsx)(m.Skeleton,{className:"h-8 w-8 rounded-md"})]})})]},b)):M?(0,d.jsx)(l.TableRow,{children:(0,d.jsx)(l.TableCell,{colSpan:5,className:"text-center py-4 text-destructive",children:"Error loading categories. Please try again."})}):P&&0!==P.length?P.map(a=>(0,d.jsxs)(l.TableRow,{children:[(0,d.jsx)(l.TableCell,{className:"font-medium",children:a.name}),(0,d.jsx)(l.TableCell,{children:a.slug}),(0,d.jsx)(l.TableCell,{className:"max-w-[300px] truncate",children:a.description||"-"}),(0,d.jsx)(l.TableCell,{children:a._count.posts}),(0,d.jsx)(l.TableCell,{className:"text-right",children:(0,d.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,d.jsxs)(n.Dialog,{open:c&&C?.id===a.id,onOpenChange:a=>{z(a),a||D(null)},children:[(0,d.jsx)(n.DialogTrigger,{asChild:!0,children:(0,d.jsxs)(i.Button,{variant:"ghost",size:"icon",onClick:()=>D(a),children:[(0,d.jsx)(s.Edit,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Edit"})]})}),(0,d.jsx)(n.DialogContent,{children:(0,d.jsxs)("form",{onSubmit:X.handleSubmit(Y),children:[(0,d.jsxs)(n.DialogHeader,{children:[(0,d.jsx)(n.DialogTitle,{children:"Edit Category"}),(0,d.jsx)(n.DialogDescription,{children:"Update the category details."})]}),(0,d.jsxs)("div",{className:"grid gap-4 py-4",children:[(0,d.jsxs)("div",{className:"grid gap-2",children:[(0,d.jsx)(q.Label,{htmlFor:"edit-name",children:"Name *"}),(0,d.jsx)(j.Input,{id:"edit-name",...X.register("name"),onChange:a=>_(a,X)}),X.formState.errors.name&&(0,d.jsx)("p",{className:"text-sm text-destructive",children:X.formState.errors.name.message})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[(0,d.jsx)(q.Label,{htmlFor:"edit-slug",children:"Slug *"}),(0,d.jsx)(j.Input,{id:"edit-slug",...X.register("slug")}),X.formState.errors.slug&&(0,d.jsx)("p",{className:"text-sm text-destructive",children:X.formState.errors.slug.message})]}),(0,d.jsxs)("div",{className:"grid gap-2",children:[(0,d.jsx)(q.Label,{htmlFor:"edit-description",children:"Description"}),(0,d.jsx)(k.Textarea,{id:"edit-description",...X.register("description"),rows:3})]})]}),(0,d.jsxs)(n.DialogFooter,{children:[(0,d.jsx)(i.Button,{type:"button",variant:"outline",onClick:()=>{z(!1),D(null)},children:"Cancel"}),(0,d.jsxs)(i.Button,{type:"submit",disabled:T,children:[T&&(0,d.jsx)(v.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Save Changes"]})]})]})})]}),(0,d.jsxs)(o.AlertDialog,{children:[(0,d.jsx)(o.AlertDialogTrigger,{asChild:!0,children:(0,d.jsxs)(i.Button,{variant:"ghost",size:"icon",onClick:()=>G(a),disabled:a._count.posts>0,title:a._count.posts>0?"Cannot delete category with posts":"Delete category",children:[(0,d.jsx)(t.Trash2,{className:"h-4 w-4 text-destructive"}),(0,d.jsx)("span",{className:"sr-only",children:"Delete"})]})}),(0,d.jsxs)(o.AlertDialogContent,{children:[(0,d.jsxs)(o.AlertDialogHeader,{children:[(0,d.jsx)(o.AlertDialogTitle,{children:"Are you sure?"}),(0,d.jsxs)(o.AlertDialogDescription,{children:['This action cannot be undone. This will permanently delete the category "',F?.name,'".']})]}),(0,d.jsxs)(o.AlertDialogFooter,{children:[(0,d.jsx)(o.AlertDialogCancel,{onClick:()=>G(null),children:"Cancel"}),(0,d.jsx)(o.AlertDialogAction,{onClick:Z,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:V?"Deleting...":"Delete"})]})]})]})]})})]},a.id)):(0,d.jsx)(l.TableRow,{children:(0,d.jsx)(l.TableCell,{colSpan:5,className:"text-center py-4 text-muted-foreground",children:"No categories found. Create your first category!"})})})]})})]})}a.s(["default",()=>D]),c()}catch(a){c(a)}},!1),800369,a=>a.a(async(b,c)=>{try{var d=a.i(670010),e=a.i(561761),f=a.i(299441),g=a.i(14393),h=a.i(798225),i=a.i(327412),j=a.i(189906),k=b([h,i]);[h,i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/blog/categories",pathname:"/admin/blog/categories",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/blog/categories",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=projects_astralis-nextjs_e3fa356e._.js.map