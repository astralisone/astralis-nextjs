{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/gregorystarr/projects/astralis-nextjs/src/app/api/newsletter/confirm/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from 'next/server';\n\n/**\n * Newsletter subscription confirmation endpoint\n * Forwards to Express backend on port 3000\n */\nexport async function GET(request: NextRequest) {\n  const apiBaseUrl = process.env.NEXT_PUBLIC_API_BASE_URL || 'http://localhost:3000';\n\n  // Get token from query parameters\n  const token = request.nextUrl.searchParams.get('token');\n\n  if (!token) {\n    return NextResponse.json(\n      {\n        success: false,\n        message: 'Confirmation token is required',\n      },\n      { status: 400 }\n    );\n  }\n\n  const targetUrl = `${apiBaseUrl}/api/newsletter/confirm/${encodeURIComponent(token)}`;\n\n  try {\n    // Forward the request to the Express backend\n    const response = await fetch(targetUrl, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n    });\n\n    // Parse JSON response\n    const data = await response.json();\n\n    // Forward response with original status code\n    return NextResponse.json(data, {\n      status: response.status,\n    });\n  } catch (error) {\n    console.error('Newsletter confirmation proxy error:', {\n      token: token?.substring(0, 10) + '...',\n      error: error instanceof Error ? error.message : error,\n    });\n\n    return NextResponse.json(\n      {\n        success: false,\n        message: 'Failed to confirm newsletter subscription. Please try again later.',\n      },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAMO,eAAe,IAAI,OAAoB;IAC5C,MAAM,aAAa,QAAQ,GAAG,CAAC,wBAAwB,IAAI;IAE3D,kCAAkC;IAClC,MAAM,QAAQ,QAAQ,OAAO,CAAC,YAAY,CAAC,GAAG,CAAC;IAE/C,IAAI,CAAC,OAAO;QACV,OAAO,kLAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,YAAY,GAAG,WAAW,wBAAwB,EAAE,mBAAmB,QAAQ;IAErF,IAAI;QACF,6CAA6C;QAC7C,MAAM,WAAW,MAAM,MAAM,WAAW;YACtC,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;QACF;QAEA,sBAAsB;QACtB,MAAM,OAAO,MAAM,SAAS,IAAI;QAEhC,6CAA6C;QAC7C,OAAO,kLAAY,CAAC,IAAI,CAAC,MAAM;YAC7B,QAAQ,SAAS,MAAM;QACzB;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,wCAAwC;YACpD,OAAO,OAAO,UAAU,GAAG,MAAM;YACjC,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QAClD;QAEA,OAAO,kLAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}