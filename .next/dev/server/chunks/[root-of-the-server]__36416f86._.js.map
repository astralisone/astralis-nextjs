{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///Users/gregorystarr/projects/astralis-nextjs/src/app/api/booking/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { z } from \"zod\";\n\nconst bookingSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Invalid email address\"),\n  phone: z.string().min(10, \"Phone number must be at least 10 characters\"),\n  company: z.string().optional(),\n  date: z.string().min(1, \"Date is required\"),\n  time: z.string().min(1, \"Time is required\"),\n  meetingType: z.enum([\"VIDEO_CALL\", \"PHONE_CALL\", \"IN_PERSON\"]),\n  message: z.string().optional(),\n});\n\n/**\n * POST /api/booking\n * Handle consultation booking submissions\n */\nexport async function POST(req: NextRequest) {\n  try {\n    const body = await req.json();\n    const parsed = bookingSchema.safeParse(body);\n\n    if (!parsed.success) {\n      return NextResponse.json(\n        {\n          error: \"Invalid booking data\",\n          details: parsed.error.flatten().fieldErrors\n        },\n        { status: 400 }\n      );\n    }\n\n    const { name, email, phone, company, date, time, meetingType, message } = parsed.data;\n\n    // Generate a simple booking ID\n    const bookingId = `BK-${Date.now()}-${Math.random().toString(36).substring(2, 7).toUpperCase()}`;\n\n    // Log the booking (in production, save to database)\n    console.log(\"New booking received:\", {\n      bookingId,\n      name,\n      email,\n      phone,\n      company,\n      date,\n      time,\n      meetingType,\n      message,\n      timestamp: new Date().toISOString(),\n    });\n\n    // TODO: Send confirmation email to customer\n    // await sendBookingConfirmationEmail({\n    //   to: email,\n    //   bookingId,\n    //   name,\n    //   date,\n    //   time,\n    //   meetingType\n    // });\n\n    // TODO: Send notification email to support@astralisone.com\n    // await sendBookingNotificationEmail({\n    //   bookingId,\n    //   name,\n    //   email,\n    //   phone,\n    //   company,\n    //   date,\n    //   time,\n    //   meetingType,\n    //   message,\n    // });\n\n    // TODO: Store in database\n    // await prisma.booking.create({\n    //   data: {\n    //     bookingId,\n    //     name,\n    //     email,\n    //     phone,\n    //     company,\n    //     date,\n    //     time,\n    //     meetingType,\n    //     message,\n    //     status: 'PENDING',\n    //   },\n    // });\n\n    // TODO: Add to calendar (Google Calendar API integration)\n    // await addToGoogleCalendar({\n    //   summary: `Consultation with ${name}`,\n    //   description: message || 'Consultation call',\n    //   start: { dateTime: `${date}T${convertTo24Hour(time)}:00` },\n    //   duration: 30, // 30-minute call\n    //   attendees: [{ email }],\n    // });\n\n    return NextResponse.json(\n      {\n        success: true,\n        bookingId,\n        message: \"Booking confirmed! You'll receive a confirmation email shortly.\",\n      },\n      { status: 200 }\n    );\n  } catch (error) {\n    console.error(\"Error processing booking:\", error);\n    return NextResponse.json(\n      { error: \"Failed to process booking. Please try again.\" },\n      { status: 500 }\n    );\n  }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEA,MAAM,gBAAgB,2MAAC,CAAC,MAAM,CAAC;IAC7B,MAAM,2MAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,OAAO,2MAAC,CAAC,MAAM,GAAG,KAAK,CAAC;IACxB,OAAO,2MAAC,CAAC,MAAM,GAAG,GAAG,CAAC,IAAI;IAC1B,SAAS,2MAAC,CAAC,MAAM,GAAG,QAAQ;IAC5B,MAAM,2MAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,MAAM,2MAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;IACxB,aAAa,2MAAC,CAAC,IAAI,CAAC;QAAC;QAAc;QAAc;KAAY;IAC7D,SAAS,2MAAC,CAAC,MAAM,GAAG,QAAQ;AAC9B;AAMO,eAAe,KAAK,GAAgB;IACzC,IAAI;QACF,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,SAAS,cAAc,SAAS,CAAC;QAEvC,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,OAAO,kLAAY,CAAC,IAAI,CACtB;gBACE,OAAO;gBACP,SAAS,OAAO,KAAK,CAAC,OAAO,GAAG,WAAW;YAC7C,GACA;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,OAAO,EAAE,IAAI,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,GAAG,OAAO,IAAI;QAErF,+BAA+B;QAC/B,MAAM,YAAY,CAAC,GAAG,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,GAAG,GAAG,WAAW,IAAI;QAEhG,oDAAoD;QACpD,QAAQ,GAAG,CAAC,yBAAyB;YACnC;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA;YACA,WAAW,IAAI,OAAO,WAAW;QACnC;QAEA,4CAA4C;QAC5C,uCAAuC;QACvC,eAAe;QACf,eAAe;QACf,UAAU;QACV,UAAU;QACV,UAAU;QACV,gBAAgB;QAChB,MAAM;QAEN,2DAA2D;QAC3D,uCAAuC;QACvC,eAAe;QACf,UAAU;QACV,WAAW;QACX,WAAW;QACX,aAAa;QACb,UAAU;QACV,UAAU;QACV,iBAAiB;QACjB,aAAa;QACb,MAAM;QAEN,0BAA0B;QAC1B,gCAAgC;QAChC,YAAY;QACZ,iBAAiB;QACjB,YAAY;QACZ,aAAa;QACb,aAAa;QACb,eAAe;QACf,YAAY;QACZ,YAAY;QACZ,mBAAmB;QACnB,eAAe;QACf,yBAAyB;QACzB,OAAO;QACP,MAAM;QAEN,0DAA0D;QAC1D,8BAA8B;QAC9B,0CAA0C;QAC1C,iDAAiD;QACjD,gEAAgE;QAChE,oCAAoC;QACpC,4BAA4B;QAC5B,MAAM;QAEN,OAAO,kLAAY,CAAC,IAAI,CACtB;YACE,SAAS;YACT;YACA,SAAS;QACX,GACA;YAAE,QAAQ;QAAI;IAElB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,kLAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAA+C,GACxD;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}