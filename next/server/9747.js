"use strict";exports.id=9747,exports.ids=[9747],exports.modules={26424:(a,b,c)=>{let d=c(27910).Transform;function e(a){let b;"string"==typeof a&&(a=Buffer.from(a,"utf-8"));let c=[[9],[10],[13],[32,60],[62,126]],d="";for(let e=0,f=a.length;e<f;e++){if(function(a,b){for(let c=b.length-1;c>=0;c--)if(b[c].length&&(1===b[c].length&&a===b[c][0]||2===b[c].length&&a>=b[c][0]&&a<=b[c][1]))return!0;return!1}(b=a[e],c)&&(32!==b&&9!==b||e!==f-1&&10!==a[e+1]&&13!==a[e+1])){d+=String.fromCharCode(b);continue}d+="="+(b<16?"0":"")+b.toString(16).toUpperCase()}return d}function f(a,b){let c,d,e;if(a=(a||"").toString(),b=b||76,a.length<=b)return a;let f=0,g=a.length,h=Math.floor(b/3),i="";for(;f<g;){if(c=(e=a.substr(f,b)).match(/\r\n/)){i+=e=e.substr(0,c.index+c[0].length),f+=e.length;continue}if("\n"===e.substr(-1)){i+=e,f+=e.length;continue}if(c=e.substr(-h).match(/\n.*?$/)){i+=e=e.substr(0,e.length-(c[0].length-1)),f+=e.length;continue}if(e.length>b-h&&(c=e.substr(-h).match(/[ \t.,!?][^ \t.,!?]*$/)))e=e.substr(0,e.length-(c[0].length-1));else if(e.match(/[=][\da-f]{0,2}$/i))for((c=e.match(/[=][\da-f]{0,1}$/i))&&(e=e.substr(0,e.length-c[0].length));e.length>3&&e.length<g-f&&!e.match(/^(?:=[\da-f]{2}){1,4}$/i)&&(c=e.match(/[=][\da-f]{2}$/gi))&&!((d=parseInt(c[0].substr(1,2),16))<128)&&(e=e.substr(0,e.length-3),!(d>=192)););f+e.length<g&&"\n"!==e.substr(-1)?(e.length===b&&e.match(/[=][\da-f]{2}$/i)?e=e.substr(0,e.length-3):e.length===b&&(e=e.substr(0,e.length-1)),f+=e.length,e+="=\r\n"):f+=e.length,i+=e}return i}class g extends d{constructor(a){super(),this.options=a||{},!1!==this.options.lineLength&&(this.options.lineLength=this.options.lineLength||76),this._curLine="",this.inputBytes=0,this.outputBytes=0}_transform(a,b,c){let d;if("buffer"!==b&&(a=Buffer.from(a,b)),!a||!a.length)return c();this.inputBytes+=a.length,this.options.lineLength?(d=(d=f(d=this._curLine+e(a),this.options.lineLength)).replace(/(^|\n)([^\n]*)$/,(a,b,c)=>(this._curLine=c,b)))&&(this.outputBytes+=d.length,this.push(d)):(d=e(a),this.outputBytes+=d.length,this.push(d,"ascii")),c()}_flush(a){this._curLine&&(this.outputBytes+=this._curLine.length,this.push(this._curLine,"ascii")),a()}}a.exports={encode:e,wrap:f,Encoder:g}},76838:a=>{let b=/^xn--/,c=/[^\0-\x7F]/,d=/[\x2E\u3002\uFF0E\uFF61]/g,e={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},f=Math.floor,g=String.fromCharCode;function h(a){throw RangeError(e[a])}function i(a,b){let c=a.split("@"),e="";return c.length>1&&(e=c[0]+"@",a=c[1]),e+(function(a,b){let c=[],d=a.length;for(;d--;)c[d]=b(a[d]);return c})((a=a.replace(d,".")).split("."),b).join(".")}function j(a){let b=[],c=0,d=a.length;for(;c<d;){let e=a.charCodeAt(c++);if(e>=55296&&e<=56319&&c<d){let d=a.charCodeAt(c++);(64512&d)==56320?b.push(((1023&e)<<10)+(1023&d)+65536):(b.push(e),c--)}else b.push(e)}return b}let k=function(a,b){return a+22+75*(a<26)-((0!=b)<<5)},l=function(a,b,c){let d=0;for(a=c?f(a/700):a>>1,a+=f(a/b);a>455;d+=36)a=f(a/35);return f(d+36*a/(a+38))},m=function(a){let b=[],c=a.length,d=0,e=128,g=72,i=a.lastIndexOf("-");i<0&&(i=0);for(let c=0;c<i;++c)a.charCodeAt(c)>=128&&h("not-basic"),b.push(a.charCodeAt(c));for(let k=i>0?i+1:0;k<c;){let i=d;for(let b=1,e=36;;e+=36){var j;k>=c&&h("invalid-input");let i=(j=a.charCodeAt(k++))>=48&&j<58?26+(j-48):j>=65&&j<91?j-65:j>=97&&j<123?j-97:36;i>=36&&h("invalid-input"),i>f((0x7fffffff-d)/b)&&h("overflow"),d+=i*b;let l=e<=g?1:e>=g+26?26:e-g;if(i<l)break;let m=36-l;b>f(0x7fffffff/m)&&h("overflow"),b*=m}let m=b.length+1;g=l(d-i,m,0==i),f(d/m)>0x7fffffff-e&&h("overflow"),e+=f(d/m),d%=m,b.splice(d++,0,e)}return String.fromCodePoint(...b)},n=function(a){let b=[],c=(a=j(a)).length,d=128,e=0,i=72;for(let c of a)c<128&&b.push(g(c));let m=b.length,n=m;for(m&&b.push("-");n<c;){let c=0x7fffffff;for(let b of a)b>=d&&b<c&&(c=b);let j=n+1;for(let o of(c-d>f((0x7fffffff-e)/j)&&h("overflow"),e+=(c-d)*j,d=c,a))if(o<d&&++e>0x7fffffff&&h("overflow"),o===d){let a=e;for(let c=36;;c+=36){let d=c<=i?1:c>=i+26?26:c-i;if(a<d)break;let e=a-d,h=36-d;b.push(g(k(d+e%h,0))),a=f(e/h)}b.push(g(k(a,0))),i=l(e,j,n===m),e=0,++n}++e,++d}return b.join("")};a.exports={version:"2.3.1",ucs2:{decode:j,encode:a=>String.fromCodePoint(...a)},decode:m,encode:n,toASCII:function(a){return i(a,function(a){return c.test(a)?"xn--"+n(a):a})},toUnicode:function(a){return i(a,function(a){return b.test(a)?m(a.slice(4).toLowerCase()):a})}}},98846:(a,b,c)=>{let d=c(94735),e=c(60269),f=c(76600),g=c(70957),h=c(38928);class i extends d{constructor(a){super(),a=a||{},this.options=a||{},this.ses=this.options.SES,this.name="SESTransport",this.version=e.version,this.logger=f.getLogger(this.options,{component:this.options.component||"ses-transport"})}getRegion(a){return this.ses.sesClient.config&&"function"==typeof this.ses.sesClient.config.region?this.ses.sesClient.config.region().then(b=>a(null,b)).catch(b=>a(b)):a(null,!1)}send(a,b){let c={ts:Date.now(),pending:!0},d=a.message._headers.find(a=>/^from$/i.test(a.key));if(d){let a=new h("text/plain");d=a._convertAddresses(a._parseAddresses(d.value))}let e=a.data.envelope||a.message.getEnvelope(),f=a.message.messageId(),i=[].concat(e.to||[]);i.length>3&&i.push("...and "+i.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:f},"Sending message %s to <%s>",f,i.join(", ")),setImmediate(()=>{var h;let i,j,k,l;return h=(g,h)=>{if(g)return this.logger.error({err:g,tnx:"send",messageId:f},"Failed creating message for %s. %s",f,g.message),c.pending=!1,b(g);let i={Content:{Raw:{Data:h}},FromEmailAddress:d||e.from,Destination:{ToAddresses:e.to}};Object.keys(a.data.ses||{}).forEach(b=>{i[b]=a.data.ses[b]}),this.getRegion((a,d)=>{(a||!d)&&(d="us-east-1");let g=new this.ses.SendEmailCommand(i);this.ses.sesClient.send(g).then(a=>{"us-east-1"===d&&(d="email"),c.pending=!0,b(null,{envelope:{from:e.from,to:e.to},messageId:"<"+a.MessageId+(/@/.test(a.MessageId)?"":"@"+d+".amazonses.com")+">",response:a.MessageId,raw:h})}).catch(a=>{this.logger.error({err:a,tnx:"send"},"Send error for %s: %s",f,a.message),c.pending=!1,b(a)})})},a.data._dkim||(a.data._dkim={}),a.data._dkim.skipFields&&"string"==typeof a.data._dkim.skipFields?a.data._dkim.skipFields+=":date:message-id":a.data._dkim.skipFields="date:message-id",j=(i=a.message.createReadStream()).pipe(new g),k=[],l=0,void(j.on("readable",()=>{let a;for(;null!==(a=j.read());)k.push(a),l+=a.length}),i.once("error",a=>j.emit("error",a)),j.once("error",a=>{h(a)}),j.once("end",()=>h(null,Buffer.concat(k,l))))})}verify(a){let b;a||(b=new Promise((b,c)=>{a=f.callbackPromise(b,c)}));let c=b=>b&&!["InvalidParameterValue","MessageRejected"].includes(b.code||b.Code||b.name)?a(b):a(null,!0),d={Content:{Raw:{Data:Buffer.from("From: <invalid@invalid>\r\nTo: <invalid@invalid>\r\n Subject: Invalid\r\n\r\nInvalid")}},FromEmailAddress:"invalid@invalid",Destination:{ToAddresses:["invalid@invalid"]}};return this.getRegion((a,b)=>{(a||!b)&&(b="us-east-1");let e=new this.ses.SendEmailCommand(d);this.ses.sesClient.send(e).then(a=>c(null,a)).catch(a=>c(a))}),b}}a.exports=i},99696:(a,b,c)=>{let d=c(79646).spawn,e=c(60269),f=c(76600);class g{constructor(a){a=a||{},this._spawn=d,this.options=a||{},this.name="Sendmail",this.version=e.version,this.path="sendmail",this.args=!1,this.winbreak=!1,this.logger=f.getLogger(this.options,{component:this.options.component||"sendmail"}),a&&("string"==typeof a?this.path=a:"object"==typeof a&&(a.path&&(this.path=a.path),Array.isArray(a.args)&&(this.args=a.args),this.winbreak=["win","windows","dos","\r\n"].includes((a.newline||"").toString().toLowerCase())))}send(a,b){let c,d,e;a.message.keepBcc=!0;let f=a.data.envelope||a.message.getEnvelope(),g=a.message.messageId();if([].concat(f.from||[]).concat(f.to||[]).some(a=>/^-/.test(a)))return b(Error("Can not send mail. Invalid envelope addresses."));c=this.args?["-i"].concat(this.args).concat(f.to):["-i"].concat(f.from?["-f",f.from]:[]).concat(f.to);let h=c=>{if(!e&&(e=!0,"function"==typeof b))if(c)return b(c);else return b(null,{envelope:a.data.envelope||a.message.getEnvelope(),messageId:g,response:"Messages queued for delivery"})};try{d=this._spawn(this.path,c)}catch(a){return this.logger.error({err:a,tnx:"spawn",messageId:g},"Error occurred while spawning sendmail. %s",a.message),h(a)}if(!d)return h(Error("sendmail was not found"));{d.on("error",a=>{this.logger.error({err:a,tnx:"spawn",messageId:g},"Error occurred when sending message %s. %s",g,a.message),h(a)}),d.once("exit",a=>{let b;if(!a)return h();b=127===a?Error("Sendmail command not found, process exited with code "+a):Error("Sendmail exited with code "+a),this.logger.error({err:b,tnx:"stdin",messageId:g},"Error sending message %s to sendmail. %s",g,b.message),h(b)}),d.once("close",h),d.stdin.on("error",a=>{this.logger.error({err:a,tnx:"stdin",messageId:g},"Error occurred when piping message %s to sendmail. %s",g,a.message),h(a)});let b=[].concat(f.to||[]);b.length>3&&b.push("...and "+b.splice(2).length+" more"),this.logger.info({tnx:"send",messageId:g},"Sending message %s to <%s>",g,b.join(", "));let c=a.message.createReadStream();c.once("error",a=>{this.logger.error({err:a,tnx:"stdin",messageId:g},"Error occurred when generating message %s. %s",g,a.message),d.kill("SIGINT"),h(a)}),c.pipe(d.stdin)}}}a.exports=g}};