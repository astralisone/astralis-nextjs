"use strict";exports.id=6276,exports.ids=[6276],exports.modules={7748:(a,b,c)=>{c.d(b,{Fc:()=>n,TN:()=>p,XL:()=>o});var d=c(22052),e=c(71165),f=c(55057),g=c(78386),h=c(575),i=c(96351),j=c(40493),k=c(38511);let l=(0,f.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-white border-slate-300 text-slate-900",success:"border-green-500/50 bg-green-50 text-green-900 [&>svg]:text-green-600",error:"border-red-500/50 bg-red-50 text-red-900 [&>svg]:text-red-600",warning:"border-yellow-500/50 bg-yellow-50 text-yellow-900 [&>svg]:text-yellow-600",info:"border-blue-500/50 bg-blue-50 text-blue-900 [&>svg]:text-astralis-blue"}},defaultVariants:{variant:"default"}}),m={default:g.A,success:h.A,error:i.A,warning:j.A,info:g.A},n=e.forwardRef(({className:a,variant:b="default",showIcon:c=!1,children:e,...f},g)=>{let h=m[b||"default"];return(0,d.jsxs)("div",{ref:g,role:"alert",className:(0,k.cn)(l({variant:b}),a),...f,children:[c&&(0,d.jsx)(h,{className:"h-4 w-4"}),e]})});n.displayName="Alert";let o=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h5",{ref:c,className:(0,k.cn)("mb-1 font-semibold leading-none tracking-tight",a),...b}));o.displayName="AlertTitle";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,k.cn)("text-sm [&_p]:leading-relaxed",a),...b}));p.displayName="AlertDescription"},77438:(a,b,c)=>{c.d(b,{p:()=>g});var d=c(22052),e=c(71165),f=c(38511);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",a),ref:e,...c}));g.displayName="Input"},83626:(a,b,c)=>{c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(22052),e=c(71165),f=c(38511);let g=e.forwardRef(({className:a,variant:b="default",hover:c=!1,...e},g)=>(0,d.jsx)("div",{ref:g,className:(0,f.cn)("rounded-lg bg-white transition-all duration-200 dark:bg-slate-800 dark:border-slate-700",{default:"border border-slate-200 shadow-[0_2px_8px_rgba(0,0,0,0.06)]",bordered:"border-2 border-slate-300",elevated:"shadow-[0_8px_24px_rgba(0,0,0,0.12)]"}[b],c&&"hover:shadow-[0_8px_24px_rgba(0,0,0,0.12)] hover:border-slate-300",a),...e}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,f.cn)("text-sm text-slate-500 dark:text-slate-400",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"},86276:(a,b,c)=>{c.d(b,{CalendarChatPanel:()=>q});var d=c(22052),e=c(71165),f=c(59940),g=c(49177),h=c(40493),i=c(60952),j=c(96351),k=c(67196),l=c(38511),m=c(99924),n=c(77438),o=c(83626),p=c(7748);function q({userId:a,orgId:b,className:c,onEventCreated:q}){let[r,s]=(0,e.useState)([{id:"welcome",role:"assistant",content:'Hi! I\'m your calendar assistant. I can help you:\n\n• View your schedule\n• Schedule new meetings\n• Find available time slots\n• Check your availability\n• Cancel events\n\nTry asking me something like:\n• "What meetings do I have tomorrow?"\n• "Find me 2 hours of focus time this week"\n• "Schedule a meeting with john@example.com next Tuesday at 2pm"',timestamp:new Date}]),[t,u]=(0,e.useState)(""),[v,w]=(0,e.useState)(!1),[x,y]=(0,e.useState)(null),[z,A]=(0,e.useState)(null),B=(0,e.useRef)(null),C=(0,e.useRef)(null),D=async()=>{if(!t.trim()||v)return;let a={id:`user-${Date.now()}`,role:"user",content:t.trim(),timestamp:new Date};s(b=>[...b,a]),u(""),y(null),w(!0);try{let b=r.slice(-5).map(a=>({role:a.role,content:a.content})),c=await fetch("/api/chat/calendar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:a.content,context:{previousMessages:b,confirmed:!1}})});if(!c.ok){let a=await c.json();throw Error(a.details||a.error||"Failed to send message")}let d=await c.json(),e={id:`assistant-${Date.now()}`,role:"assistant",content:d.message,timestamp:new Date,requiresConfirmation:d.requiresConfirmation,action:d.action,data:d.data};s(a=>[...a,e]),d.requiresConfirmation&&d.action?A(d.action):A(null)}catch(b){console.error("Failed to send message:",b),y(b instanceof Error?b.message:"Failed to send message");let a={id:`error-${Date.now()}`,role:"assistant",content:`I encountered an error: ${b instanceof Error?b.message:"Unknown error"}. Please try again.`,timestamp:new Date};s(b=>[...b,a])}finally{w(!1)}},E=async()=>{if(z){w(!0),y(null);try{let a=await fetch("/api/chat/calendar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Confirmed",context:{confirmed:!0,pendingAction:z}})});if(!a.ok){let b=await a.json();throw Error(b.details||b.error||"Failed to confirm action")}let b=await a.json(),c={id:`confirmation-${Date.now()}`,role:"assistant",content:b.message,timestamp:new Date,data:b.data};s(a=>[...a,c]),A(null),q&&q()}catch(b){console.error("Failed to confirm action:",b),y(b instanceof Error?b.message:"Failed to confirm action");let a={id:`error-${Date.now()}`,role:"assistant",content:`Failed to confirm: ${b instanceof Error?b.message:"Unknown error"}. Please try again.`,timestamp:new Date};s(b=>[...b,a])}finally{w(!1)}}};return(0,d.jsxs)("div",{className:(0,l.cn)("flex flex-col h-full bg-white rounded-lg border border-slate-300 shadow-card",c),children:[(0,d.jsx)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-300 bg-gradient-to-r from-astralis-blue to-blue-600",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,d.jsx)(f.A,{className:"h-5 w-5 text-white"})}),(0,d.jsxs)("div",{children:[(0,d.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Calendar Assistant"}),(0,d.jsx)("p",{className:"text-xs text-white/80",children:"Manage your schedule with natural language"})]})]})}),(0,d.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4 bg-slate-50",children:[r.map(a=>(0,d.jsx)("div",{className:(0,l.cn)("flex gap-3","user"===a.role?"justify-end":"justify-start"),children:(0,d.jsxs)("div",{className:(0,l.cn)("flex flex-col max-w-[80%] gap-2","user"===a.role?"items-end":"items-start"),children:[(0,d.jsx)(o.Zp,{variant:"default",className:(0,l.cn)("px-4 py-3 shadow-sm","user"===a.role?"bg-astralis-blue text-white border-astralis-blue":"bg-white border-slate-300"),children:(0,d.jsx)("p",{className:(0,l.cn)("text-sm leading-relaxed whitespace-pre-wrap","user"===a.role?"text-white":"text-slate-900"),children:a.content})}),(0,d.jsx)("span",{className:"text-xs text-slate-500",children:new Date(a.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]})},a.id)),v&&(0,d.jsx)("div",{className:"flex justify-start",children:(0,d.jsx)(o.Zp,{variant:"default",className:"px-4 py-3 bg-white border-slate-300 shadow-sm",children:(0,d.jsxs)("div",{className:"flex items-center gap-3",children:[(0,d.jsx)(g.A,{className:"h-5 w-5 text-astralis-blue animate-spin"}),(0,d.jsx)("p",{className:"text-sm text-slate-600 font-medium",children:"Thinking..."})]})})}),x&&(0,d.jsx)(p.Fc,{variant:"error",showIcon:!0,children:(0,d.jsx)(p.TN,{children:x})}),(0,d.jsx)("div",{ref:B})]}),z&&!v&&(0,d.jsx)("div",{className:"px-6 py-4 border-t border-amber-200 bg-amber-50",children:(0,d.jsxs)("div",{className:"flex items-start gap-3",children:[(0,d.jsx)(h.A,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,d.jsxs)("div",{className:"flex-1",children:[(0,d.jsx)("p",{className:"text-sm font-semibold text-amber-900 mb-3",children:"Confirmation Required"}),(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsxs)(m.$,{onClick:E,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[(0,d.jsx)(i.A,{className:"h-4 w-4"}),"Confirm"]}),(0,d.jsxs)(m.$,{onClick:()=>{A(null);let a={id:`cancel-${Date.now()}`,role:"assistant",content:"Action cancelled. How else can I help you with your calendar?",timestamp:new Date};s(b=>[...b,a])},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,d.jsx)(j.A,{className:"h-4 w-4"}),"Cancel"]})]})]})]})}),(0,d.jsxs)("div",{className:"px-6 py-4 border-t border-slate-300 bg-white",children:[(0,d.jsxs)("div",{className:"flex gap-2",children:[(0,d.jsx)(n.p,{ref:C,value:t,onChange:a=>u(a.target.value),onKeyDown:a=>{"Enter"!==a.key||a.shiftKey||(a.preventDefault(),D())},placeholder:"Ask about your calendar...",disabled:v,className:"flex-1"}),(0,d.jsx)(m.$,{onClick:D,variant:"primary",size:"icon",disabled:!t.trim()||v,className:"flex-shrink-0",children:v?(0,d.jsx)(g.A,{className:"h-5 w-5 animate-spin"}):(0,d.jsx)(k.A,{className:"h-5 w-5"})})]}),(0,d.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Press Enter to send"})]})]})}}};