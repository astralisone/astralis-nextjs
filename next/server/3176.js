"use strict";exports.id=3176,exports.ids=[3176],exports.modules={13508:(a,b,c)=>{c.d(b,{Cf:()=>m,Es:()=>o,L3:()=>p,c7:()=>n,lG:()=>i,rr:()=>q,zM:()=>j});var d=c(22052),e=c(71165),f=c(35062),g=c(87860),h=c(38511);let i=f.bL,j=f.l9,k=f.ZL;f.bm;let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hJ,{ref:c,className:(0,h.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...b}));l.displayName=f.hJ.displayName;let m=e.forwardRef(({className:a,children:b,showCloseButton:c=!0,...e},i)=>(0,d.jsxs)(k,{children:[(0,d.jsx)(l,{}),(0,d.jsxs)(f.UC,{ref:i,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 bg-white p-6 shadow-lg duration-200","rounded-lg","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%]",a),...e,children:[b,c&&(0,d.jsxs)(f.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-astralis-blue focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500",children:[(0,d.jsx)(g.A,{className:"h-4 w-4"}),(0,d.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=f.UC.displayName;let n=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-1.5 text-center sm:text-left",a),...b});n.displayName="DialogHeader";let o=({className:a,...b})=>(0,d.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",a),...b});o.displayName="DialogFooter";let p=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.hE,{ref:c,className:(0,h.cn)("text-lg font-semibold leading-none tracking-tight text-astralis-navy",a),...b}));p.displayName=f.hE.displayName;let q=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.VY,{ref:c,className:(0,h.cn)("text-sm text-slate-600",a),...b}));q.displayName=f.VY.displayName},34654:(a,b,c)=>{c.d(b,{T:()=>g});var d=c(22052),e=c(71165),f=c(38511);let g=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("textarea",{className:(0,f.cn)("flex min-h-[80px] w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50",a),ref:c,...b}));g.displayName="Textarea"},39448:(a,b,c)=>{c.d(b,{J:()=>h});var d=c(22052),e=c(71165),f=c(86286),g=c(38511);let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)(f.b,{ref:c,className:(0,g.cn)("text-sm font-medium leading-none text-slate-700","peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...b}));h.displayName=f.b.displayName},41511:(a,b,c)=>{c.d(b,{Ni:()=>e,fQ:()=>d});let d={all:["pipelines"],lists:()=>[...d.all,"list"],list:(a,b)=>[...d.lists(),a,{filters:b}],details:()=>[...d.all,"detail"],detail:a=>[...d.details(),a],items:a=>[...d.detail(a),"items"],stages:a=>[...d.detail(a),"stages"],item:(a,b)=>[...d.items(a),b]},e={all:["intake"],lists:()=>[...e.all,"list"],list:(a,b)=>[...e.lists(),a,{filters:b}],details:()=>[...e.all,"detail"],detail:a=>[...e.details(),a],stats:a=>[...e.all,a,"stats"]}},47915:(a,b,c)=>{c.d(b,{Cs:()=>k,IM:()=>j,be:()=>i});var d=c(70180),e=c(43095),f=c(10406),g=c(39820),h=c(41511);function i(){let{data:a}=(0,g.useSession)(),b=a?.user?.orgId;return(0,d.I)({queryKey:b?h.fQ.list(b):["pipelines"],queryFn:async()=>{if(!b)throw Error("No organization ID");let a=await fetch(`/api/pipelines?orgId=${b}`);if(!a.ok)throw Error("Failed to fetch pipelines");return(await a.json()).pipelines},enabled:!!b,staleTime:3e4})}function j(a){let{data:b}=(0,g.useSession)(),c=b?.user?.orgId;return(0,d.I)({queryKey:h.fQ.detail(a),queryFn:async()=>{let b=await fetch(`/api/pipelines/${a}?orgId=${c}`);if(!b.ok)throw Error("Failed to fetch pipeline");return await b.json()},enabled:!!a&&!!c,refetchInterval:3e4})}function k(){let a=(0,e.jE)();return(0,f.n)({mutationFn:async({itemId:a,pipelineId:b,targetStageId:c})=>{let d=await fetch(`/api/pipelines/${b}/items/${a}/move`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetStageId:c})});if(!d.ok)throw Error("Failed to move item");return d.json()},onMutate:async({itemId:b,pipelineId:c,targetStageId:d})=>{let e=h.fQ.detail(c);await a.cancelQueries({queryKey:e});let f=a.getQueryData(e);return a.setQueryData(e,a=>{if(!a)return a;let c=a.stages.map(c=>{let e=c.items.filter(a=>a.id!==b);if(c.id===d){let f=a.stages.flatMap(a=>a.items).find(a=>a.id===b);if(f)return{...c,items:[...e,{...f,stageId:d}]}}return{...c,items:e}});return{...a,stages:c}}),{previousPipeline:f}},onError:(b,c,d)=>{d?.previousPipeline&&a.setQueryData(h.fQ.detail(c.pipelineId),d.previousPipeline)},onSettled:(b,c,d)=>{a.invalidateQueries({queryKey:h.fQ.detail(d.pipelineId)})}})}},77438:(a,b,c)=>{c.d(b,{p:()=>g});var d=c(22052),e=c(71165),f=c(38511);let g=e.forwardRef(({className:a,type:b,...c},e)=>(0,d.jsx)("input",{type:b,className:(0,f.cn)("flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",a),ref:e,...c}));g.displayName="Input"},83626:(a,b,c)=>{c.d(b,{BT:()=>j,Wu:()=>k,ZB:()=>i,Zp:()=>g,aR:()=>h,wL:()=>l});var d=c(22052),e=c(71165),f=c(38511);let g=e.forwardRef(({className:a,variant:b="default",hover:c=!1,...e},g)=>(0,d.jsx)("div",{ref:g,className:(0,f.cn)("rounded-lg bg-white transition-all duration-200 dark:bg-slate-800 dark:border-slate-700",{default:"border border-slate-200 shadow-[0_2px_8px_rgba(0,0,0,0.06)]",bordered:"border-2 border-slate-300",elevated:"shadow-[0_8px_24px_rgba(0,0,0,0.12)]"}[b],c&&"hover:shadow-[0_8px_24px_rgba(0,0,0,0.12)] hover:border-slate-300",a),...e}));g.displayName="Card";let h=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex flex-col space-y-1.5 p-6",a),...b}));h.displayName="CardHeader";let i=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("h3",{ref:c,className:(0,f.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...b}));i.displayName="CardTitle";let j=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("p",{ref:c,className:(0,f.cn)("text-sm text-slate-500 dark:text-slate-400",a),...b}));j.displayName="CardDescription";let k=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("p-6 pt-0",a),...b}));k.displayName="CardContent";let l=e.forwardRef(({className:a,...b},c)=>(0,d.jsx)("div",{ref:c,className:(0,f.cn)("flex items-center p-6 pt-0",a),...b}));l.displayName="CardFooter"}};