exports.id=557,exports.ids=[557],exports.modules={2565:(a,b,c)=>{let d=c(23013),e=c(87697);function f(a,b){if(this.token=a,this.key=b.headers["x-pusher-key"],this.signature=b.headers["x-pusher-signature"],this.contentType=b.headers["content-type"],this.body=b.rawBody,this.isContentTypeValid())try{this.data=JSON.parse(this.body)}catch(a){}}f.prototype.isValid=function(a){if(!this.isBodyValid())return!1;(a=a||[])instanceof Array||(a=[a]);let b=[this.token].concat(a);for(let a in b){let c=b[a];if(c instanceof e==!1&&(c=new e(c.key,c.secret)),this.key==c.key&&c.verify(this.body,this.signature))return!0}return!1},f.prototype.isContentTypeValid=function(){return"application/json"===this.contentType},f.prototype.isBodyValid=function(){return void 0!==this.data},f.prototype.getData=function(){if(!this.isBodyValid())throw new d.WebHookError("Invalid WebHook body",this.contentType,this.body,this.signature);return this.data},f.prototype.getEvents=function(){return this.getData().events},f.prototype.getTime=function(){return new Date(this.getData().time_ms)},a.exports=f},23013:(a,b)=>{function c(a,b,c,d,e){this.name="PusherRequestError",this.stack=Error().stack,this.message=a,this.url=b,this.error=c,this.status=d,this.body=e}function d(a,b,c,d){this.name="PusherWebHookError",this.stack=Error().stack,this.message=a,this.contentType=b,this.body=c,this.signature=d}c.prototype=Error(),d.prototype=Error(),b.RequestError=c,b.WebHookError=d},26502:(a,b,c)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});var d=c(41458);class AbortSignal extends d.EventTarget{constructor(){throw super(),TypeError("AbortSignal cannot be constructed directly")}get aborted(){let a=e.get(this);if("boolean"!=typeof a)throw TypeError(`Expected 'this' to be an 'AbortSignal' object, but got ${this===null?"null":typeof this}`);return a}}d.defineEventAttribute(AbortSignal.prototype,"abort");let e=new WeakMap;Object.defineProperties(AbortSignal.prototype,{aborted:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(AbortSignal.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortSignal"});class f{constructor(){g.set(this,function(){let a=Object.create(AbortSignal.prototype);return d.EventTarget.call(a),e.set(a,!1),a}())}get signal(){return h(this)}abort(){var a;a=h(this),!1===e.get(a)&&(e.set(a,!0),a.dispatchEvent({type:"abort"}))}}let g=new WeakMap;function h(a){let b=g.get(a);if(null==b)throw TypeError(`Expected 'this' to be an 'AbortController' object, but got ${null===a?"null":typeof a}`);return b}Object.defineProperties(f.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}}),"function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag&&Object.defineProperty(f.prototype,Symbol.toStringTag,{configurable:!0,value:"AbortController"}),b.AbortController=f,b.AbortSignal=AbortSignal,b.default=f,a.exports=f,a.exports.AbortController=a.exports.default=f,a.exports.AbortSignal=AbortSignal},27731:(a,b,c)=>{"use strict";let d;c.d(b,{Ay:()=>$});var e=c(27910),f=c(81630),g=c(79551),h=c(21187),i=c(55591),j=c(74075);let k=e.Readable,l=Symbol("buffer"),m=Symbol("type");class n{constructor(){this[m]="";let a=arguments[0],b=arguments[1],c=[];if(a){let b=Number(a.length);for(let d=0;d<b;d++){let b,e=a[d];(b=e instanceof Buffer?e:ArrayBuffer.isView(e)?Buffer.from(e.buffer,e.byteOffset,e.byteLength):e instanceof ArrayBuffer?Buffer.from(e):e instanceof n?e[l]:Buffer.from("string"==typeof e?e:String(e))).length,c.push(b)}}this[l]=Buffer.concat(c);let d=b&&void 0!==b.type&&String(b.type).toLowerCase();d&&!/[^\u0020-\u007E]/.test(d)&&(this[m]=d)}get size(){return this[l].length}get type(){return this[m]}text(){return Promise.resolve(this[l].toString())}arrayBuffer(){let a=this[l];return Promise.resolve(a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength))}stream(){let a=new k;return a._read=function(){},a.push(this[l]),a.push(null),a}toString(){return"[object Blob]"}slice(){let a,b=this.size,c=arguments[0],d=arguments[1];a=void 0===c?0:c<0?Math.max(b+c,0):Math.min(c,b);let e=Math.max((void 0===d?b:d<0?Math.max(b+d,0):Math.min(d,b))-a,0),f=this[l].slice(a,a+e),g=new n([],{type:arguments[2]});return g[l]=f,g}}function o(a,b,c){Error.call(this,a),this.message=a,this.type=b,c&&(this.code=this.errno=c.code),Error.captureStackTrace(this,this.constructor)}Object.defineProperties(n.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}}),Object.defineProperty(n.prototype,Symbol.toStringTag,{value:"Blob",writable:!1,enumerable:!1,configurable:!0}),o.prototype=Object.create(Error.prototype),o.prototype.constructor=o,o.prototype.name="FetchError";try{d=require("encoding").convert}catch(a){}let p=Symbol("Body internals"),q=e.PassThrough;function r(a){var b=this,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=c.size,f=c.timeout;null==a?a=null:t(a)?a=Buffer.from(a.toString()):u(a)||Buffer.isBuffer(a)||("[object ArrayBuffer]"===Object.prototype.toString.call(a)?a=Buffer.from(a):ArrayBuffer.isView(a)?a=Buffer.from(a.buffer,a.byteOffset,a.byteLength):a instanceof e||(a=Buffer.from(String(a)))),this[p]={body:a,disturbed:!1,error:null},this.size=void 0===d?0:d,this.timeout=void 0===f?0:f,a instanceof e&&a.on("error",function(a){let c="AbortError"===a.name?a:new o(`Invalid response body while trying to fetch ${b.url}: ${a.message}`,"system",a);b[p].error=c})}function s(){var a=this;if(this[p].disturbed)return r.Promise.reject(TypeError(`body used already for: ${this.url}`));if(this[p].disturbed=!0,this[p].error)return r.Promise.reject(this[p].error);let b=this.body;if(null===b)return r.Promise.resolve(Buffer.alloc(0));if(u(b)&&(b=b.stream()),Buffer.isBuffer(b))return r.Promise.resolve(b);if(!(b instanceof e))return r.Promise.resolve(Buffer.alloc(0));let c=[],d=0,f=!1;return new r.Promise(function(e,g){let h;a.timeout&&(h=setTimeout(function(){f=!0,g(new o(`Response timeout while trying to fetch ${a.url} (over ${a.timeout}ms)`,"body-timeout"))},a.timeout)),b.on("error",function(b){"AbortError"===b.name?(f=!0,g(b)):g(new o(`Invalid response body while trying to fetch ${a.url}: ${b.message}`,"system",b))}),b.on("data",function(b){if(!f&&null!==b){if(a.size&&d+b.length>a.size){f=!0,g(new o(`content size at ${a.url} over limit: ${a.size}`,"max-size"));return}d+=b.length,c.push(b)}}),b.on("end",function(){if(!f){clearTimeout(h);try{e(Buffer.concat(c,d))}catch(b){g(new o(`Could not create Buffer from response body for ${a.url}: ${b.message}`,"system",b))}}})})}function t(a){return"object"==typeof a&&"function"==typeof a.append&&"function"==typeof a.delete&&"function"==typeof a.get&&"function"==typeof a.getAll&&"function"==typeof a.has&&"function"==typeof a.set&&("URLSearchParams"===a.constructor.name||"[object URLSearchParams]"===Object.prototype.toString.call(a)||"function"==typeof a.sort)}function u(a){return"object"==typeof a&&"function"==typeof a.arrayBuffer&&"string"==typeof a.type&&"function"==typeof a.stream&&"function"==typeof a.constructor&&"string"==typeof a.constructor.name&&/^(Blob|File)$/.test(a.constructor.name)&&/^(Blob|File)$/.test(a[Symbol.toStringTag])}function v(a){let b,c,d=a.body;if(a.bodyUsed)throw Error("cannot clone body after it is used");return d instanceof e&&"function"!=typeof d.getBoundary&&(b=new q,c=new q,d.pipe(b),d.pipe(c),a[p].body=b,d=c),d}function w(a){if(null===a)return null;if("string"==typeof a)return"text/plain;charset=UTF-8";if(t(a))return"application/x-www-form-urlencoded;charset=UTF-8";if(u(a))return a.type||null;if(Buffer.isBuffer(a))return null;else if("[object ArrayBuffer]"===Object.prototype.toString.call(a))return null;else if(ArrayBuffer.isView(a))return null;else if("function"==typeof a.getBoundary)return`multipart/form-data;boundary=${a.getBoundary()}`;else if(a instanceof e)return null;else return"text/plain;charset=UTF-8"}function x(a){let b=a.body;return null===b?0:u(b)?b.size:Buffer.isBuffer(b)?b.length:b&&"function"==typeof b.getLengthSync?b._lengthRetrievers&&0==b._lengthRetrievers.length||b.hasKnownLength&&b.hasKnownLength()?b.getLengthSync():null:null}r.prototype={get body(){return this[p].body},get bodyUsed(){return this[p].disturbed},arrayBuffer(){return s.call(this).then(function(a){return a.buffer.slice(a.byteOffset,a.byteOffset+a.byteLength)})},blob(){let a=this.headers&&this.headers.get("content-type")||"";return s.call(this).then(function(b){return Object.assign(new n([],{type:a.toLowerCase()}),{[l]:b})})},json(){var a=this;return s.call(this).then(function(b){try{return JSON.parse(b.toString())}catch(b){return r.Promise.reject(new o(`invalid json response body at ${a.url} reason: ${b.message}`,"invalid-json"))}})},text(){return s.call(this).then(function(a){return a.toString()})},buffer(){return s.call(this)},textConverted(){var a=this;return s.call(this).then(function(b){return function(a,b){let c,e;if("function"!=typeof d)throw Error("The package `encoding` must be installed to use the textConverted() function");let f=b.get("content-type"),g="utf-8";return f&&(c=/charset=([^;]*)/i.exec(f)),e=a.slice(0,1024).toString(),!c&&e&&(c=/<meta.+?charset=(['"])(.+?)\1/i.exec(e)),!c&&e&&(!(c=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(e))&&(c=/<meta[\s]+?content=(['"])(.+?)\1[\s]+?http-equiv=(['"])content-type\3/i.exec(e))&&c.pop(),c&&(c=/charset=(.*)/i.exec(c.pop()))),!c&&e&&(c=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(e)),c&&("gb2312"===(g=c.pop())||"gbk"===g)&&(g="gb18030"),d(a,"UTF-8",g).toString()}(b,a.headers)})}},Object.defineProperties(r.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}}),r.mixIn=function(a){for(let b of Object.getOwnPropertyNames(r.prototype))if(!(b in a)){let c=Object.getOwnPropertyDescriptor(r.prototype,b);Object.defineProperty(a,b,c)}},r.Promise=global.Promise;let y=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/,z=/[^\t\x20-\x7e\x80-\xff]/;function A(a){if(a=`${a}`,y.test(a)||""===a)throw TypeError(`${a} is not a legal HTTP header name`)}function B(a){if(a=`${a}`,z.test(a))throw TypeError(`${a} is not a legal HTTP header value`)}function C(a,b){for(let c in b=b.toLowerCase(),a)if(c.toLowerCase()===b)return c}let D=Symbol("map");class E{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(this[D]=Object.create(null),a instanceof E){let b=a.raw();for(let a of Object.keys(b))for(let c of b[a])this.append(a,c);return}if(null==a);else if("object"==typeof a){let b=a[Symbol.iterator];if(null!=b){if("function"!=typeof b)throw TypeError("Header pairs must be iterable");let c=[];for(let b of a){if("object"!=typeof b||"function"!=typeof b[Symbol.iterator])throw TypeError("Each header pair must be iterable");c.push(Array.from(b))}for(let a of c){if(2!==a.length)throw TypeError("Each header pair must be a name/value tuple");this.append(a[0],a[1])}}else for(let b of Object.keys(a)){let c=a[b];this.append(b,c)}}else throw TypeError("Provided initializer must be an object")}get(a){A(a=`${a}`);let b=C(this[D],a);return void 0===b?null:this[D][b].join(", ")}forEach(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,c=F(this),d=0;for(;d<c.length;){var e=c[d];let f=e[0],g=e[1];a.call(b,g,f,this),c=F(this),d++}}set(a,b){a=`${a}`,b=`${b}`,A(a),B(b);let c=C(this[D],a);this[D][void 0!==c?c:a]=[b]}append(a,b){a=`${a}`,b=`${b}`,A(a),B(b);let c=C(this[D],a);void 0!==c?this[D][c].push(b):this[D][a]=[b]}has(a){return A(a=`${a}`),void 0!==C(this[D],a)}delete(a){A(a=`${a}`);let b=C(this[D],a);void 0!==b&&delete this[D][b]}raw(){return this[D]}keys(){return H(this,"key")}values(){return H(this,"value")}[Symbol.iterator](){return H(this,"key+value")}}function F(a){let b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"key+value";return Object.keys(a[D]).sort().map("key"===b?function(a){return a.toLowerCase()}:"value"===b?function(b){return a[D][b].join(", ")}:function(b){return[b.toLowerCase(),a[D][b].join(", ")]})}E.prototype.entries=E.prototype[Symbol.iterator],Object.defineProperty(E.prototype,Symbol.toStringTag,{value:"Headers",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(E.prototype,{get:{enumerable:!0},forEach:{enumerable:!0},set:{enumerable:!0},append:{enumerable:!0},has:{enumerable:!0},delete:{enumerable:!0},keys:{enumerable:!0},values:{enumerable:!0},entries:{enumerable:!0}});let G=Symbol("internal");function H(a,b){let c=Object.create(I);return c[G]={target:a,kind:b,index:0},c}let I=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==I)throw TypeError("Value of `this` is not a HeadersIterator");var a=this[G];let b=a.target,c=a.kind,d=a.index,e=F(b,c);return d>=e.length?{value:void 0,done:!0}:(this[G].index=d+1,{value:e[d],done:!1})}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(I,Symbol.toStringTag,{value:"HeadersIterator",writable:!1,enumerable:!1,configurable:!0});let J=Symbol("Response internals"),K=f.STATUS_CODES;class L{constructor(){let a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.call(this,a,b);let c=b.status||200,d=new E(b.headers);if(null!=a&&!d.has("Content-Type")){let b=w(a);b&&d.append("Content-Type",b)}this[J]={url:b.url,status:c,statusText:b.statusText||K[c],headers:d,counter:b.counter}}get url(){return this[J].url||""}get status(){return this[J].status}get ok(){return this[J].status>=200&&this[J].status<300}get redirected(){return this[J].counter>0}get statusText(){return this[J].statusText}get headers(){return this[J].headers}clone(){return new L(v(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}r.mixIn(L.prototype),Object.defineProperties(L.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}}),Object.defineProperty(L.prototype,Symbol.toStringTag,{value:"Response",writable:!1,enumerable:!1,configurable:!0});let M=Symbol("Request internals"),N=g.URL||h.URL,O=g.parse,P=g.format;function Q(a){return/^[a-zA-Z][a-zA-Z\d+\-.]*:/.exec(a)&&(a=new N(a).toString()),O(a)}let R="destroy"in e.Readable.prototype;function S(a){return"object"==typeof a&&"object"==typeof a[M]}class T{constructor(a){let b,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};S(a)?b=Q(a.url):(b=a&&a.href?Q(a.href):Q(`${a}`),a={});let d=c.method||a.method||"GET";if(d=d.toUpperCase(),(null!=c.body||S(a)&&null!==a.body)&&("GET"===d||"HEAD"===d))throw TypeError("Request with GET/HEAD method cannot have body");let e=null!=c.body?c.body:S(a)&&null!==a.body?v(a):null;r.call(this,e,{timeout:c.timeout||a.timeout||0,size:c.size||a.size||0});let f=new E(c.headers||a.headers||{});if(null!=e&&!f.has("Content-Type")){let a=w(e);a&&f.append("Content-Type",a)}let g=S(a)?a.signal:null;if("signal"in c&&(g=c.signal),null!=g&&!function(a){let b=a&&"object"==typeof a&&Object.getPrototypeOf(a);return!!(b&&"AbortSignal"===b.constructor.name)}(g))throw TypeError("Expected signal to be an instanceof AbortSignal");this[M]={method:d,redirect:c.redirect||a.redirect||"follow",headers:f,parsedURL:b,signal:g},this.follow=void 0!==c.follow?c.follow:void 0!==a.follow?a.follow:20,this.compress=void 0!==c.compress?c.compress:void 0===a.compress||a.compress,this.counter=c.counter||a.counter||0,this.agent=c.agent||a.agent}get method(){return this[M].method}get url(){return P(this[M].parsedURL)}get headers(){return this[M].headers}get redirect(){return this[M].redirect}get signal(){return this[M].signal}clone(){return new T(this)}}function U(a){Error.call(this,a),this.type="aborted",this.message=a,Error.captureStackTrace(this,this.constructor)}r.mixIn(T.prototype),Object.defineProperty(T.prototype,Symbol.toStringTag,{value:"Request",writable:!1,enumerable:!1,configurable:!0}),Object.defineProperties(T.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}}),U.prototype=Object.create(Error.prototype),U.prototype.constructor=U,U.prototype.name="AbortError";let V=g.URL||h.URL,W=e.PassThrough,X=function(a,b){let c=new V(b).hostname,d=new V(a).hostname;return c===d||"."===c[c.length-d.length-1]&&c.endsWith(d)};function Y(a,b){if(!Y.Promise)throw Error("native promise missing, set fetch.Promise to your favorite alternative");return r.Promise=Y.Promise,new Y.Promise(function(c,d){var g,h;let k,l,m=new T(a,b),n=function(a){let b=a[M].parsedURL,c=new E(a[M].headers);if(c.has("Accept")||c.set("Accept","*/*"),!b.protocol||!b.hostname)throw TypeError("Only absolute URLs are supported");if(!/^https?:$/.test(b.protocol))throw TypeError("Only HTTP(S) protocols are supported");if(a.signal&&a.body instanceof e.Readable&&!R)throw Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8");let d=null;if(null==a.body&&/^(POST|PUT)$/i.test(a.method)&&(d="0"),null!=a.body){let b=x(a);"number"==typeof b&&(d=String(b))}d&&c.set("Content-Length",d),c.has("User-Agent")||c.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),a.compress&&!c.has("Accept-Encoding")&&c.set("Accept-Encoding","gzip,deflate");let f=a.agent;return"function"==typeof f&&(f=f(b)),Object.assign({},b,{method:a.method,headers:function(a){let b=Object.assign({__proto__:null},a[D]),c=C(a[D],"Host");return void 0!==c&&(b[c]=b[c][0]),b}(c),agent:f})}(m),p=("https:"===n.protocol?i:f).request,q=m.signal,r=null,s=function(){let a=new U("The user aborted a request.");d(a),m.body&&m.body instanceof e.Readable&&Z(m.body,a),r&&r.body&&r.body.emit("error",a)};if(q&&q.aborted)return void s();let t=function(){s(),w()},v=p(n);function w(){v.abort(),q&&q.removeEventListener("abort",t),clearTimeout(k)}q&&q.addEventListener("abort",t),m.timeout&&v.once("socket",function(a){k=setTimeout(function(){d(new o(`network timeout at: ${m.url}`,"request-timeout")),w()},m.timeout)}),v.on("error",function(a){d(new o(`request to ${m.url} failed, reason: ${a.message}`,"system",a)),r&&r.body&&Z(r.body,a),w()}),g=v,h=function(a){(!q||!q.aborted)&&r&&r.body&&Z(r.body,a)},g.on("socket",function(a){l=a}),g.on("response",function(a){let b=a.headers;"chunked"!==b["transfer-encoding"]||b["content-length"]||a.once("close",function(a){if(l&&l.listenerCount("data")>0&&!a){let a=Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",h(a)}})}),14>parseInt(process.version.substring(1))&&v.on("socket",function(a){a.addListener("close",function(b){let c=a.listenerCount("data")>0;if(r&&c&&!b&&!(q&&q.aborted)){let a=Error("Premature close");a.code="ERR_STREAM_PREMATURE_CLOSE",r.body.emit("error",a)}})}),v.on("response",function(a){clearTimeout(k);let b=function(a){let b=new E;for(let c of Object.keys(a))if(!y.test(c))if(Array.isArray(a[c]))for(let d of a[c])z.test(d)||(void 0===b[D][c]?b[D][c]=[d]:b[D][c].push(d));else z.test(a[c])||(b[D][c]=[a[c]]);return b}(a.headers);if(Y.isRedirect(a.statusCode)){let f=b.get("Location"),g=null;try{g=null===f?null:new V(f,m.url).toString()}catch(a){if("manual"!==m.redirect){d(new o(`uri requested responds with an invalid redirect URL: ${f}`,"invalid-redirect")),w();return}}switch(m.redirect){case"error":d(new o(`uri requested responds with a redirect, redirect mode is set to error: ${m.url}`,"no-redirect")),w();return;case"manual":if(null!==g)try{b.set("Location",g)}catch(a){d(a)}break;case"follow":var e;if(null===g)break;if(m.counter>=m.follow){d(new o(`maximum redirect reached at: ${m.url}`,"max-redirect")),w();return}let h={headers:new E(m.headers),follow:m.follow,counter:m.counter+1,agent:m.agent,compress:m.compress,method:m.method,body:m.body,signal:m.signal,timeout:m.timeout,size:m.size};if(!X(m.url,g)||(e=m.url,new V(g).protocol!==new V(e).protocol))for(let a of["authorization","www-authenticate","cookie","cookie2"])h.headers.delete(a);if(303!==a.statusCode&&m.body&&null===x(m)){d(new o("Cannot follow redirect with body being a readable stream","unsupported-redirect")),w();return}(303===a.statusCode||(301===a.statusCode||302===a.statusCode)&&"POST"===m.method)&&(h.method="GET",h.body=void 0,h.headers.delete("content-length")),c(Y(new T(g,h))),w();return}}a.once("end",function(){q&&q.removeEventListener("abort",t)});let f=a.pipe(new W),g={url:m.url,status:a.statusCode,statusText:a.statusMessage,headers:b,size:m.size,timeout:m.timeout,counter:m.counter},h=b.get("Content-Encoding");if(!m.compress||"HEAD"===m.method||null===h||204===a.statusCode||304===a.statusCode)return void c(r=new L(f,g));let i={flush:j.Z_SYNC_FLUSH,finishFlush:j.Z_SYNC_FLUSH};if("gzip"==h||"x-gzip"==h)return void c(r=new L(f=f.pipe(j.createGunzip(i)),g));if("deflate"==h||"x-deflate"==h){let b=a.pipe(new W);b.once("data",function(a){c(r=new L(f=(15&a[0])==8?f.pipe(j.createInflate()):f.pipe(j.createInflateRaw()),g))}),b.on("end",function(){r||c(r=new L(f,g))});return}if("br"==h&&"function"==typeof j.createBrotliDecompress)return void c(r=new L(f=f.pipe(j.createBrotliDecompress()),g));c(r=new L(f,g))});let A=m.body;null===A?v.end():u(A)?A.stream().pipe(v):Buffer.isBuffer(A)?(v.write(A),v.end()):A.pipe(v)})}function Z(a,b){a.destroy?a.destroy(b):(a.emit("error",b),a.end())}Y.isRedirect=function(a){return 301===a||302===a||303===a||307===a||308===a},Y.Promise=global.Promise;let $=Y},30557:(a,b,c)=>{let d=c(55511),e=c(79551),f=c(36576),g=c(23013),h=c(63443),i=c(47508),j=c(50650),k=c(87697),l=c(2565),m=function(a){if("string"!=typeof a||""===a||a.match(/[^A-Za-z0-9_\-=@,.;]/))throw Error("Invalid channel name: '"+a+"'");if(a.length>200)throw Error("Channel name too long: '"+a+"'")},n=function(a){if("string"!=typeof a||""===a||!a.match(/^\d+\.\d+$/))throw Error("Invalid socket id: '"+a+"'")},o=function(a){if("string"!=typeof a||""===a)throw Error("Invalid user id: '"+a+"'")},p=function(a){if(null==a||"object"!=typeof a)throw Error("Invalid user data: '"+a+"'");o(a.id)};function q(a){this.config=new j(a)}q.forURL=function(a,b){let c=e.parse(a),d=c.pathname.split("/"),f=c.auth.split(":");return new q(Object.assign({},b||{},{scheme:c.protocol.replace(/:$/,""),host:c.hostname,port:parseInt(c.port,10)||void 0,appId:parseInt(d[d.length-1],10),key:f[0],secret:f[1]}))},q.forCluster=function(a,b){return new q(Object.assign({},b||{},{host:"api-"+a+".pusher.com"}))},q.prototype.authorizeChannel=function(a,b,c){return n(a),m(b),f.getSocketSignature(this,this.config.token,b,a,c)},q.prototype.authenticate=q.prototype.authorizeChannel,q.prototype.authenticateUser=function(a,b){return n(a),p(b),f.getSocketSignatureForUser(this.config.token,a,b)},q.prototype.sendToUser=function(a,b,c){if(b.length>200)throw Error("Too long event name: '"+b+"'");return o(a),h.trigger(this,[`#server-to-user-${a}`],b,c)},q.prototype.terminateUserConnections=function(a){return o(a),this.post({path:`/users/${a}/terminate_connections`,body:{}})},q.prototype.trigger=function(a,b,c,d){if(d&&d.socket_id&&n(d.socket_id),a instanceof Array||(a=[a]),b.length>200)throw Error("Too long event name: '"+b+"'");if(a.length>100)throw Error("Can't trigger a message to more than 100 channels");for(let b=0;b<a.length;b++)m(a[b]);return h.trigger(this,a,b,c,d)},q.prototype.triggerBatch=function(a){return h.triggerBatch(this,a)},q.prototype.post=function(a){return i.send(this.config,Object.assign({},a,{method:"POST"}))},q.prototype.get=function(a){return i.send(this.config,Object.assign({},a,{method:"GET"}))},q.prototype.webhook=function(a){return new l(this.config.token,a)},q.prototype.createSignedQueryString=function(a){return i.createSignedQueryString(this.config.token,a)},q.prototype.channelSharedSecret=function(a){return d.createHash("sha256").update(Buffer.concat([Buffer.from(a),this.config.encryptionMasterKey])).digest()},q.Token=k,q.RequestError=g.RequestError,q.WebHookError=g.WebHookError,a.exports=q},36576:(a,b,c)=>{let d=c(78802);b.getSocketSignatureForUser=function(a,b,c){let d=JSON.stringify(c),e=a.sign(`${b}::user::${d}`);return{auth:`${a.key}:${e}`,user_data:d}},b.getSocketSignature=function(a,b,c,e,f){let g={},h=[e,c];if(f){let a=JSON.stringify(f);h.push(a),g.channel_data=a}if(g.auth=b.key+":"+b.sign(h.join(":")),d.isEncryptedChannel(c)){if(void 0===a.config.encryptionMasterKey)throw Error("Cannot generate shared_secret because encryptionMasterKey is not set");g.shared_secret=Buffer.from(a.channelSharedSecret(c)).toString("base64")}return g}},41458:(a,b)=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});let c=new WeakMap,d=new WeakMap;function e(a){let b=c.get(a);return console.assert(null!=b,"'this' is expected an Event object, but got",a),b}function f(a){if(null!=a.passiveListener){"undefined"!=typeof console&&"function"==typeof console.error&&console.error("Unable to preventDefault inside passive event listener invocation.",a.passiveListener);return}a.event.cancelable&&(a.canceled=!0,"function"==typeof a.event.preventDefault&&a.event.preventDefault())}function g(a,b){c.set(this,{eventTarget:a,event:b,eventPhase:2,currentTarget:a,canceled:!1,stopped:!1,immediateStopped:!1,passiveListener:null,timeStamp:b.timeStamp||Date.now()}),Object.defineProperty(this,"isTrusted",{value:!1,enumerable:!0});let d=Object.keys(b);for(let a=0;a<d.length;++a){let b=d[a];b in this||Object.defineProperty(this,b,h(b))}}function h(a){return{get(){return e(this).event[a]},set(b){e(this).event[a]=b},configurable:!0,enumerable:!0}}function i(a,b){e(a).passiveListener=b}g.prototype={get type(){return e(this).event.type},get target(){return e(this).eventTarget},get currentTarget(){return e(this).currentTarget},composedPath(){let a=e(this).currentTarget;return null==a?[]:[a]},get NONE(){return 0},get CAPTURING_PHASE(){return 1},get AT_TARGET(){return 2},get BUBBLING_PHASE(){return 3},get eventPhase(){return e(this).eventPhase},stopPropagation(){let a=e(this);a.stopped=!0,"function"==typeof a.event.stopPropagation&&a.event.stopPropagation()},stopImmediatePropagation(){let a=e(this);a.stopped=!0,a.immediateStopped=!0,"function"==typeof a.event.stopImmediatePropagation&&a.event.stopImmediatePropagation()},get bubbles(){return!!e(this).event.bubbles},get cancelable(){return!!e(this).event.cancelable},preventDefault(){f(e(this))},get defaultPrevented(){return e(this).canceled},get composed(){return!!e(this).event.composed},get timeStamp(){return e(this).timeStamp},get srcElement(){return e(this).eventTarget},get cancelBubble(){return e(this).stopped},set cancelBubble(value){if(!value)return;let a=e(this);a.stopped=!0,"boolean"==typeof a.event.cancelBubble&&(a.event.cancelBubble=!0)},get returnValue(){return!e(this).canceled},set returnValue(value){value||f(e(this))},initEvent(){}},Object.defineProperty(g.prototype,"constructor",{value:g,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.Event&&(Object.setPrototypeOf(g.prototype,window.Event.prototype),d.set(window.Event.prototype,g));let j=new WeakMap;function k(a){return null!==a&&"object"==typeof a}function l(a){let b=j.get(a);if(null==b)throw TypeError("'this' is expected an EventTarget object, but got another value.");return b}function m(a,b){Object.defineProperty(a,`on${b}`,{get(){let a=l(this).get(b);for(;null!=a;){if(3===a.listenerType)return a.listener;a=a.next}return null},set(a){"function"==typeof a||k(a)||(a=null);let c=l(this),d=null,e=c.get(b);for(;null!=e;)3===e.listenerType?null!==d?d.next=e.next:null!==e.next?c.set(b,e.next):c.delete(b):d=e,e=e.next;if(null!==a){let e={listener:a,listenerType:3,passive:!1,once:!1,next:null};null===d?c.set(b,e):d.next=e}},configurable:!0,enumerable:!0})}function n(a){function b(){o.call(this)}b.prototype=Object.create(o.prototype,{constructor:{value:b,configurable:!0,writable:!0}});for(let c=0;c<a.length;++c)m(b.prototype,a[c]);return b}function o(){if(this instanceof o)return void j.set(this,new Map);if(1==arguments.length&&Array.isArray(arguments[0]))return n(arguments[0]);if(arguments.length>0){let a=Array(arguments.length);for(let b=0;b<arguments.length;++b)a[b]=arguments[b];return n(a)}throw TypeError("Cannot call a class as a function")}o.prototype={addEventListener(a,b,c){if(null==b)return;if("function"!=typeof b&&!k(b))throw TypeError("'listener' should be a function or an object.");let d=l(this),e=k(c),f=(e?c.capture:c)?1:2,g={listener:b,listenerType:f,passive:e&&!!c.passive,once:e&&!!c.once,next:null},h=d.get(a);if(void 0===h)return void d.set(a,g);let i=null;for(;null!=h;){if(h.listener===b&&h.listenerType===f)return;i=h,h=h.next}i.next=g},removeEventListener(a,b,c){if(null==b)return;let d=l(this),e=(k(c)?c.capture:c)?1:2,f=null,g=d.get(a);for(;null!=g;){if(g.listener===b&&g.listenerType===e)return void(null!==f?f.next=g.next:null!==g.next?d.set(a,g.next):d.delete(a));f=g,g=g.next}},dispatchEvent(a){if(null==a||"string"!=typeof a.type)throw TypeError('"event.type" should be a string.');let b=l(this),c=a.type,f=b.get(c);if(null==f)return!0;let j=new(function a(b){if(null==b||b===Object.prototype)return g;let c=d.get(b);return null==c&&(c=function(a,b){let c=Object.keys(b);if(0===c.length)return a;function d(b,c){a.call(this,b,c)}d.prototype=Object.create(a.prototype,{constructor:{value:d,configurable:!0,writable:!0}});for(let f=0;f<c.length;++f){let g=c[f];if(!(g in a.prototype)){let a="function"==typeof Object.getOwnPropertyDescriptor(b,g).value;Object.defineProperty(d.prototype,g,a?function(a){return{value(){let b=e(this).event;return b[a].apply(b,arguments)},configurable:!0,enumerable:!0}}(g):h(g))}}return d}(a(Object.getPrototypeOf(b)),b),d.set(b,c)),c}(Object.getPrototypeOf(a)))(this,a),k=null;for(;null!=f;){if(f.once?null!==k?k.next=f.next:null!==f.next?b.set(c,f.next):b.delete(c):k=f,i(j,f.passive?f.listener:null),"function"==typeof f.listener)try{f.listener.call(this,j)}catch(a){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(a)}else 3!==f.listenerType&&"function"==typeof f.listener.handleEvent&&f.listener.handleEvent(j);if(e(j).immediateStopped)break;f=f.next}return i(j,null),e(j).eventPhase=0,e(j).currentTarget=null,!j.defaultPrevented}},Object.defineProperty(o.prototype,"constructor",{value:o,configurable:!0,writable:!0}),"undefined"!=typeof window&&void 0!==window.EventTarget&&Object.setPrototypeOf(o.prototype,window.EventTarget.prototype),b.defineEventAttribute=m,b.EventTarget=o,b.default=o,a.exports=o,a.exports.EventTarget=a.exports.default=o,a.exports.defineEventAttribute=m},47508:(a,b,c)=>{let d=c(27731).Ay,e=c(26502).default,f=c(23013),g=c(78802),h=c(56008),i={auth_key:!0,auth_timestamp:!0,auth_version:!0,auth_signature:!0,body_md5:!0};function j(a,b){let c=Date.now()/1e3|0,d={auth_key:a.key,auth_timestamp:c,auth_version:"1.0"};if(b.body&&(d.body_md5=g.getMD5(b.body)),b.params)for(let a in b.params){if(void 0!==i[a])throw Error(a+" is a required parameter and cannot be overidden");d[a]=b.params[a]}let e=b.method.toUpperCase(),f=g.toOrderedArray(d).join("&"),h=[e,b.path,f].join("\n");return f+("&auth_signature="+a.sign(h))}b.send=function(a,b){let c,g,i=b.method,k=a.prefixPath(b.path),l=b.body?JSON.stringify(b.body):void 0,m=`${a.getBaseURL()}${k}?${j(a.token,{method:i,path:k,params:b.params,body:l})}`,n={"x-pusher-library":"pusher-http-node "+h};if(l&&(n["content-type"]="application/json"),a.timeout){let b=new e;g=setTimeout(()=>b.abort(),a.timeout),c=b.signal}return d(m,{method:i,body:l,headers:n,signal:c,agent:a.agent}).then(a=>(clearTimeout(g),a.status>=400)?a.text().then(b=>{throw new f.RequestError("Unexpected status code "+a.status,m,void 0,a.status,b)}):a,a=>{throw clearTimeout(g),new f.RequestError("Request failed with an error",m,a)})},b.createSignedQueryString=j},48968:(a,b,c)=>{let d=c(87697),e=c(96285);function f(a){let b=!1;if(void 0!==(a=a||{}).useTLS&&void 0!==a.encrypted)throw Error("Cannot set both `useTLS` and `encrypted` configuration options");if(void 0!==a.useTLS?b=a.useTLS:void 0!==a.encrypted&&(console.warn("`encrypted` option is deprecated in favor of `useTLS`"),b=a.encrypted),this.scheme=a.scheme||(b?"https":"http"),this.port=a.port,this.appId=a.appId,this.token=new d(a.key,a.secret),this.timeout=a.timeout,this.agent=a.agent,void 0!==a.encryptionMasterKey){if(void 0!==a.encryptionMasterKeyBase64)throw Error("Do not specify both encryptionMasterKey and encryptionMasterKeyBase64. encryptionMasterKey is deprecated, please specify only encryptionMasterKeyBase64.");if(console.warn("`encryptionMasterKey` option is deprecated in favor of `encryptionMasterKeyBase64`"),"string"!=typeof a.encryptionMasterKey)throw Error("encryptionMasterKey must be a string");if(32!==a.encryptionMasterKey.length)throw Error("encryptionMasterKey must be 32 bytes long, but the string '"+a.encryptionMasterKey+"' is "+a.encryptionMasterKey.length+" bytes long");this.encryptionMasterKey=Buffer.from(a.encryptionMasterKey)}if(void 0!==a.encryptionMasterKeyBase64){if("string"!=typeof a.encryptionMasterKeyBase64)throw Error("encryptionMasterKeyBase64 must be a string");if(!e(a.encryptionMasterKeyBase64))throw Error("encryptionMasterKeyBase64 must be valid base64");let b=Buffer.from(a.encryptionMasterKeyBase64,"base64");if(32!==b.length)throw Error("encryptionMasterKeyBase64 must decode to 32 bytes, but the string "+a.encryptionMasterKeyBase64+"' decodes to "+b.length+" bytes");this.encryptionMasterKey=b}}f.prototype.prefixPath=function(){throw"NotImplementedError: #prefixPath should be implemented by subclasses"},f.prototype.getBaseURL=function(){let a=this.port?":"+this.port:"";return this.scheme+"://"+this.host+a},a.exports=f},50650:(a,b,c)=>{let d=c(48968);function e(a){d.call(this,a),a.host?this.host=a.host:a.cluster?this.host="api-"+a.cluster+".pusher.com":this.host="api.pusherapp.com"}Object.assign(e.prototype,d.prototype),e.prototype.prefixPath=function(a){return"/apps/"+this.appId+a},a.exports=e},56008:(a,b,c)=>{a.exports=c(93645).version},63443:(a,b,c)=>{let d=c(78802),e=c(16997),f=c(51720);function g(a,b,c){if(void 0===a.config.encryptionMasterKey)throw Error("Set encryptionMasterKey before triggering events on encrypted channels");let d=e.randomBytes(24),g=e.secretbox(f.decodeUTF8(JSON.stringify(c)),d,a.channelSharedSecret(b));return JSON.stringify({nonce:f.encodeBase64(d),ciphertext:f.encodeBase64(g)})}function h(a){return"string"==typeof a?a:JSON.stringify(a)}b.trigger=function(a,b,c,e,f){if(1===b.length&&d.isEncryptedChannel(b[0])){let d=b[0],h={name:c,data:g(a,d,e),channels:[d],...f};return a.post({path:"/events",body:h})}{for(let a=0;a<b.length;a++)if(d.isEncryptedChannel(b[a]))throw Error("You cannot trigger to multiple channels when using encrypted channels");let g={name:c,data:h(e),channels:b,...f};return a.post({path:"/events",body:g})}},b.triggerBatch=function(a,b){for(let c=0;c<b.length;c++)b[c].data=d.isEncryptedChannel(b[c].channel)?g(a,b[c].channel,b[c].data):h(b[c].data);return a.post({path:"/batch_events",body:{batch:b}})}},78802:(a,b,c)=>{let d=c(55511);b.toOrderedArray=function(a){return Object.keys(a).map(function(b){return[b,a[b]]}).sort(function(a,b){return a[0]<b[0]?-1:+(a[0]>b[0])}).map(function(a){return a[0]+"="+a[1]})},b.getMD5=function(a){return d.createHash("md5").update(a,"utf8").digest("hex")},b.secureCompare=function(a,b){if(a.length!==b.length)return!1;let c=0;for(let d in a)c|=a.charCodeAt(d)^b.charCodeAt(d);return 0===c},b.isEncryptedChannel=function(a){return a.startsWith("private-encrypted-")}},87697:(a,b,c)=>{let d=c(55511),e=c(78802);class f{constructor(a,b){this.key=a,this.secret=b}sign(a){return d.createHmac("sha256",this.secret).update(Buffer.from(a)).digest("hex")}verify(a,b){return e.secureCompare(this.sign(a),b)}}a.exports=f},93645:a=>{"use strict";a.exports={version:"5.2.0"}},96285:function(a,b){!function(c){"use strict";function d(a,b){if(a instanceof Boolean||"boolean"==typeof a||(b instanceof Object||(b={}),!1===b.allowEmpty&&""===a))return!1;var c="(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}==|[A-Za-z0-9+/]{3}=)?",d="(data:\\w+\\/[a-zA-Z\\+\\-\\.]+;base64,)";return!0===b.mimeRequired?c=d+c:!0===b.allowMime&&(c=d+"?"+c),!1===b.paddingRequired&&(c="(?:[A-Za-z0-9+\\/]{4})*(?:[A-Za-z0-9+\\/]{2}(==)?|[A-Za-z0-9+\\/]{3}=?)?"),RegExp("^"+c+"$","gi").test(a)}a.exports&&(b=a.exports=d),b.isBase64=d}(0)}};