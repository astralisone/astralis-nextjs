(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6451],{3998:(e,t,a)=>{"use strict";a.d(t,{$:()=>d});var s=a(95155),r=a(12115),l=a(32467),n=a(83101),i=a(64269);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all duration-150 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-astralis-blue text-white shadow-md hover:bg-[#245a92] hover:shadow-lg hover:scale-105 dark:bg-astralis-blue dark:hover:bg-[#245a92]",secondary:"border-2 border-astralis-blue text-astralis-blue hover:bg-astralis-blue hover:text-white shadow-sm hover:shadow-md dark:border-astralis-blue dark:text-astralis-blue dark:hover:bg-astralis-blue dark:hover:text-white",destructive:"bg-error text-white shadow-sm hover:bg-error/90 hover:shadow-md dark:bg-error dark:hover:bg-error/90",outline:"border-2 border-slate-300 bg-white text-slate-700 hover:bg-slate-100 hover:border-slate-400 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700 dark:hover:border-slate-500",ghost:"text-slate-700 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800",link:"text-astralis-blue underline-offset-4 hover:underline dark:text-astralis-blue"},size:{default:"px-6 py-3 text-base",sm:"px-4 py-2 text-sm",lg:"px-8 py-4 text-lg",icon:"p-3"}},defaultVariants:{variant:"primary",size:"default"}}),d=r.forwardRef((e,t)=>{let{className:a,variant:r,size:n,asChild:d=!1,...c}=e,u=d?l.DX:"button";return(0,s.jsx)(u,{className:(0,i.cn)(o({variant:r,size:n,className:a})),ref:t,...c})});d.displayName="Button"},11647:(e,t,a)=>{"use strict";a.d(t,{E:()=>n});var s=a(95155),r=a(64269);let l={default:"bg-slate-100 text-slate-700",primary:"bg-astralis-blue/10 text-astralis-blue",secondary:"bg-slate-200 text-slate-800",success:"bg-green-100 text-green-700",warning:"bg-orange-100 text-orange-700",error:"bg-red-100 text-red-700"};function n(e){let{children:t,className:a,variant:n="default",title:i}=e;return(0,s.jsx)("span",{className:(0,r.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",l[n],a),title:i,children:t})}},13406:(e,t,a)=>{"use strict";a.d(t,{Xi:()=>d,av:()=>c,j7:()=>o,tU:()=>i});var s=a(95155),r=a(12115),l=a(25667),n=a(64269);let i=l.bL,o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.B8,{ref:t,className:(0,n.cn)("flex w-full items-center justify-start gap-2 rounded-lg bg-slate-200 p-[10px] text-slate-600",a),...r})});o.displayName=l.B8.displayName;let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-white data-[state=active]:text-astralis-blue data-[state=active]:shadow-sm","hover:text-astralis-navy",a),...r})});d.displayName=l.l9.displayName;let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-4 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2",a),...r})});c.displayName=l.UC.displayName},15870:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},18332:(e,t,a)=>{"use strict";a.d(t,{Fc:()=>x,TN:()=>f,XL:()=>h});var s=a(95155),r=a(12115),l=a(83101),n=a(23327),i=a(61362),o=a(78874),d=a(6132),c=a(64269);let u=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-white border-slate-300 text-slate-900",success:"border-green-500/50 bg-green-50 text-green-900 [&>svg]:text-green-600",error:"border-red-500/50 bg-red-50 text-red-900 [&>svg]:text-red-600",warning:"border-yellow-500/50 bg-yellow-50 text-yellow-900 [&>svg]:text-yellow-600",info:"border-blue-500/50 bg-blue-50 text-blue-900 [&>svg]:text-astralis-blue"}},defaultVariants:{variant:"default"}}),m={default:n.A,success:i.A,error:o.A,warning:d.A,info:n.A},x=r.forwardRef((e,t)=>{let{className:a,variant:r="default",showIcon:l=!1,children:n,...i}=e,o=m[r||"default"];return(0,s.jsxs)("div",{ref:t,role:"alert",className:(0,c.cn)(u({variant:r}),a),...i,children:[l&&(0,s.jsx)(o,{className:"h-4 w-4"}),n]})});x.displayName="Alert";let h=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h5",{ref:t,className:(0,c.cn)("mb-1 font-semibold leading-none tracking-tight",a),...r})});h.displayName="AlertTitle";let f=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",a),...r})});f.displayName="AlertDescription"},20063:(e,t,a)=>{"use strict";var s=a(47260);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},20243:(e,t,a)=>{"use strict";a.d(t,{EA:()=>l});var s=a(95155),r=a(64269);function l(e){let{className:t,variant:a="rectangular",width:l,height:n,animation:i="pulse"}=e;return(0,s.jsx)("div",{className:(0,r.cn)("bg-slate-200",{text:"rounded h-4",circular:"rounded-full",rectangular:"rounded-md"}[a],{pulse:"animate-pulse",wave:"animate-shimmer bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 bg-[length:200%_100%]",none:""}[i],t),style:{width:"number"==typeof l?"".concat(l,"px"):l,height:"number"==typeof n?"".concat(n,"px"):n}})}},23327:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},24033:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},27937:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},31120:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...r})});n.displayName="Textarea"},35626:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},61362:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},64269:(e,t,a)=>{"use strict";a.d(t,{cn:()=>l});var s=a(2821),r=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.QP)((0,s.$)(t))}},65142:(e,t,a)=>{"use strict";a.d(t,{p:()=>n});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",a),ref:t,...n})});n.displayName="Input"},65229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},68946:(e,t,a)=>{"use strict";a.d(t,{B:()=>o});var s,r=a(12115),l=a(4129),n=(s||(s=a.t(r,2)))[" useId ".trim().toString()]||(()=>void 0),i=0;function o(e){let[t,a]=r.useState(n());return(0,l.N)(()=>{e||a(e=>e??String(i++))},[e]),e||(t?`radix-${t}`:"")}},70222:(e,t,a)=>{"use strict";a.d(t,{c:()=>r});var s=a(12115);function r(e){let t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...e)=>t.current?.(...e),[])}},71360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},76444:(e,t,a)=>{"use strict";a.d(t,{J:()=>i});var s=a(95155),r=a(12115),l=a(32894),n=a(64269);let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(l.b,{ref:t,className:(0,n.cn)("text-sm font-medium leading-none text-slate-700","peer-disabled:cursor-not-allowed peer-disabled:opacity-70",a),...r})});i.displayName=l.b.displayName},76842:(e,t,a)=>{"use strict";a.d(t,{C:()=>n});var s=a(12115),r=a(94446),l=a(4129),n=e=>{let{present:t,children:a}=e,n=function(e){var t,a;let[r,n]=s.useState(),o=s.useRef(null),d=s.useRef(e),c=s.useRef("none"),[u,m]=(t=e?"mounted":"unmounted",a={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>{let s=a[e][t];return null!=s?s:e},t));return s.useEffect(()=>{let e=i(o.current);c.current="mounted"===u?e:"none"},[u]),(0,l.N)(()=>{let t=o.current,a=d.current;if(a!==e){let s=c.current,r=i(t);e?m("MOUNT"):"none"===r||(null==t?void 0:t.display)==="none"?m("UNMOUNT"):a&&s!==r?m("ANIMATION_OUT"):m("UNMOUNT"),d.current=e}},[e,m]),(0,l.N)(()=>{if(r){var e;let t,a=null!=(e=r.ownerDocument.defaultView)?e:window,s=e=>{let s=i(o.current).includes(CSS.escape(e.animationName));if(e.target===r&&s&&(m("ANIMATION_END"),!d.current)){let e=r.style.animationFillMode;r.style.animationFillMode="forwards",t=a.setTimeout(()=>{"forwards"===r.style.animationFillMode&&(r.style.animationFillMode=e)})}},l=e=>{e.target===r&&(c.current=i(o.current))};return r.addEventListener("animationstart",l),r.addEventListener("animationcancel",s),r.addEventListener("animationend",s),()=>{a.clearTimeout(t),r.removeEventListener("animationstart",l),r.removeEventListener("animationcancel",s),r.removeEventListener("animationend",s)}}m("ANIMATION_END")},[r,m]),{isPresent:["mounted","unmountSuspended"].includes(u),ref:s.useCallback(e=>{o.current=e?getComputedStyle(e):null,n(e)},[])}}(t),o="function"==typeof a?a({present:n.isPresent}):s.Children.only(a),d=(0,r.s)(n.ref,function(e){var t,a;let s=null==(t=Object.getOwnPropertyDescriptor(e.props,"ref"))?void 0:t.get,r=s&&"isReactWarning"in s&&s.isReactWarning;return r?e.ref:(r=(s=null==(a=Object.getOwnPropertyDescriptor(e,"ref"))?void 0:a.get)&&"isReactWarning"in s&&s.isReactWarning)?e.props.ref:e.props.ref||e.ref}(o));return"function"==typeof a||n.isPresent?s.cloneElement(o,{ref:d}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}n.displayName="Presence"},78521:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>C});var s=a(95155),r=a(12115),l=a(20063),n=a(52619),i=a.n(n),o=a(3998),d=a(86948),c=a(65142),u=a(76444),m=a(31120),x=a(18332),h=a(20243),f=a(13406),p=a(11647),v=a(93499),g=a(24033),b=a(27937),y=a(15870),N=a(71360);function j(e){let{workflowJson:t,onChange:a,n8nWorkflowId:l}=e,[n,i]=(0,r.useState)(t),[h,f]=(0,r.useState)(new Set),[j,w]=(0,r.useState)(null);if((0,r.useEffect)(()=>{i(t),(null==t?void 0:t.nodes)&&f(new Set(t.nodes.map(e=>e.id)))},[t]),!n)return(0,s.jsx)(x.Fc,{children:(0,s.jsx)(x.TN,{children:"No workflow configuration available. Deploy from a template first."})});let k=e=>{let t=new Set(h);t.has(e)?t.delete(e):t.add(e),f(t)},A=(e,t,s)=>{if(!n)return;let r=n.nodes.map(a=>a.id===e?{...a,parameters:{...a.parameters,[t]:s}}:a),l={...n,nodes:r};i(l),a(l)};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-astralis-navy",children:"Workflow Configuration"}),(0,s.jsxs)("p",{className:"text-sm text-slate-600",children:[n.nodes.length," node",1!==n.nodes.length?"s":""," •",h.size," expanded"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.$,{variant:"outline",size:"sm",onClick:()=>{h.size===n.nodes.length?f(new Set):f(new Set(n.nodes.map(e=>e.id)))},children:h.size===n.nodes.length?"Collapse All":"Expand All"}),l&&(0,s.jsx)(o.$,{variant:"outline",size:"sm",asChild:!0,children:(0,s.jsxs)("a",{href:"http://localhost:5678/workflow/".concat(l),target:"_blank",rel:"noopener noreferrer",children:[(0,s.jsx)(v.A,{className:" ui-icon w-5 h-5 mr-2"}),"Edit in n8n"]})})]})]}),(0,s.jsx)("div",{className:"space-y-3",children:n.nodes.map((e,t)=>{var r,l;let x=h.has(e.id),f=(l=e.type).includes("webhook")?"bg-purple-100 text-purple-700":l.includes("gmail")||l.includes("email")?"bg-blue-100 text-blue-700":l.includes("slack")?"bg-pink-100 text-pink-700":l.includes("http")?"bg-green-100 text-green-700":l.includes("code")?"bg-orange-100 text-orange-700":"bg-slate-100 text-slate-700";return(0,s.jsxs)(d.Zp,{variant:"bordered",children:[(0,s.jsx)(d.aR,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 flex-1",children:[(0,s.jsx)("button",{onClick:()=>k(e.id),className:"p-1 hover:bg-slate-100 rounded transition-colors",children:x?(0,s.jsx)(g.A,{className:" ui-icon w-5 h-5 text-slate-600"}):(0,s.jsx)(b.A,{className:" ui-icon w-5 h-5 text-slate-600"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-1",children:[(0,s.jsxs)("span",{className:"text-sm font-medium text-slate-500",children:["#",t+1]}),(0,s.jsx)("h4",{className:"text-base font-semibold text-astralis-navy",children:e.name}),(0,s.jsx)(p.E,{variant:"secondary",className:f,children:e.type.split(".").pop()})]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>k(e.id),children:(0,s.jsx)(y.A,{className:" ui-icon w-5 h-5"})}),(0,s.jsx)(o.$,{variant:"ghost",size:"icon",onClick:()=>(e=>{if(!n||!confirm("Are you sure you want to delete this node?"))return;let t=n.nodes.filter(t=>t.id!==e),s={...n.connections};delete s[e],Object.keys(s).forEach(t=>{var a;(null==(a=s[t])?void 0:a.main)&&(s[t].main=s[t].main.map(t=>t.filter(t=>t.node!==e)))});let r={...n,nodes:t,connections:s};i(r),a(r)})(e.id),children:(0,s.jsx)(N.A,{className:" ui-icon w-5 h-5 text-error"})})]})]})}),x&&(0,s.jsxs)(d.Wu,{className:"pt-0 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4 pb-3 border-b border-slate-200",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(u.J,{className:"text-xs text-slate-600",children:"Node ID"}),(0,s.jsx)("p",{className:"text-sm font-mono text-slate-900",children:e.id})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(u.J,{className:"text-xs text-slate-600",children:"Type"}),(0,s.jsx)("p",{className:"text-sm font-mono text-slate-900",children:e.type})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"node-name-".concat(e.id),children:"Node Name"}),(0,s.jsx)(c.p,{id:"node-name-".concat(e.id),value:e.name,onChange:t=>{let s=n.nodes.map(a=>a.id===e.id?{...a,name:t.target.value}:a),r={...n,nodes:s};i(r),a(r)}})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(u.J,{className:"text-sm font-semibold",children:"Parameters"}),0===Object.keys(e.parameters).length?(0,s.jsx)("p",{className:"text-sm text-slate-500 italic",children:"No parameters configured"}):(0,s.jsx)("div",{className:"space-y-3 bg-slate-50 p-4 rounded-lg",children:Object.entries(e.parameters).map(t=>{let[a,r]=t;return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"param-".concat(e.id,"-").concat(a),className:"text-xs font-medium text-slate-700",children:a}),((e,t,a)=>{(null==j?void 0:j.nodeId)===e.id&&(null==j||j.key);let r="boolean"==typeof a?"checkbox":"text";return"object"==typeof a&&null!==a?(0,s.jsx)(m.T,{value:JSON.stringify(a,null,2),onChange:a=>{try{let s=JSON.parse(a.target.value);A(e.id,t,s)}catch(e){}},className:"font-mono text-xs",rows:5}):"boolean"==typeof a?(0,s.jsx)("input",{type:"checkbox",checked:a,onChange:a=>A(e.id,t,a.target.checked),className:" ui-icon w-5 h-5 text-astralis-blue border-slate-300 rounded focus:ring-astralis-blue"}):"string"==typeof a&&a.length>100?(0,s.jsx)(m.T,{value:a,onChange:a=>A(e.id,t,a.target.value),rows:3}):(0,s.jsx)(c.p,{type:r,value:(null==a?void 0:a.toString())||"",onChange:a=>A(e.id,t,a.target.value)})})(e,a,r)]},a)})})]}),n.connections[e.id]&&(0,s.jsxs)("div",{className:"pt-3 border-t border-slate-200",children:[(0,s.jsx)(u.J,{className:"text-xs text-slate-600",children:"Connections"}),(0,s.jsx)("div",{className:"mt-2 space-y-1",children:null==(r=n.connections[e.id].main)?void 0:r.map((e,t)=>e.map((e,a)=>(0,s.jsxs)("p",{className:"text-sm text-slate-600",children:["→ ",e.node," (output ",t,")"]},"".concat(t,"-").concat(a))))})]})]})]},e.id)})}),(0,s.jsx)(x.Fc,{children:(0,s.jsx)(x.TN,{className:"text-sm",children:"Changes are saved automatically. For advanced workflow editing, use the n8n visual editor."})})]})}var w=a(35626);let k=(0,a(71847).A)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);var A=a(65229);function C(){var e,t;let a=(0,l.useParams)(),n=(0,l.useRouter)(),p=a.id,[v,g]=(0,r.useState)(null),[b,y]=(0,r.useState)(!0),[N,C]=(0,r.useState)(!1),[S,T]=(0,r.useState)(null),[E,R]=(0,r.useState)(""),[M,I]=(0,r.useState)(""),[O,F]=(0,r.useState)(""),[_,z]=(0,r.useState)(!0),[P,W]=(0,r.useState)(null);(0,r.useEffect)(()=>{p&&"new"!==p&&D()},[p]);let D=async()=>{try{var e,t,a;y(!0);let s=await fetch("/api/automations/".concat(p));if(!s.ok)throw Error("Failed to fetch automation");let r=await s.json(),l=r.data||r;g(l),R(l.name||""),I(l.description||""),F((null==(e=l.tags)?void 0:e.join(", "))||""),z(null==(a=l.isActive)||a),(null==(t=l.metadata)?void 0:t.workflowJson)?W(l.metadata.workflowJson):l.n8nWorkflowId&&J(l.n8nWorkflowId)}catch(e){T(e instanceof Error?e.message:"Failed to load automation")}finally{y(!1)}},J=async e=>{try{let e=await fetch("/api/automations/".concat(p,"/workflow"));if(e.ok){let t=await e.json();W(t.workflow)}}catch(e){console.error("Failed to fetch workflow from n8n:",e)}},U=async()=>{try{C(!0),T(null);let e={name:E,description:M||null,tags:O?O.split(",").map(e=>e.trim()).filter(Boolean):[],isActive:_};P&&(e.metadata={...(null==v?void 0:v.metadata)||{},workflowJson:P});let t=await fetch("/api/automations/".concat(p),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){let e=await t.json();throw Error(e.details||"Failed to update automation")}n.push("/automations/".concat(p))}catch(e){T(e instanceof Error?e.message:"Failed to save automation")}finally{C(!1)}};return b?(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,s.jsx)(h.EA,{className:"h-10 w-64"}),(0,s.jsx)(h.EA,{className:"h-96"})]})}):S&&!v?(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto",children:[(0,s.jsxs)(x.Fc,{variant:"error",showIcon:!0,children:[(0,s.jsx)(x.XL,{children:"Error"}),(0,s.jsx)(x.TN,{children:S})]}),(0,s.jsx)(o.$,{variant:"outline",className:"mt-4",asChild:!0,children:(0,s.jsxs)(i(),{href:"/automations/".concat(p),children:[(0,s.jsx)(w.A,{className:" ui-icon w-5 h-5 mr-2"}),"Back to Automation"]})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-slate-50 p-6",children:(0,s.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,s.jsx)("div",{className:"flex items-center justify-between",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(o.$,{variant:"ghost",size:"icon",asChild:!0,children:(0,s.jsx)(i(),{href:"/automations/".concat(p),children:(0,s.jsx)(w.A,{className:"w-5 h-5"})})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-astralis-navy",children:"Edit Automation"}),(0,s.jsx)("p",{className:"text-slate-600 mt-1",children:"Update automation settings and configuration"})]})]})}),S&&(0,s.jsxs)(x.Fc,{variant:"error",showIcon:!0,children:[(0,s.jsx)(x.XL,{children:"Error"}),(0,s.jsx)(x.TN,{children:S})]}),(0,s.jsxs)(f.tU,{defaultValue:"details",className:"space-y-6",children:[(0,s.jsxs)(f.j7,{children:[(0,s.jsx)(f.Xi,{value:"details",children:"Details"}),(0,s.jsx)(f.Xi,{value:"workflow",children:"Workflow"})]}),(0,s.jsx)(f.av,{value:"details",children:(0,s.jsxs)(d.Zp,{children:[(0,s.jsx)(d.aR,{children:(0,s.jsx)(d.ZB,{children:"Automation Details"})}),(0,s.jsxs)(d.Wu,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"name",children:"Name *"}),(0,s.jsx)(c.p,{id:"name",value:E,onChange:e=>R(e.target.value),placeholder:"e.g., Lead Notification Workflow",required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"description",children:"Description"}),(0,s.jsx)(m.T,{id:"description",value:M,onChange:e=>I(e.target.value),placeholder:"Describe what this automation does...",rows:4})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(u.J,{htmlFor:"tags",children:"Tags"}),(0,s.jsx)(c.p,{id:"tags",value:O,onChange:e=>F(e.target.value),placeholder:"e.g., sales, email, notification (comma-separated)"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Separate tags with commas"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("input",{type:"checkbox",id:"isActive",checked:_,onChange:e=>z(e.target.checked),className:" ui-icon w-5 h-5 text-astralis-blue border-slate-300 rounded focus:ring-astralis-blue"}),(0,s.jsx)(u.J,{htmlFor:"isActive",className:"cursor-pointer",children:"Automation is active"})]}),v&&(0,s.jsxs)("div",{className:"pt-4 border-t border-slate-200 space-y-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"Trigger Type"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 capitalize mt-1",children:null==(e=v.triggerType)?void 0:e.toLowerCase()})]}),v.n8nWorkflowId&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm font-medium text-slate-900",children:"n8n Workflow ID"}),(0,s.jsx)("p",{className:"text-sm text-slate-600 font-mono mt-1",children:v.n8nWorkflowId}),(0,s.jsx)("a",{href:"http://localhost:5678/workflow/".concat(v.n8nWorkflowId),target:"_blank",rel:"noopener noreferrer",className:"text-xs text-astralis-blue hover:underline",children:"Edit in n8n →"})]})]})]})]})}),(0,s.jsx)(f.av,{value:"workflow",children:(0,s.jsx)(j,{workflowJson:P,onChange:W,n8nWorkflowId:null!=(t=null==v?void 0:v.n8nWorkflowId)?t:void 0})})]}),(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsxs)(o.$,{variant:"primary",size:"sm",className:"gap-1.5 text-sm",onClick:U,disabled:N||!E,children:[(0,s.jsx)(k,{className:"h-4 w-4"}),N?"Saving...":"Save Changes"]}),(0,s.jsx)(o.$,{variant:"outline",size:"sm",className:"gap-1.5 text-sm",asChild:!0,children:(0,s.jsxs)(i(),{href:"/automations/".concat(p),children:[(0,s.jsx)(A.A,{className:"h-4 w-4"}),"Cancel"]})})]})]})})}},78874:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},86215:(e,t,a)=>{Promise.resolve().then(a.bind(a,78521))},86948:(e,t,a)=>{"use strict";a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>u});var s=a(95155),r=a(12115),l=a(64269);let n=r.forwardRef((e,t)=>{let{className:a,variant:r="default",hover:n=!1,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg bg-white transition-all duration-200 dark:bg-slate-800 dark:border-slate-700",{default:"border border-slate-200 shadow-[0_2px_8px_rgba(0,0,0,0.06)]",bordered:"border-2 border-slate-300",elevated:"shadow-[0_8px_24px_rgba(0,0,0,0.12)]"}[r],n&&"hover:shadow-[0_8px_24px_rgba(0,0,0,0.12)] hover:border-slate-300",a),...i})});n.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...r})});o.displayName="CardTitle";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",a),...r})});d.displayName="CardDescription";let c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...r})});c.displayName="CardContent";let u=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...r})});u.displayName="CardFooter"},93499:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(71847).A)("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]])}},e=>{e.O(0,[4909,2619,756,5159,4628,8296,3432,207,1101,9336,4007,6011,9248,9084,7358],()=>e(e.s=86215)),_N_E=e.O()}]);