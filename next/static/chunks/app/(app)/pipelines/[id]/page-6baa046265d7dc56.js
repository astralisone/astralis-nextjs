(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{3826:(e,s,t)=>{"use strict";t.d(s,{bq:()=>x,eb:()=>g,gC:()=>p,l6:()=>d,yv:()=>m});var a=t(89407),l=t(73335),i=t(10215),r=t(79420),n=t(221),c=t(18814),o=t(45741);let d=i.bL;i.YJ;let m=i.WT,x=l.forwardRef((e,s)=>{let{className:t,children:l,...n}=e;return(0,a.jsxs)(i.l9,{ref:s,className:(0,o.cn)("flex h-10 w-full items-center justify-between rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","transition-all duration-150 ease-out","focus:outline-none focus:ring-2 focus:ring-astralis-blue focus:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","[&>span]:line-clamp-1",t),...n,children:[l,(0,a.jsx)(i.In,{asChild:!0,children:(0,a.jsx)(r.A,{className:"h-4 w-4 opacity-50"})})]})});x.displayName=i.l9.displayName;let u=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.PP,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(n.A,{className:"h-4 w-4"})})});u.displayName=i.PP.displayName;let h=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.wn,{ref:s,className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...l,children:(0,a.jsx)(r.A,{className:"h-4 w-4"})})});h.displayName=i.wn.displayName;let p=l.forwardRef((e,s)=>{let{className:t,children:l,position:r="popper",...n}=e;return(0,a.jsx)(i.ZL,{children:(0,a.jsxs)(i.UC,{ref:s,className:(0,o.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-slate-300 bg-white text-slate-900 shadow-[0_4px_12px_rgba(0,0,0,0.1)]","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===r&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:r,...n,children:[(0,a.jsx)(u,{}),(0,a.jsx)(i.LM,{className:(0,o.cn)("p-1","popper"===r&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:l}),(0,a.jsx)(h,{})]})})});p.displayName=i.UC.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.JU,{ref:s,className:(0,o.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold text-slate-900",t),...l})}).displayName=i.JU.displayName;let g=l.forwardRef((e,s)=>{let{className:t,children:l,...r}=e;return(0,a.jsxs)(i.q7,{ref:s,className:(0,o.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none","transition-colors duration-150 ease-out","focus:bg-astralis-blue/10 focus:text-astralis-blue","data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...r,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(i.VF,{children:(0,a.jsx)(c.A,{className:"h-4 w-4 text-astralis-blue"})})}),(0,a.jsx)(i.p4,{children:l})]})});g.displayName=i.q7.displayName,l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.wv,{ref:s,className:(0,o.cn)("-mx-1 my-1 h-px bg-slate-300",t),...l})}).displayName=i.wv.displayName},35845:(e,s,t)=>{"use strict";t.d(s,{CT:()=>r,Md:()=>a,Vl:()=>i,lR:()=>l});var a=function(e){return e.FORM="FORM",e.EMAIL="EMAIL",e.CHAT="CHAT",e.API="API",e}({}),l=function(e){return e.NEW="NEW",e.ROUTING="ROUTING",e.ASSIGNED="ASSIGNED",e.PROCESSING="PROCESSING",e.COMPLETED="COMPLETED",e.REJECTED="REJECTED",e}({}),i=function(e){return e[e.NONE=0]="NONE",e[e.LOW=1]="LOW",e[e.MEDIUM=2]="MEDIUM",e[e.HIGH=3]="HIGH",e[e.URGENT=4]="URGENT",e}({}),r=function(e){return e.NOT_STARTED="NOT_STARTED",e.IN_PROGRESS="IN_PROGRESS",e.BLOCKED="BLOCKED",e.COMPLETED="COMPLETED",e.CLOSED="CLOSED",e}({})},42946:(e,s,t)=>{"use strict";t.d(s,{g5:()=>c,tA:()=>o});var a=t(95e3),l=t(72437),i=t(96587),r=t(36700);t(35845);let n={all:["intake"],lists:()=>[...n.all,"list"],list:(e,s)=>[...n.lists(),e,s],details:()=>[...n.all,"detail"],detail:e=>[...n.details(),e],byPipeline:e=>[...n.all,"pipeline",e],unclassified:e=>[...n.all,"unclassified",e]};function c(){var e;let{data:s}=(0,r.useSession)(),t=null==s||null==(e=s.user)?void 0:e.orgId;return(0,a.I)({queryKey:n.unclassified(t||""),queryFn:async()=>{if(!t)throw Error("No organization ID");let e=await fetch("/api/intake?orgId=".concat(t,"&status=NEW"));if(!e.ok)throw Error("Failed to fetch new intake requests");let s=await e.json(),a=await fetch("/api/intake?orgId=".concat(t,"&status=ROUTING"));if(!a.ok)throw Error("Failed to fetch routing intake requests");let l=await a.json(),i=[...s.intakeRequests,...l.intakeRequests].sort((e,s)=>s.priority!==e.priority?s.priority-e.priority:new Date(s.createdAt).getTime()-new Date(e.createdAt).getTime());return{intakeRequests:i,counts:{new:s.intakeRequests.length,routing:l.intakeRequests.length,total:i.length}}},enabled:!!t,staleTime:1e4,refetchInterval:3e4})}function o(){var e;let s=(0,l.jE)(),{data:t}=(0,r.useSession)(),a=null==t||null==(e=t.user)?void 0:e.orgId;return(0,i.n)({mutationFn:async e=>{let{intakeId:s,pipelineId:t,stageId:a}=e,l=await fetch("/api/intake/".concat(s,"/assign"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({pipelineId:t,stageId:a})});if(!l.ok)throw Error((await l.json()).error||"Failed to assign intake request");return l.json()},onSuccess:(e,t)=>{a&&s.invalidateQueries({queryKey:n.unclassified(a)}),s.invalidateQueries({queryKey:n.all}),s.invalidateQueries({queryKey:["pipeline",t.pipelineId]}),s.invalidateQueries({queryKey:["pipelines"]})}})}},52965:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>en});var a=t(89407),l=t(73335),i=t(34728),r=t(66279),n=t(42946),c=t(15936),o=t(17542),d=t(2141),m=t(17223),x=t(11165),u=t(9327),h=t(82868),p=t(18814),g=t(97662),f=t(8353),N=t(92405),j=t(67464),b=t(30312),v=t(9924),y=t(71615),w=t(3826),E=t(45741),C=t(35845),A=t(18458),T=t(74138),S=t(50488);let O={[C.Vl.NONE]:{label:"None",className:"bg-slate-100 text-slate-600 border-slate-200"},[C.Vl.LOW]:{label:"Low",className:"bg-blue-50 text-blue-700 border-blue-200"},[C.Vl.MEDIUM]:{label:"Medium",className:"bg-yellow-50 text-yellow-700 border-yellow-200"},[C.Vl.HIGH]:{label:"High",className:"bg-orange-50 text-orange-700 border-orange-200"},[C.Vl.URGENT]:{label:"Urgent",className:"bg-red-50 text-red-700 border-red-200"}},R={FORM:{icon:o.A,className:"text-purple-600"},EMAIL:{icon:d.A,className:"text-blue-600"},CHAT:{icon:m.A,className:"text-green-600"},API:{icon:x.A,className:"text-orange-600"}};function D(e){let{item:s,isDragging:t=!1,onClick:i,fullCardDrag:r=!1,pipelineId:n,onStatusChange:o,teamMembers:d,onAssigneeChange:m}=e,[x,D]=(0,l.useState)(null),[k,I]=(0,l.useState)(!1),{attributes:M,listeners:P,setNodeRef:L,transform:U}=(0,c.PM)({id:s.id}),F=U?{transform:"translate3d(".concat(U.x,"px, ").concat(U.y,"px, 0)")}:void 0,V=!!s.dueDate&&(0,A.R)((0,T.H)(s.dueDate)),G=O[s.priority]||O[C.Vl.NONE],_=s.progress||0,q=s.tags||[],H=r?{...P,...M}:{},J=r?{}:{...P,...M},W=async e=>{if(e.stopPropagation(),n&&!x){D("close");try{let e=await fetch("/api/pipelines/".concat(n,"/items/").concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:C.CT.CLOSED})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to close item")}null==o||o(s.id,C.CT.CLOSED)}catch(e){console.error("Error closing item:",e)}finally{D(null)}}},z=async e=>{if(e.stopPropagation(),n&&!x){D("complete");try{let e=await fetch("/api/pipelines/".concat(n,"/items/").concat(s.id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:C.CT.COMPLETED})});if(!e.ok){let s=await e.json();throw Error(s.error||"Failed to complete item")}null==o||o(s.id,C.CT.COMPLETED)}catch(e){console.error("Error completing item:",e)}finally{D(null)}}},$=async e=>{if(m){I(!0);try{await m(s.id,"unassigned"===e?null:e)}finally{I(!1)}}},K=n&&s.status!==C.CT.CLOSED&&s.status!==C.CT.COMPLETED;return(0,a.jsx)("div",{ref:L,style:F,...H,className:(0,E.cn)("UnifiedKanbanCard transition-all duration-200",r&&"cursor-grab active:cursor-grabbing touch-none",t&&"opacity-50 scale-95"),children:(0,a.jsx)(v.Zp,{variant:"default",hover:!0,className:(0,E.cn)("cursor-pointer border-2 transition-colors",V&&"border-red-300 bg-red-50/30",t&&"border-purple-500 bg-purple-50 shadow-lg shadow-purple-200"),onClick:i,children:(0,a.jsx)(v.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[!r&&(0,a.jsx)("button",{...J,className:"mt-1 text-slate-400 hover:text-slate-600 cursor-grab active:cursor-grabbing touch-none","aria-label":"Drag to move",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(u.A,{className:"w-5 h-5"})}),r&&(0,a.jsx)("div",{className:"mt-1 text-slate-400",children:(0,a.jsx)(u.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-start gap-2 flex-1 min-w-0",children:[(()=>{let e="source"in s&&s.source?s.source:s.data&&"object"==typeof s.data&&"source"in s.data?s.data.source:null;if(e&&R[e]){let s=R[e].icon;return(0,a.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:(0,a.jsx)(s,{className:"w-4 h-4 ".concat(R[e].className)})})}return null})(),(0,a.jsx)("h4",{className:"font-medium text-sm text-astralis-navy line-clamp-2",children:s.title})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1 flex-shrink-0",children:[K&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("button",{onClick:z,disabled:null!==x,className:(0,E.cn)("p-1 rounded transition-colors","hover:bg-green-100 text-slate-400 hover:text-green-600","complete"===x&&"bg-green-100 text-green-600"),"aria-label":"Mark as completed",title:"Mark as completed",children:"complete"===x?(0,a.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(p.A,{className:"w-4 h-4"})}),(0,a.jsx)("button",{onClick:W,disabled:null!==x,className:(0,E.cn)("p-1 rounded transition-colors","hover:bg-red-100 text-slate-400 hover:text-red-600","close"===x&&"bg-red-100 text-red-600"),"aria-label":"Close item",title:"Close item (hide from board)",children:"close"===x?(0,a.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(g.A,{className:"w-4 h-4"})})]}),s.priority>C.Vl.NONE&&(0,a.jsx)(y.E,{variant:"default",className:(0,E.cn)("text-xs font-medium",G.className),children:G.label})]})]}),s.description&&(0,a.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2",children:s.description}),_>0&&(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between text-xs",children:[(0,a.jsx)("span",{className:"text-slate-600",children:"Progress"}),(0,a.jsxs)("span",{className:"text-slate-900 font-medium",children:[_,"%"]})]}),(0,a.jsx)("div",{className:"w-full h-1.5 bg-slate-200 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full bg-astralis-blue rounded-full transition-all duration-300",style:{width:"".concat(_,"%")}})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 text-xs text-slate-500",children:[d&&d.length>0&&m?(0,a.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,a.jsxs)(w.l6,{value:s.assignedToId||"unassigned",onValueChange:$,disabled:k,children:[(0,a.jsx)(w.bq,{className:"h-7 w-[140px] text-xs bg-white border-slate-200",children:(0,a.jsx)(w.yv,{children:k?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-3 h-3 animate-spin"}),(0,a.jsx)("span",{children:"Assigning..."})]}):s.assignedTo?(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{className:"truncate",children:s.assignedTo.name})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1 text-slate-400",children:[(0,a.jsx)(f.A,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Unassigned"})]})})}),(0,a.jsxs)(w.gC,{children:[(0,a.jsx)(w.eb,{value:"unassigned",children:(0,a.jsx)("span",{className:"text-slate-400",children:"Unassigned"})}),d.map(e=>(0,a.jsx)(w.eb,{value:e.id,children:e.name||e.email},e.id))]})]})}):s.assignedTo?(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[s.assignedTo.avatar?(0,a.jsx)("img",{src:s.assignedTo.avatar,alt:s.assignedTo.name,className:"w-6 h-6 rounded-full"}):(0,a.jsx)("div",{className:"w-6 h-6 rounded-full bg-astralis-blue/10 flex items-center justify-center",children:(0,a.jsx)(f.A,{className:"w-4 h-4 text-astralis-blue"})}),(0,a.jsx)("span",{className:"truncate max-w-[100px]",children:s.assignedTo.name})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-slate-400",children:[(0,a.jsx)(f.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Unassigned"})]}),s.dueDate&&(0,a.jsxs)("div",{className:(0,E.cn)("flex items-center gap-1.5",V&&"text-red-600 font-medium"),children:[V&&(0,a.jsx)(N.A,{className:"w-4 h-4"}),(0,a.jsx)(j.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(0,S.m)((0,T.H)(s.dueDate),{addSuffix:!0})})]}),!s.dueDate&&s.createdAt&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-slate-400 ml-auto",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:(0,S.m)((0,T.H)(s.createdAt),{addSuffix:!0})})]})]}),q.length>0&&(0,a.jsxs)("div",{className:"flex flex-wrap gap-1",children:[q.slice(0,3).map(e=>(0,a.jsx)("span",{className:"text-xs px-2 py-0.5 bg-slate-100 text-slate-600 rounded",children:e},e)),q.length>3&&(0,a.jsxs)("span",{className:"text-xs px-2 py-0.5 bg-slate-100 text-slate-500 rounded",children:["+",q.length-3]})]})]})]})})})})}var k=t(33670),I=t(74874),M=t(70558),P=t(2550),L=t(34876),U=t(3e4);let F=[{value:C.Vl.NONE,label:"None",color:"text-slate-600"},{value:C.Vl.LOW,label:"Low",color:"text-blue-600"},{value:C.Vl.MEDIUM,label:"Medium",color:"text-yellow-600"},{value:C.Vl.HIGH,label:"High",color:"text-orange-600"},{value:C.Vl.URGENT,label:"Urgent",color:"text-red-600"}],V=[{value:C.CT.NOT_STARTED,label:"Not Started"},{value:C.CT.IN_PROGRESS,label:"In Progress"},{value:C.CT.BLOCKED,label:"Blocked"},{value:C.CT.COMPLETED,label:"Completed"}];function G(e){let{pipelineId:s,stageId:t,stageName:i,onItemCreated:r,trigger:n}=e,[c,o]=(0,l.useState)(!1),[d,m]=(0,l.useState)(!1),[x,u]=(0,l.useState)({title:"",description:"",priority:C.Vl.NONE,status:C.CT.NOT_STARTED,dueDate:"",tags:""}),h=()=>{o(!1),u({title:"",description:"",priority:C.Vl.NONE,status:C.CT.NOT_STARTED,dueDate:"",tags:""})},p=async e=>{e.preventDefault(),m(!0);try{let e=x.tags.split(",").map(e=>e.trim()).filter(e=>e.length>0),a=await fetch("/api/pipelines/".concat(s,"/items"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:x.title,description:x.description||void 0,priority:x.priority,status:x.status,dueDate:x.dueDate||null,tags:e,stageId:t})});if(!a.ok){let e=await a.json();throw Error(e.error||"Failed to create item")}null==r||r(),h()}catch(e){console.error("Error creating item:",e),alert(e instanceof Error?e.message:"Failed to create item")}finally{m(!1)}};return(0,a.jsxs)(I.lG,{open:c,onOpenChange:o,children:[(0,a.jsx)(I.zM,{asChild:!0,children:n||(0,a.jsxs)(M.$,{variant:"outline",size:"sm",className:"w-full gap-1.5 text-sm",children:[(0,a.jsx)(k.A,{className:"w-4 h-4"}),"Add Item"]})}),(0,a.jsx)(I.Cf,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsxs)(I.c7,{children:[(0,a.jsx)(I.L3,{children:"New Item"}),(0,a.jsxs)(I.rr,{children:["Add a new item to ",(0,a.jsx)("span",{className:"font-medium",children:i})]})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(L.J,{htmlFor:"title",children:["Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(P.p,{id:"title",value:x.title,onChange:e=>u({...x,title:e.target.value}),placeholder:"Enter item title...",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(U.T,{id:"description",value:x.description,onChange:e=>u({...x,description:e.target.value}),placeholder:"Describe this item...",rows:4})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"priority",children:"Priority"}),(0,a.jsx)("select",{id:"priority",value:x.priority,onChange:e=>u({...x,priority:Number(e.target.value)}),className:"w-full px-3 py-2 border border-slate-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-astralis-blue focus:border-transparent",children:F.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"status",children:"Status"}),(0,a.jsx)("select",{id:"status",value:x.status,onChange:e=>u({...x,status:e.target.value}),className:"w-full px-3 py-2 border border-slate-200 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-astralis-blue focus:border-transparent",children:V.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"dueDate",children:"Due Date"}),(0,a.jsx)(P.p,{id:"dueDate",type:"date",value:x.dueDate,onChange:e=>u({...x,dueDate:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"tags",children:"Tags"}),(0,a.jsx)(P.p,{id:"tags",value:x.tags,onChange:e=>u({...x,tags:e.target.value}),placeholder:"e.g., bug, feature, urgent (comma-separated)"}),(0,a.jsx)("p",{className:"text-xs text-slate-500",children:"Separate multiple tags with commas"})]})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(M.$,{type:"button",variant:"outline",onClick:h,disabled:d,children:"Cancel"}),(0,a.jsx)(M.$,{type:"submit",disabled:d,children:d?"Creating...":"Create Item"})]})]})})]})}function _(e){let{stage:s,items:t,pipelineId:l,onItemCreated:i,onStatusChange:r,teamMembers:n,onAssigneeChange:o}=e,{setNodeRef:d,isOver:m}=(0,c.zM)({id:s.id}),x=t.filter(e=>e.status!==C.CT.CLOSED&&e.status!==C.CT.COMPLETED);return(0,a.jsx)("div",{className:"flex-shrink-0 w-80 h-full max-h-full flex flex-col overflow-hidden",children:(0,a.jsxs)("div",{className:"bg-slate-100 rounded-lg p-4 flex flex-col h-full",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-4 py-2 px-3 -mx-4 -mt-4 rounded-t-lg bg-slate-200/70 flex-shrink-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[s.color&&(0,a.jsx)("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),(0,a.jsx)("h3",{className:"font-semibold text-sm text-astralis-navy",children:s.name})]}),(0,a.jsx)("span",{className:"text-xs text-slate-500 bg-white px-2 py-0.5 rounded font-medium",children:x.length})]}),(0,a.jsxs)("div",{ref:d,className:(0,E.cn)("space-y-3 flex-1 overflow-y-auto min-h-[200px] transition-colors",m&&"bg-astralis-blue/10 rounded-lg p-2"),children:[x.map(e=>(0,a.jsx)(D,{item:e,pipelineId:l,onStatusChange:r,teamMembers:n,onAssigneeChange:o,fullCardDrag:!0},e.id)),0===x.length&&(0,a.jsx)("div",{className:"text-center py-12 text-slate-400 text-sm",children:"Drop items here"})]}),(0,a.jsx)("div",{className:"mt-3 flex-shrink-0",children:(0,a.jsx)(G,{pipelineId:l,stageId:s.id,stageName:s.name,onItemCreated:i})})]})})}function q(e){let{pipeline:s,onRefetch:t}=e,[i,n]=(0,l.useState)(null),o=(0,r.Cs)(),d=(0,c.FR)((0,c.MS)(c.AN,{activationConstraint:{distance:8}})),m=()=>{null==t||t()},x=()=>{null==t||t()};return(0,a.jsxs)(c.Mp,{sensors:d,collisionDetection:c.fp,onDragStart:e=>{let{active:t}=e,a=s.stages.flatMap(e=>e.items).find(e=>e.id===t.id);a&&n(a)},onDragEnd:e=>{let{active:t,over:a}=e;if(!a)return void n(null);let l=t.id,i=a.id,r=s.stages.find(e=>e.items.some(e=>e.id===l));if(!r||r.id===i)return void n(null);o.mutate({itemId:l,pipelineId:s.id,targetStageId:i}),n(null)},children:[(0,a.jsx)("div",{className:"flex gap-6 h-full overflow-x-auto pb-6 items-stretch",children:s.stages.map(e=>(0,a.jsx)(_,{stage:e,items:e.items,pipelineId:s.id,onItemCreated:m,onStatusChange:x},e.id))}),(0,a.jsx)(c.Hd,{children:i?(0,a.jsx)("div",{className:"rotate-2 scale-105",children:(0,a.jsx)(D,{item:{id:i.id,title:i.title,description:i.description,priority:i.priority,tags:i.tags,stageId:i.stageId},isDragging:!0,fullCardDrag:!0})}):null})]})}var H=t(83697),J=t(14991);let W=["#64748b","#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6"];function z(e){let{pipelineId:s,stages:t,onStagesChange:i}=e,[r,n]=(0,l.useState)(!1),[c,o]=(0,l.useState)(null),[d,m]=(0,l.useState)(!1),[x,h]=(0,l.useState)({name:"",description:"",color:W[0]}),p=e=>{e?(o(e),h({name:e.name,description:e.description||"",color:e.color||W[0]})):(o(null),h({name:"",description:"",color:W[0]})),n(!0)},g=()=>{n(!1),o(null),h({name:"",description:"",color:W[0]})},f=async e=>{e.preventDefault(),m(!0);try{if(c){if(!(await fetch("/api/pipelines/".concat(s,"/stages/").concat(c.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)})).ok)throw Error("Failed to update stage")}else if(!(await fetch("/api/pipelines/".concat(s,"/stages"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...x,order:t.length})})).ok)throw Error("Failed to create stage");null==i||i(),g()}catch(e){console.error("Error saving stage:",e),alert(e instanceof Error?e.message:"Failed to save stage")}finally{m(!1)}},N=async e=>{if(confirm("Are you sure you want to delete this stage? This cannot be undone."))try{let t=await fetch("/api/pipelines/".concat(s,"/stages/").concat(e),{method:"DELETE"});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to delete stage")}null==i||i()}catch(e){console.error("Error deleting stage:",e),alert(e instanceof Error?e.message:"Failed to delete stage")}};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"space-y-3",children:[t.map(e=>(0,a.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-white border border-slate-200 rounded-lg hover:border-slate-300 transition-colors",children:[(0,a.jsx)("button",{className:"text-slate-400 hover:text-slate-600 cursor-grab","aria-label":"Drag to reorder",children:(0,a.jsx)(u.A,{className:"w-6 h-6"})}),e.color&&(0,a.jsx)("div",{className:"w-5 h-5 rounded-full flex-shrink-0",style:{backgroundColor:e.color}}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-astralis-navy truncate",children:e.name}),e.description&&(0,a.jsx)("p",{className:"text-xs text-slate-500 truncate",children:e.description})]}),(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsx)(M.$,{variant:"ghost",size:"icon",onClick:()=>p(e),className:"h-9 w-9",children:(0,a.jsx)(H.A,{className:"w-5 h-5"})}),(0,a.jsx)(M.$,{variant:"ghost",size:"icon",onClick:()=>N(e.id),className:"h-9 w-9 text-red-600 hover:text-red-700 hover:bg-red-50",children:(0,a.jsx)(J.A,{className:"w-5 h-5"})})]})]},e.id)),(0,a.jsxs)(M.$,{variant:"outline",onClick:()=>p(),className:"w-full",children:[(0,a.jsx)(k.A,{className:"w-6 h-6 mr-2"}),"Add Stage"]})]}),(0,a.jsx)(I.lG,{open:r,onOpenChange:n,children:(0,a.jsx)(I.Cf,{children:(0,a.jsxs)("form",{onSubmit:f,children:[(0,a.jsxs)(I.c7,{children:[(0,a.jsx)(I.L3,{children:c?"Edit Stage":"New Stage"}),(0,a.jsx)(I.rr,{children:c?"Update the stage details":"Create a new stage in this pipeline"})]}),(0,a.jsxs)("div",{className:"space-y-4 py-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"name",children:"Stage Name"}),(0,a.jsx)(P.p,{id:"name",value:x.name,onChange:e=>h({...x,name:e.target.value}),placeholder:"e.g., Backlog, In Progress, Review",required:!0})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{htmlFor:"description",children:"Description (Optional)"}),(0,a.jsx)(U.T,{id:"description",value:x.description,onChange:e=>h({...x,description:e.target.value}),placeholder:"Describe this stage...",rows:3})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(L.J,{children:"Color"}),(0,a.jsx)("div",{className:"flex gap-2",children:W.map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>h({...x,color:e}),className:(0,E.cn)("w-8 h-8 rounded-full border-2 transition-all",x.color===e?"border-astralis-navy scale-110":"border-transparent hover:scale-105"),style:{backgroundColor:e},"aria-label":"Select ".concat(e)},e))})]})]}),(0,a.jsxs)(I.Es,{children:[(0,a.jsx)(M.$,{type:"button",variant:"outline",onClick:g,disabled:d,children:"Cancel"}),(0,a.jsx)(M.$,{type:"submit",disabled:d,children:d?"Saving...":c?"Update Stage":"Create Stage"})]})]})})})]})}var $=t(35285),K=t(84445),B=t(33082);let Q={[C.Vl.NONE]:{label:"None",className:"bg-slate-100 text-slate-600 border-slate-200"},[C.Vl.LOW]:{label:"Low",className:"bg-blue-50 text-blue-700 border-blue-200"},[C.Vl.MEDIUM]:{label:"Medium",className:"bg-yellow-50 text-yellow-700 border-yellow-200"},[C.Vl.HIGH]:{label:"High",className:"bg-orange-50 text-orange-700 border-orange-200"},[C.Vl.URGENT]:{label:"Urgent",className:"bg-red-50 text-red-700 border-red-200"}},X={[C.lR.NEW]:{label:"New",className:"bg-yellow-100 text-yellow-700",icon:(0,a.jsx)($.A,{className:"w-5 h-5"})},[C.lR.ROUTING]:{label:"Routing",className:"bg-blue-100 text-blue-700",icon:(0,a.jsx)(o.A,{className:"w-5 h-5"})},[C.lR.ASSIGNED]:{label:"Assigned",className:"bg-green-100 text-green-700",icon:null},[C.lR.PROCESSING]:{label:"Processing",className:"bg-purple-100 text-purple-700",icon:null},[C.lR.COMPLETED]:{label:"Completed",className:"bg-emerald-100 text-emerald-700",icon:null},[C.lR.REJECTED]:{label:"Rejected",className:"bg-red-100 text-red-700",icon:null}},Z={[C.Md.FORM]:{label:"Form",icon:(0,a.jsx)(o.A,{className:"w-5 h-5"}),className:"text-purple-600"},[C.Md.EMAIL]:{label:"Email",icon:(0,a.jsx)(d.A,{className:"w-5 h-5"}),className:"text-blue-600"},[C.Md.CHAT]:{label:"Chat",icon:(0,a.jsx)(m.A,{className:"w-5 h-5"}),className:"text-green-600"},[C.Md.API]:{label:"API",icon:(0,a.jsx)(x.A,{className:"w-5 h-5"}),className:"text-orange-600"}};function Y(e){var s,t;let{intake:i,isDragging:r=!1,onClick:n,fullCardDrag:o=!1,availablePipelines:d=[],onPipelineAssign:m,onReclassify:x}=e,[p,g]=(0,l.useState)(!1),[f,N]=(0,l.useState)(!1),{attributes:j,listeners:A,setNodeRef:O,transform:R}=(0,c.PM)({id:"intake-".concat(i.id)}),D=R?{transform:"translate3d(".concat(R.x,"px, ").concat(R.y,"px, 0)")}:void 0,k=Q[i.priority]||Q[C.Vl.NONE],I=X[i.status]||X[C.lR.NEW],M=Z[i.source]||Z[C.Md.FORM],P=o?{...A,...j}:{},L=o?{}:{...A,...j},U=async e=>{if(m){g(!0);try{await m(i.id,e)}finally{g(!1)}}},F=async e=>{if(e.stopPropagation(),x){N(!0);try{await x(i.id)}finally{N(!1)}}};i.pipeline||i.assignedPipeline;let V=null==(s=i.pipeline)?void 0:s.name;return(0,a.jsx)("div",{ref:O,style:D,...P,className:(0,E.cn)("IntakeCard transition-all duration-200",o&&"cursor-grab active:cursor-grabbing touch-none",r&&"opacity-50 scale-95"),children:(0,a.jsx)(v.Zp,{variant:"default",hover:!0,className:(0,E.cn)("cursor-pointer border-2 border-amber-200 bg-amber-50/30 transition-colors",r&&"border-purple-500 bg-purple-50 shadow-lg shadow-purple-200"),onClick:n,children:(0,a.jsx)(v.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[!o&&(0,a.jsx)("button",{...L,className:"mt-1 text-slate-400 hover:text-slate-600 cursor-grab active:cursor-grabbing touch-none","aria-label":"Drag to move",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(u.A,{className:"w-5 h-5"})}),o&&(0,a.jsx)("div",{className:"mt-1 text-slate-400",children:(0,a.jsx)(u.A,{className:"w-5 h-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0 space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("h4",{className:"font-medium text-sm text-astralis-navy line-clamp-2 flex-1",children:i.title}),(0,a.jsxs)(y.E,{variant:"default",className:(0,E.cn)("text-xs font-medium flex items-center gap-1",I.className),children:[I.icon,I.label]})]}),i.description&&(0,a.jsx)("p",{className:"text-xs text-slate-500 line-clamp-2",children:i.description}),(0,a.jsxs)("div",{className:"flex items-center gap-2",onClick:e=>e.stopPropagation(),children:[d.length>0&&m?(0,a.jsxs)(w.l6,{value:i.assignedPipeline||(null==(t=i.pipeline)?void 0:t.id)||"",onValueChange:U,disabled:p,children:[(0,a.jsx)(w.bq,{className:"h-8 text-sm bg-white flex-1",children:(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[p?(0,a.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(K.A,{className:"w-4 h-4 text-astralis-blue"}),(0,a.jsx)(w.yv,{placeholder:"Assign to pipeline..."})]})}),(0,a.jsx)(w.gC,{children:d.map(e=>(0,a.jsx)(w.eb,{value:e.id,children:e.name},e.id))})]}):(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-slate-400 flex-1",children:[(0,a.jsx)(K.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{className:"text-sm",children:V||"Unassigned"})]}),x&&(0,a.jsx)("button",{onClick:F,disabled:f,className:"p-1 rounded hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors",title:"Reclassify with AI","aria-label":"Reclassify with AI",children:f?(0,a.jsx)(h.A,{className:"w-4 h-4 animate-spin"}):(0,a.jsx)(B.A,{className:"w-4 h-4"})})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsxs)("div",{className:(0,E.cn)("flex items-center gap-1 text-xs",M.className),children:[M.icon,(0,a.jsx)("span",{children:M.label})]}),i.priority>C.Vl.NONE&&(0,a.jsx)(y.E,{variant:"default",className:(0,E.cn)("text-xs font-medium",k.className),children:k.label})]}),i.createdAt&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5 text-sm text-slate-500",children:[(0,a.jsx)(b.A,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:(0,S.m)((0,T.H)(i.createdAt),{addSuffix:!0})})]})]})]})})})})}var ee=t(4295),es=t(25879),et=t(56823),ea=t.n(et),el=t(76862),ei=t(60567),er=t(90885);function en(e){let{params:s}=e,{id:t}=(0,l.use)(s),c=(0,i.useRouter)(),{data:d,isLoading:m,error:x,refetch:u}=(0,r.IM)(t),{data:p}=(0,r.be)(),{data:g,isLoading:f,refetch:N}=(0,n.g5)(),j=(0,n.tA)(),[b,v]=(0,l.useState)(!1),[w,E]=(0,l.useState)("kanban"),[A,T]=(0,l.useState)(null);if(m)return(0,a.jsx)("div",{className:"flex items-center justify-center h-full",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-astralis-blue"})});if(x||!d)return(0,a.jsx)("div",{className:"text-center py-12",children:(0,a.jsx)("p",{className:"text-red-600",children:"Failed to load pipeline"})});let S=async(e,s)=>{T(e);try{let t=await j.mutateAsync({intakeId:e,pipelineId:s});(0,er.oR)({title:"Intake Assigned",description:t.message||"Successfully assigned intake to pipeline"}),N(),u()}catch(e){(0,er.oR)({title:"Assignment Failed",description:e instanceof Error?e.message:"Failed to assign intake to pipeline",variant:"destructive"})}finally{T(null)}},O=(p||[]).filter(e=>e.isActive&&e.stages&&e.stages.length>0).map(e=>({id:e.id,name:e.name})),R=(null==d?void 0:d.intakeRequests)||[],D={new:R.filter(e=>e.status===C.lR.NEW).length,routing:R.filter(e=>e.status===C.lR.ROUTING).length,assigned:R.filter(e=>e.status===C.lR.ASSIGNED).length,processing:R.filter(e=>e.status===C.lR.PROCESSING).length,total:R.filter(e=>e.status!==C.lR.COMPLETED&&e.status!==C.lR.REJECTED).length},k=(null==g?void 0:g.intakeRequests)||[],I=(null==g?void 0:g.counts)||{new:0,routing:0,total:0};return(0,a.jsxs)("div",{className:"space-y-6 h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(ea(),{href:"/pipelines",children:(0,a.jsxs)(M.$,{variant:"ghost",className:"gap-2",children:[(0,a.jsx)(ee.A,{className:"w-5 h-5"}),"Back"]})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-astralis-navy",children:d.name}),D.total>0&&(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[D.new>0&&(0,a.jsxs)(y.E,{className:"bg-yellow-100 text-yellow-700 text-xs flex items-center gap-1",children:[(0,a.jsx)($.A,{className:"w-4 h-4"}),D.new," new"]}),D.routing>0&&(0,a.jsxs)(y.E,{className:"bg-blue-100 text-blue-700 text-xs flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 animate-spin"}),D.routing," routing"]}),D.processing>0&&(0,a.jsxs)(y.E,{className:"bg-blue-100 text-blue-700 text-xs flex items-center gap-1",children:[(0,a.jsx)(o.A,{className:"w-4 h-4"}),D.processing," processing"]})]})]}),d.description&&(0,a.jsx)("p",{className:"text-slate-600 mt-1",children:d.description})]})]}),(0,a.jsxs)(ei.cj,{open:b,onOpenChange:v,children:[(0,a.jsx)(ei.CG,{asChild:!0,children:(0,a.jsxs)(M.$,{variant:"outline",className:"gap-2",children:[(0,a.jsx)(es.A,{className:"w-5 h-5"}),"Manage Stages"]})}),(0,a.jsxs)(ei.h,{children:[(0,a.jsxs)(ei.Fm,{children:[(0,a.jsx)(ei.qp,{children:"Pipeline Stages"}),(0,a.jsx)(ei.Qs,{children:"Add, edit, or remove stages in this pipeline"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(z,{pipelineId:d.id,stages:d.stages,onStagesChange:()=>{u()}})})]})]})]}),0===d.stages.length?(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center max-w-md",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-slate-100 flex items-center justify-center",children:(0,a.jsx)(es.A,{className:"w-8 h-8 text-slate-400"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-astralis-navy mb-2",children:"No stages yet"}),(0,a.jsx)("p",{className:"text-slate-600 mb-6",children:"Get started by creating stages for your pipeline. Stages help organize work items as they move through your workflow."}),(0,a.jsxs)(M.$,{onClick:()=>v(!0),className:"gap-2",children:[(0,a.jsx)(es.A,{className:"w-4 h-4"}),"Create First Stage"]})]})}):(0,a.jsx)("div",{className:"flex-1 overflow-hidden flex flex-col",children:(0,a.jsxs)(el.tU,{value:w,onValueChange:E,className:"flex-1 flex flex-col",children:[(0,a.jsxs)(el.j7,{className:"mb-4",children:[(0,a.jsxs)(el.Xi,{value:"kanban",className:"gap-2",children:[(0,a.jsx)(o.A,{className:"w-5 h-5"}),"Kanban Board"]}),(0,a.jsxs)(el.Xi,{value:"unclassified",className:"gap-2",children:[(0,a.jsx)($.A,{className:"w-5 h-5"}),"Unclassified Intake",I.total>0&&(0,a.jsx)(y.E,{className:"ml-1 bg-yellow-100 text-yellow-700 text-xs",children:I.total})]})]}),(0,a.jsx)(el.av,{value:"kanban",className:"flex-1 overflow-hidden",style:{height:"-webkit-fill-available"},children:(0,a.jsx)(q,{pipeline:d,onRefetch:u})}),(0,a.jsx)(el.av,{value:"unclassified",className:"flex-1 overflow-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-astralis-navy",children:"Unclassified Intake Items"}),(0,a.jsx)("p",{className:"text-sm text-slate-600 mt-1",children:"These items have not been routed to a pipeline yet and need classification."})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[I.new>0&&(0,a.jsxs)(y.E,{className:"bg-yellow-100 text-yellow-700 flex items-center gap-1",children:[(0,a.jsx)($.A,{className:"w-4 h-4"}),I.new," New"]}),I.routing>0&&(0,a.jsxs)(y.E,{className:"bg-blue-100 text-blue-700 flex items-center gap-1",children:[(0,a.jsx)(h.A,{className:"w-4 h-4 animate-spin"}),I.routing," Routing"]})]})]}),f&&(0,a.jsx)("div",{className:"flex items-center justify-center py-12",children:(0,a.jsx)(h.A,{className:"w-8 h-8 animate-spin text-astralis-blue"})}),!f&&0===k.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-green-50 flex items-center justify-center",children:(0,a.jsx)(o.A,{className:"w-8 h-8 text-green-600"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-astralis-navy mb-2",children:"All caught up!"}),(0,a.jsx)("p",{className:"text-slate-600",children:"There are no unclassified intake items at the moment."})]}),!f&&k.length>0&&(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:k.map(e=>(0,a.jsx)(Y,{intake:e,onClick:()=>{c.push("/intakes/".concat(e.id))},availablePipelines:O,onPipelineAssign:S},e.id))})]})})]})})]})}},60567:(e,s,t)=>{"use strict";t.d(s,{CG:()=>d,Fm:()=>p,Qs:()=>f,cj:()=>o,h:()=>h,qp:()=>g});var a=t(89407),l=t(73335),i=t(97612),r=t(83183),n=t(97662),c=t(45741);let o=i.bL,d=i.l9;i.bm;let m=i.ZL,x=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.hJ,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...l,ref:s})});x.displayName=i.hJ.displayName;let u=(0,r.F)("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-300",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=l.forwardRef((e,s)=>{let{side:t="right",className:l,children:r,...o}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)(i.UC,{ref:s,className:(0,c.cn)(u({side:t}),l),...o,children:[r,(0,a.jsxs)(i.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-astralis-blue focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=i.UC.displayName;let p=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};p.displayName="SheetHeader";let g=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.hE,{ref:s,className:(0,c.cn)("text-lg font-semibold text-astralis-navy",t),...l})});g.displayName=i.hE.displayName;let f=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.VY,{ref:s,className:(0,c.cn)("text-sm text-slate-600",t),...l})});f.displayName=i.VY.displayName},61841:(e,s,t)=>{Promise.resolve().then(t.bind(t,52965))},71615:(e,s,t)=>{"use strict";t.d(s,{E:()=>r});var a=t(89407),l=t(45741);let i={default:"bg-slate-100 text-slate-700",primary:"bg-astralis-blue/10 text-astralis-blue",secondary:"bg-slate-200 text-slate-800",success:"bg-green-100 text-green-700",warning:"bg-orange-100 text-orange-700",error:"bg-red-100 text-red-700"};function r(e){let{children:s,className:t,variant:r="default",title:n}=e;return(0,a.jsx)("span",{className:(0,l.cn)("inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",i[r],t),title:n,children:s})}},76862:(e,s,t)=>{"use strict";t.d(s,{Xi:()=>o,av:()=>d,j7:()=>c,tU:()=>n});var a=t(89407),l=t(73335),i=t(30292),r=t(45741);let n=i.bL,c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.B8,{ref:s,className:(0,r.cn)("flex w-full items-center justify-start gap-2 rounded-lg bg-slate-200 p-[10px] text-slate-600",t),...l})});c.displayName=i.B8.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.l9,{ref:s,className:(0,r.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-white data-[state=active]:text-astralis-blue data-[state=active]:shadow-sm","hover:text-astralis-navy",t),...l})});o.displayName=i.l9.displayName;let d=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(i.UC,{ref:s,className:(0,r.cn)("mt-4 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2",t),...l})});d.displayName=i.UC.displayName},90885:(e,s,t)=>{"use strict";t.d(s,{oR:()=>o}),t(73335);let a=0,l=new Map,i=e=>{if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);l.set(e,s)},r=[],n={toasts:[]};function c(e){n=((e,s)=>{switch(s.type){case"ADD_TOAST":return{...e,toasts:[s.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===s.toast.id?{...e,...s.toast}:e)};case"DISMISS_TOAST":{let{toastId:t}=s;return t?i(t):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===t||void 0===t?{...e,onOpenChange:s=>{s||i(e.id)}}:e)}}case"REMOVE_TOAST":if(void 0===s.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==s.toastId)}}})(n,e),r.forEach(e=>{e(n)})}function o(e){let s=(a=(a+1)%Number.MAX_VALUE).toString(),t=()=>c({type:"DISMISS_TOAST",toastId:s});return c({type:"ADD_TOAST",toast:{...e,id:s,onOpenChange:e=>{e||t()}}}),{id:s,dismiss:t,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:s}})}}}},e=>{e.O(0,[7232,6823,6947,8586,6700,3053,7525,8164,460,4614,5478,8360,2269,5187,7780,3080,3468,2079,8385,5186,400,4276,2006,7358],()=>e(e.s=61841)),_N_E=e.O()}]);