(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[534],{108:(e,t,s)=>{"use strict";s.d(t,{z:()=>l});var a=s(89407);s(73335);var i=s(45741);function l(e){let{title:t,description:s,actions:l,className:n}=e;return(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",n),children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-astralis-navy sm:text-3xl",children:t}),s&&(0,a.jsx)("p",{className:"text-sm text-slate-600 sm:text-base",children:s})]}),l&&(0,a.jsx)("div",{className:"flex items-center gap-2 shrink-0",children:l})]})}},14660:(e,t,s)=>{"use strict";s.d(t,{p:()=>n});var a=s(89407);s(73335);var i=s(45741),l=s(70558);function n(e){let{icon:t,title:s,description:n,primaryAction:r,secondaryAction:c,className:d}=e;return(0,a.jsxs)("div",{className:(0,i.cn)("flex flex-col items-center justify-center text-center py-12 px-4",d),children:[t&&(0,a.jsx)("div",{className:"mb-4 inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100",children:(0,a.jsx)(t,{className:"w-8 h-8 text-slate-400",strokeWidth:1.5})}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-astralis-navy mb-2",children:s}),n&&(0,a.jsx)("p",{className:"text-sm text-slate-600 max-w-md mb-6",children:n}),(r||c)&&(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[r&&(0,a.jsx)(l.$,{variant:"primary",size:"default",onClick:r.onClick,asChild:!!r.href,children:r.href?(0,a.jsx)("a",{href:r.href,children:r.label}):r.label}),c&&(0,a.jsx)(l.$,{variant:"outline",size:"default",onClick:c.onClick,asChild:!!c.href,children:c.href?(0,a.jsx)("a",{href:c.href,children:c.label}):c.label})]})]})}},18354:(e,t,s)=>{Promise.resolve().then(s.bind(s,91760))},3e4:(e,t,s)=>{"use strict";s.d(t,{T:()=>n});var a=s(89407),i=s(73335),l=s(45741);let n=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50",s),ref:t,...i})});n.displayName="Textarea"},34876:(e,t,s)=>{"use strict";s.d(t,{J:()=>r});var a=s(89407),i=s(73335),l=s(36187),n=s(45741);let r=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.b,{ref:t,className:(0,n.cn)("text-sm font-medium leading-none text-slate-700","peer-disabled:cursor-not-allowed peer-disabled:opacity-70",s),...i})});r.displayName=l.b.displayName},60567:(e,t,s)=>{"use strict";s.d(t,{CG:()=>o,Fm:()=>u,Qs:()=>g,cj:()=>d,h:()=>h,qp:()=>f});var a=s(89407),i=s(73335),l=s(97612),n=s(83183),r=s(97662),c=s(45741);let d=l.bL,o=l.l9;l.bm;let m=l.ZL,x=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.hJ,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/50 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...i,ref:t})});x.displayName=l.hJ.displayName;let p=(0,n.F)("fixed z-50 gap-4 bg-white p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-300",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),h=i.forwardRef((e,t)=>{let{side:s="right",className:i,children:n,...d}=e;return(0,a.jsxs)(m,{children:[(0,a.jsx)(x,{}),(0,a.jsxs)(l.UC,{ref:t,className:(0,c.cn)(p({side:s}),i),...d,children:[n,(0,a.jsxs)(l.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-astralis-blue focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-slate-100",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});h.displayName=l.UC.displayName;let u=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,c.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};u.displayName="SheetHeader";let f=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.hE,{ref:t,className:(0,c.cn)("text-lg font-semibold text-astralis-navy",s),...i})});f.displayName=l.hE.displayName;let g=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.VY,{ref:t,className:(0,c.cn)("text-sm text-slate-600",s),...i})});g.displayName=l.VY.displayName},70483:(e,t,s)=>{"use strict";s.d(t,{EA:()=>l});var a=s(89407),i=s(45741);function l(e){let{className:t,variant:s="rectangular",width:l,height:n,animation:r="pulse"}=e;return(0,a.jsx)("div",{className:(0,i.cn)("bg-slate-200",{text:"rounded h-4",circular:"rounded-full",rectangular:"rounded-md"}[s],{pulse:"animate-pulse",wave:"animate-shimmer bg-gradient-to-r from-slate-200 via-slate-100 to-slate-200 bg-[length:200%_100%]",none:""}[r],t),style:{width:"number"==typeof l?"".concat(l,"px"):l,height:"number"==typeof n?"".concat(n,"px"):n}})}},76862:(e,t,s)=>{"use strict";s.d(t,{Xi:()=>d,av:()=>o,j7:()=>c,tU:()=>r});var a=s(89407),i=s(73335),l=s(30292),n=s(45741);let r=l.bL,c=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.B8,{ref:t,className:(0,n.cn)("flex w-full items-center justify-start gap-2 rounded-lg bg-slate-200 p-[10px] text-slate-600",s),...i})});c.displayName=l.B8.displayName;let d=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-md px-4 py-1.5 text-sm font-medium transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50","data-[state=active]:bg-white data-[state=active]:text-astralis-blue data-[state=active]:shadow-sm","hover:text-astralis-navy",s),...i})});d.displayName=l.l9.displayName;let o=i.forwardRef((e,t)=>{let{className:s,...i}=e;return(0,a.jsx)(l.UC,{ref:t,className:(0,n.cn)("mt-4 ring-offset-white focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2",s),...i})});o.displayName=l.UC.displayName},90885:(e,t,s)=>{"use strict";s.d(t,{oR:()=>d}),s(73335);let a=0,i=new Map,l=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),c({type:"REMOVE_TOAST",toastId:e})},5e3);i.set(e,t)},n=[],r={toasts:[]};function c(e){r=((e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,3)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:s}=t;return s?l(s):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===s||void 0===s?{...e,onOpenChange:t=>{t||l(e.id)}}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}})(r,e),n.forEach(e=>{e(r)})}function d(e){let t=(a=(a+1)%Number.MAX_VALUE).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:t});return c({type:"ADD_TOAST",toast:{...e,id:t,onOpenChange:e=>{e||s()}}}),{id:t,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:t}})}}},91760:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>G});var a=s(89407),i=s(73335),l=s(36700),n=s(98848),r=s(108),c=s(14660),d=s(39076),o=s.n(d),m=s(82341),x=s(31087),p=s(57177),h=s(20827),u=s(70558),f=s(9924),g=s(67464),j=s(30312),v=s(71478);function N(e){let{events:t,onEventClick:s,onDateSelect:l,className:n=""}=e,[r,c]=(0,i.useState)("dayGridMonth"),d=t.map(e=>({id:e.id,title:e.title,start:e.startTime,end:e.endTime,backgroundColor:"CONFLICT"===e.status?"#E53E3E":"#2B6CB0",borderColor:"CONFLICT"===e.status?"#C53030":"#2C5282",extendedProps:{description:e.description,location:e.location,meetingLink:e.meetingLink,participants:e.participantEmails,status:e.status,hasConflict:"CONFLICT"===e.status}})),N=(0,i.useCallback)(e=>{let a=e.event.id,i=t.find(e=>e.id===a);i&&s&&s(i)},[t,s]),b=(0,i.useCallback)(e=>{l&&l(new Date(e.dateStr))},[l]),y=e=>{c(e)};return(0,a.jsxs)(f.Zp,{className:"p-4 md:p-6 ".concat(n),children:[(0,a.jsxs)("div",{className:"jsx-d40f3e5e86e0a32 flex flex-wrap gap-2 mb-4 md:mb-6",children:[(0,a.jsxs)(u.$,{variant:"dayGridMonth"===r?"primary":"outline",size:"sm",onClick:()=>y("dayGridMonth"),className:"flex items-center gap-2",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"jsx-d40f3e5e86e0a32 hidden sm:inline",children:"Month"})]}),(0,a.jsxs)(u.$,{variant:"timeGridWeek"===r?"primary":"outline",size:"sm",onClick:()=>y("timeGridWeek"),className:"flex items-center gap-2",children:[(0,a.jsx)(j.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"jsx-d40f3e5e86e0a32 hidden sm:inline",children:"Week"})]}),(0,a.jsxs)(u.$,{variant:"timeGridDay"===r?"primary":"outline",size:"sm",onClick:()=>y("timeGridDay"),className:"flex items-center gap-2",children:[(0,a.jsx)(v.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"jsx-d40f3e5e86e0a32 hidden sm:inline",children:"Day"})]})]}),(0,a.jsx)("div",{className:"jsx-d40f3e5e86e0a32 calendar-container",children:(0,a.jsx)(m.A,{plugins:[x.A,p.A,h.Ay],initialView:r,headerToolbar:{left:"prev,next today",center:"title",right:""},events:d,eventClick:N,dateClick:b,height:"auto",editable:!1,selectable:!0,selectMirror:!0,dayMaxEvents:3,weekends:!0,eventTimeFormat:{hour:"2-digit",minute:"2-digit",meridiem:"short"},slotMinTime:"06:00:00",slotMaxTime:"22:00:00",allDaySlot:!1,nowIndicator:!0,eventContent:e=>{let t=e.event.extendedProps.hasConflict;return(0,a.jsx)("div",{className:"jsx-d40f3e5e86e0a32 fc-event-content-wrapper",children:(0,a.jsxs)("div",{className:"jsx-d40f3e5e86e0a32 "+"fc-event-main-frame ".concat(t?"border-l-4 border-red-500":""),children:[(0,a.jsx)("div",{className:"jsx-d40f3e5e86e0a32 fc-event-time text-xs",children:e.timeText}),(0,a.jsx)("div",{className:"jsx-d40f3e5e86e0a32 fc-event-title-container",children:(0,a.jsxs)("div",{className:"jsx-d40f3e5e86e0a32 fc-event-title fc-sticky font-medium",children:[e.event.title,t&&(0,a.jsx)("span",{className:"jsx-d40f3e5e86e0a32 ml-1 text-xs",children:"⚠️"})]})}),e.event.extendedProps.location&&(0,a.jsxs)("div",{className:"jsx-d40f3e5e86e0a32 fc-event-location text-xs opacity-90 truncate",children:["\uD83D\uDCCD ",e.event.extendedProps.location]})]})})}})}),(0,a.jsx)(o(),{id:"d40f3e5e86e0a32",children:".calendar-container{--fc-border-color:#e2e8f0;--fc-button-bg-color:#2b6cb0;--fc-button-border-color:#2c5282;--fc-button-hover-bg-color:#2c5282;--fc-button-hover-border-color:#2a4365;--fc-button-active-bg-color:#2a4365;--fc-button-active-border-color:#1e3a5f;--fc-today-bg-color:rgba(43, 108, 176, 0.1)}.fc{font-family:inherit}.fc .fc-button{border-radius:6px;padding:8px 12px;font-weight:500;transition:all 200ms}.fc .fc-button:focus{box-shadow:0 0 0 3px rgba(43,108,176,.2)}.fc .fc-toolbar-title{font-size:1.5rem;font-weight:600;color:#0a1b2b}.fc-event{border-radius:4px;padding:2px 4px;cursor:pointer;transition:all 200ms}.fc-event:hover{box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);transform:translatey(-1px)}.fc-daygrid-event{white-space:normal}.fc-event-main{color:white}.fc-event-title{font-weight:500}.fc-event-location{margin-top:2px}.fc-day-today{background-color:var(--fc-today-bg-color)!important}.fc-col-header-cell-cushion{color:#0a1b2b;font-weight:600;padding:8px 4px}.fc-timegrid-slot-label{color:#64748b;font-size:.875rem}.fc-scrollgrid{border-radius:6px;overflow:hidden}@media(max-width:768px){.fc .fc-toolbar{flex-direction:column;gap:12px}.fc .fc-toolbar-chunk{display:flex;justify-content:center}.fc .fc-toolbar-title{font-size:1.25rem}}"})]})}var b=s(71287),y=s(22635),w=s(92405),T=s(46870),C=s(22897),D=s(82868);let E={SCHEDULED:{label:"Scheduled",icon:j.A,color:"text-blue-600",bgColor:"bg-blue-100",dotColor:"bg-blue-500"},CONFIRMED:{label:"Confirmed",icon:b.A,color:"text-green-600",bgColor:"bg-green-100",dotColor:"bg-green-500"},CANCELLED:{label:"Cancelled",icon:y.A,color:"text-red-600",bgColor:"bg-red-100",dotColor:"bg-red-500"},COMPLETED:{label:"Completed",icon:b.A,color:"text-slate-600",bgColor:"bg-slate-100",dotColor:"bg-slate-500"},CONFLICT:{label:"Conflict",icon:w.A,color:"text-orange-600",bgColor:"bg-orange-100",dotColor:"bg-orange-500"}};function S(e){var t,s,i,l;let{event:n,onClick:r,onAccept:c,onDecline:d,isUpdating:o}=e,m=new Date(n.startTime),x=new Date(n.endTime),p=E[n.status||"SCHEDULED"],h=p.icon,N=n.conflicts&&n.conflicts.length>0,S=e=>e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return(0,a.jsx)(f.Zp,{className:"p-4 bg-slate-50 hover:shadow-card-hover transition-all cursor-pointer ".concat(N?"border-l-4 border-l-red-500":""," ").concat(r?"hover:border-astralis-blue":""),onClick:r,children:(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("h3",{className:"font-semibold text-astralis-navy text-base truncate",children:n.title}),n.description&&(0,a.jsx)("p",{className:"text-sm text-slate-600 line-clamp-2 mt-1",children:n.description})]}),(0,a.jsx)("div",{className:"flex items-center gap-1.5 flex-shrink-0",children:(0,a.jsx)(h,{className:"h-5 w-5 ".concat(p.color)})})]}),(0,a.jsxs)("div",{className:"space-y-1.5",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(g.A,{className:"h-5 w-5 text-slate-400 flex-shrink-0"}),(0,a.jsxs)("span",{className:"text-slate-700",children:[m.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),(()=>{let e=new Date;return m.getDate()===e.getDate()&&m.getMonth()===e.getMonth()&&m.getFullYear()===e.getFullYear()})()&&(0,a.jsx)("span",{className:"ml-2 px-1.5 py-0.5 bg-astralis-blue text-white text-xs rounded font-medium",children:"Today"})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(j.A,{className:"h-5 w-5 text-slate-400 flex-shrink-0"}),(0,a.jsxs)("span",{className:"text-slate-700",children:[S(m)," - ",S(x)]})]})]}),n.location&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,a.jsx)(T.A,{className:"h-5 w-5 text-slate-400 flex-shrink-0"}),(0,a.jsx)("span",{className:"text-slate-700 truncate",children:n.location})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-slate-200",children:[n.participants&&n.participants.length>0&&(0,a.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,a.jsx)(v.A,{className:"h-5 w-5 text-slate-400"}),(0,a.jsxs)("span",{className:"text-xs text-slate-600",children:[n.participants.length," participant",1!==n.participants.length?"s":""]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[n.meetingLink&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-blue-50 rounded text-xs text-blue-700",children:[(0,a.jsx)(C.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"hidden sm:inline",children:"Video call"})]}),N&&(0,a.jsxs)("div",{className:"flex items-center gap-1 px-2 py-1 bg-red-50 rounded text-xs text-red-700",children:[(0,a.jsx)(w.A,{className:"h-5 w-5"}),(0,a.jsxs)("span",{className:"hidden sm:inline",children:[null!=(i=null==(t=n.conflicts)?void 0:t.length)?i:0," conflict",(null!=(l=null==(s=n.conflicts)?void 0:s.length)?l:0)!==1?"s":""]})]})]})]}),(c||d)&&"SCHEDULED"===n.status&&(0,a.jsxs)("div",{className:"flex items-center gap-2 pt-2 border-t border-slate-200 mt-2",children:[c&&(0,a.jsxs)(u.$,{size:"sm",variant:"outline",className:"flex-1 bg-green-50 hover:bg-green-100 text-green-700 border-green-200",onClick:e=>{e.stopPropagation(),c(n.id)},disabled:o,children:[o?(0,a.jsx)(D.A,{className:"w-4 h-4 mr-1 animate-spin"}):(0,a.jsx)(b.A,{className:"w-4 h-4 mr-1"}),"Accept"]}),d&&(0,a.jsxs)(u.$,{size:"sm",variant:"outline",className:"flex-1 bg-red-50 hover:bg-red-100 text-red-700 border-red-200",onClick:e=>{e.stopPropagation(),d(n.id)},disabled:o,children:[o?(0,a.jsx)(D.A,{className:"w-4 h-4 mr-1 animate-spin"}):(0,a.jsx)(y.A,{className:"w-4 h-4 mr-1"}),"Decline"]})]})]})})}var k=s(2550),A=s(34876),L=s(3e4),O=s(60412),F=s(10753),I=s(33670),M=s(97662),R=s(35285);function U(e){let{event:t,onSubmit:s,onCancel:l,mode:n}=e,[r,c]=(0,i.useState)({title:(null==t?void 0:t.title)||"",description:(null==t?void 0:t.description)||"",startDate:(null==t?void 0:t.startTime)?new Date(t.startTime).toISOString().split("T")[0]:"",startTime:(null==t?void 0:t.startTime)?new Date(t.startTime).toTimeString().slice(0,5):"",endDate:(null==t?void 0:t.endTime)?new Date(t.endTime).toISOString().split("T")[0]:"",endTime:(null==t?void 0:t.endTime)?new Date(t.endTime).toTimeString().slice(0,5):"",participants:(null==t?void 0:t.participants)||[],location:(null==t?void 0:t.location)||"",meetingLink:(null==t?void 0:t.meetingLink)||""}),[d,o]=(0,i.useState)(""),[m,x]=(0,i.useState)({}),[p,h]=(0,i.useState)([]),[f,g]=(0,i.useState)(!1),[j,v]=(0,i.useState)(!1),[N,b]=(0,i.useState)(!1);(0,i.useEffect)(()=>{r.startDate&&r.startTime&&r.endDate&&r.endTime&&y()},[r.startDate,r.startTime,r.endDate,r.endTime]);let y=async()=>{g(!0);try{let e=new Date("".concat(r.startDate,"T").concat(r.startTime)),s=new Date("".concat(r.endDate,"T").concat(r.endTime)),a=await fetch("/api/scheduling/conflicts",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({startTime:e.toISOString(),endTime:s.toISOString(),participants:r.participants,excludeEventId:null==t?void 0:t.id})});if(a.ok){let e=await a.json();h(e.conflicts||[])}}catch(e){console.error("Error checking conflicts:",e)}finally{g(!1)}},w=async()=>{v(!0);try{let e=await fetch("/api/scheduling/suggest",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({participants:r.participants,duration:60,preferredTimes:["morning","afternoon"]})});if(e.ok){let t=await e.json();if(t.suggestions&&t.suggestions.length>0){let e=t.suggestions[0],s=new Date(e.startTime),a=new Date(e.endTime);c({...r,startDate:s.toISOString().split("T")[0],startTime:s.toTimeString().slice(0,5),endDate:a.toISOString().split("T")[0],endTime:a.toTimeString().slice(0,5)})}}}catch(e){console.error("Error getting suggestions:",e)}finally{v(!1)}},T=()=>{let e=d.trim().toLowerCase();return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?r.participants.includes(e)?void x({...m,participantEmail:"Email already added"}):void(c({...r,participants:[...r.participants,e]}),o(""),x({...m,participantEmail:""})):void x({...m,participantEmail:"Invalid email format"}):void x({...m,participantEmail:"Email is required"})},C=async e=>{if(e.preventDefault(),(()=>{let e={};if(r.title.trim()||(e.title="Title is required"),r.startDate||(e.startDate="Start date is required"),r.startTime||(e.startTime="Start time is required"),r.endDate||(e.endDate="End date is required"),r.endTime||(e.endTime="End time is required"),r.startDate&&r.startTime&&r.endDate&&r.endTime){let t=new Date("".concat(r.startDate,"T").concat(r.startTime));new Date("".concat(r.endDate,"T").concat(r.endTime))<=t&&(e.endTime="End time must be after start time")}return 0===r.participants.length&&(e.participants="At least one participant is required"),x(e),0===Object.keys(e).length})()){b(!0);try{let e=new Date("".concat(r.startDate,"T").concat(r.startTime)),t=new Date("".concat(r.endDate,"T").concat(r.endTime)),a={...r,startTime:e.toISOString(),endTime:t.toISOString()};await s(a)}catch(e){console.error("Error submitting form:",e),x({submit:"Failed to submit form. Please try again."})}finally{b(!1)}}};return(0,a.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(A.J,{htmlFor:"title",children:["Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(k.p,{id:"title",value:r.title,onChange:e=>c({...r,title:e.target.value}),placeholder:"Meeting title",className:m.title?"border-red-500":""}),m.title&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.title})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"description",children:"Description"}),(0,a.jsx)(L.T,{id:"description",value:r.description,onChange:e=>c({...r,description:e.target.value}),placeholder:"Meeting description and agenda",rows:3})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(A.J,{htmlFor:"startDate",children:["Start Date ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(k.p,{id:"startDate",type:"date",value:r.startDate,onChange:e=>c({...r,startDate:e.target.value}),className:m.startDate?"border-red-500":""}),m.startDate&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.startDate})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(A.J,{htmlFor:"startTime",children:["Start Time ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(k.p,{id:"startTime",type:"time",value:r.startTime,onChange:e=>c({...r,startTime:e.target.value}),className:m.startTime?"border-red-500":""}),m.startTime&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.startTime})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(A.J,{htmlFor:"endDate",children:["End Date ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(k.p,{id:"endDate",type:"date",value:r.endDate,onChange:e=>c({...r,endDate:e.target.value}),className:m.endDate?"border-red-500":""}),m.endDate&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.endDate})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(A.J,{htmlFor:"endTime",children:["End Time ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)(k.p,{id:"endTime",type:"time",value:r.endTime,onChange:e=>c({...r,endTime:e.target.value}),className:m.endTime?"border-red-500":""}),m.endTime&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.endTime})]})]}),(0,a.jsxs)(u.$,{type:"button",variant:"outline",size:"sm",onClick:w,disabled:j||0===r.participants.length,className:"gap-2",children:[j?(0,a.jsx)(D.A,{className:"h-4 w-4 animate-spin"}):(0,a.jsx)(F.A,{className:"h-4 w-4"}),"Get AI Time Suggestions"]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)(A.J,{htmlFor:"participantEmail",children:["Participants ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(k.p,{id:"participantEmail",type:"email",value:d,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),T())},placeholder:"email@example.com",className:m.participantEmail?"border-red-500":""}),(0,a.jsx)(u.$,{type:"button",variant:"outline",size:"sm",onClick:T,children:(0,a.jsx)(I.A,{className:"h-4 w-4"})})]}),m.participantEmail&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.participantEmail}),m.participants&&0===r.participants.length&&(0,a.jsx)("p",{className:"text-sm text-red-500",children:m.participants}),r.participants.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:r.participants.map(e=>(0,a.jsxs)("div",{className:"inline-flex items-center gap-2 px-3 py-1 bg-astralis-blue/10 text-astralis-blue rounded-full text-sm",children:[(0,a.jsx)("span",{children:e}),(0,a.jsx)("button",{type:"button",onClick:()=>{c({...r,participants:r.participants.filter(t=>t!==e)})},className:"hover:bg-red-100 rounded-full p-0.5 transition-colors",children:(0,a.jsx)(M.A,{className:"h-3 w-3"})})]},e))})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"location",children:"Location"}),(0,a.jsx)(k.p,{id:"location",value:r.location,onChange:e=>c({...r,location:e.target.value}),placeholder:"Meeting room or address"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(A.J,{htmlFor:"meetingLink",children:"Meeting Link"}),(0,a.jsx)(k.p,{id:"meetingLink",type:"url",value:r.meetingLink,onChange:e=>c({...r,meetingLink:e.target.value}),placeholder:"https://zoom.us/j/..."})]}),f&&(0,a.jsxs)(O.Fc,{children:[(0,a.jsx)(D.A,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(O.XL,{children:"Checking for conflicts..."})]}),!f&&p.length>0&&(0,a.jsxs)(O.Fc,{variant:"warning",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),(0,a.jsx)(O.XL,{children:"Scheduling Conflicts Detected"}),(0,a.jsx)(O.TN,{children:(0,a.jsx)("div",{className:"mt-2 space-y-1",children:p.map((e,t)=>(0,a.jsxs)("div",{className:"text-sm",children:[e.title," (",new Date(e.startTime).toLocaleTimeString()," -"," ",new Date(e.endTime).toLocaleTimeString(),")"]},t))})})]}),m.submit&&(0,a.jsxs)(O.Fc,{variant:"error",children:[(0,a.jsx)(R.A,{className:"h-4 w-4"}),(0,a.jsx)(O.TN,{children:m.submit})]}),(0,a.jsxs)("div",{className:"flex gap-3 justify-end pt-4 border-t border-slate-200",children:[(0,a.jsx)(u.$,{type:"button",variant:"outline",onClick:l,children:"Cancel"}),(0,a.jsx)(u.$,{type:"submit",variant:"primary",disabled:N||f,children:N?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.A,{className:"h-5 w-5 animate-spin mr-2"}),"create"===n?"Creating...":"Updating..."]}):"create"===n?"Create Event":"Update Event"})]})]})}var P=s(76862),z=s(60567),Z=s(70483),J=s(33082),$=s(17223),_=s(96064),W=s(45741),q=s(90885);function G(){var e,t;let{data:s}=(0,l.useSession)(),[d,o]=(0,i.useState)([]),[m,x]=(0,i.useState)(!0),[p,h]=(0,i.useState)(null),[y,T]=(0,i.useState)("all"),[C,D]=(0,i.useState)(!1),[E,k]=(0,i.useState)(null),[A,L]=(0,i.useState)(!1),[F,R]=(0,i.useState)(!1),[G,V]=(0,i.useState)(null),B=(null==s||null==(e=s.user)?void 0:e.id)||"",X=(null==s||null==(t=s.user)?void 0:t.orgId)||"",H=(0,i.useCallback)(async()=>{try{x(!0),h(null);let e=await fetch("/api/calendar/events");if(!e.ok)throw Error("Failed to fetch events");let t=await e.json();o(t.data||[])}catch(e){h(e instanceof Error?e.message:"Failed to load events"),console.error("Error fetching events:",e)}finally{x(!1)}},[]);(0,i.useEffect)(()=>{H()},[H]);let Y=async e=>{try{let t=await fetch("/api/calendar/events",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:e.title,description:e.description,startTime:e.startTime,endTime:e.endTime,attendees:e.participants,location:e.location})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to create event")}D(!1),await H()}catch(t){let e=t instanceof Error?t.message:"Failed to create event";throw console.error("Error creating event:",t),Error(e)}},Q=e=>{k(e),L(!0)},K=async e=>{V(e);try{let t=await fetch("/api/calendar/events/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"CONFIRMED"})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to accept event")}(0,q.oR)({title:"Event Accepted",description:"The event has been confirmed"}),await H()}catch(e){(0,q.oR)({title:"Error",description:e instanceof Error?e.message:"Failed to accept event",variant:"destructive"})}finally{V(null)}},ee=async e=>{V(e);try{let t=await fetch("/api/calendar/events/".concat(e),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:"CANCELLED"})});if(!t.ok){let e=await t.json();throw Error(e.error||"Failed to decline event")}(0,q.oR)({title:"Event Declined",description:"The event has been cancelled"}),await H()}catch(e){(0,q.oR)({title:"Error",description:e instanceof Error?e.message:"Failed to decline event",variant:"destructive"})}finally{V(null)}},et=d.filter(e=>{var t,a;return"all"===y||("my"===y&&(null==s||null==(t=s.user)?void 0:t.id)?e.userId===s.user.id:"team"!==y||e.userId!==(null==s||null==(a=s.user)?void 0:a.id))}),es=[...et].filter(e=>new Date(e.startTime)>=new Date).sort((e,t)=>new Date(e.startTime).getTime()-new Date(t.startTime).getTime()).slice(0,10),ea={total:d.length,scheduled:d.filter(e=>"SCHEDULED"===e.status).length,confirmed:d.filter(e=>"CONFIRMED"===e.status).length,completed:d.filter(e=>"COMPLETED"===e.status).length,conflicts:d.filter(e=>"CONFLICT"===e.status).length};return(0,a.jsxs)(n.L,{children:[(0,a.jsxs)("div",{className:(0,W.cn)("transition-all duration-300",F?"mr-[400px]":""),children:[(0,a.jsx)(r.z,{title:"Scheduling",description:"Manage your calendar events and meetings",actions:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(u.$,{variant:"outline",className:"gap-2",onClick:H,disabled:m,children:[(0,a.jsx)(J.A,{className:"h-5 w-5 ".concat(m?"animate-spin":"")}),"Refresh"]}),(0,a.jsxs)(u.$,{variant:"primary",className:"gap-2",onClick:()=>D(!0),children:[(0,a.jsx)(I.A,{className:"h-5 w-5"}),"Create Event"]}),(0,a.jsxs)(u.$,{variant:F?"primary":"outline",className:"gap-2",onClick:()=>R(!F),children:[(0,a.jsx)($.A,{className:"h-5 w-5"}),F?"Hide Chat":"Chat Assistant"]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mt-6",children:[(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-100 rounded-lg",children:(0,a.jsx)(g.A,{className:"h-5 w-5 text-slate-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Total Events"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-astralis-navy",children:ea.total})]})]})})}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)(j.A,{className:"h-5 w-5 text-blue-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Scheduled"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-astralis-blue",children:ea.scheduled})]})]})})}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)(b.A,{className:"h-5 w-5 text-green-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Confirmed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-success",children:ea.confirmed})]})]})})}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-slate-100 rounded-lg",children:(0,a.jsx)(v.A,{className:"h-5 w-5 text-slate-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Completed"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-slate-600",children:ea.completed})]})]})})}),(0,a.jsx)(f.Zp,{children:(0,a.jsx)(f.Wu,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)(w.A,{className:"h-5 w-5 text-orange-600"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-slate-500",children:"Conflicts"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-warning",children:ea.conflicts})]})]})})})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsxs)(P.tU,{value:y,onValueChange:e=>T(e),children:[(0,a.jsxs)(P.j7,{children:[(0,a.jsx)(P.Xi,{value:"all",children:"All Events"}),(0,a.jsx)(P.Xi,{value:"my",children:"My Events"}),(0,a.jsx)(P.Xi,{value:"team",children:"Team Events"})]}),(0,a.jsxs)(P.av,{value:y,children:[p&&(0,a.jsxs)(O.Fc,{variant:"error",showIcon:!0,className:"mb-6",children:[(0,a.jsx)(O.XL,{children:"Error"}),(0,a.jsx)(O.TN,{children:p})]}),m&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(f.Zp,{className:"p-6",children:(0,a.jsx)(Z.EA,{className:"h-96 w-full"})})}),(0,a.jsx)("div",{className:"space-y-4",children:(0,a.jsxs)(f.Zp,{className:"p-4",children:[(0,a.jsx)(Z.EA,{className:"h-6 w-32 mb-4"}),[1,2,3,4,5].map(e=>(0,a.jsx)(Z.EA,{className:"h-24 w-full mb-3"},e))]})})]}),!m&&!p&&0===et.length&&(0,a.jsx)(c.p,{icon:g.A,title:"No events found",description:"all"!==y?"Try selecting a different filter to see more events":"Get started by creating your first event",primaryAction:{label:"Create Event",onClick:()=>D(!0)}}),!m&&!p&&et.length>0&&(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsx)(N,{events:et,onEventClick:Q,onDateSelect:e=>{D(!0)}})}),(0,a.jsx)("div",{children:(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{className:"pb-3",children:(0,a.jsx)(f.ZB,{className:"text-lg font-semibold text-astralis-navy",children:"Upcoming Events"})}),(0,a.jsx)(f.Wu,{className:"space-y-3",children:0===es.length?(0,a.jsx)("p",{className:"text-sm text-slate-500 text-center py-4",children:"No upcoming events"}):es.map(e=>(0,a.jsx)(S,{event:{id:e.id,title:e.title,description:e.description||void 0,startTime:e.startTime,endTime:e.endTime,location:e.location||void 0,meetingLink:e.meetingLink||void 0,participants:e.participantEmails||[],status:e.status},onClick:()=>Q(e),onAccept:K,onDecline:ee,isUpdating:G===e.id},e.id))})]})})]})]})]})})]}),F&&(0,a.jsxs)("div",{className:"fixed right-0 top-16 bottom-0 w-[400px] border-l border-slate-200 bg-white shadow-lg z-40",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-slate-200",children:[(0,a.jsx)("span",{className:"text-lg font-semibold text-astralis-navy",children:"Calendar Assistant"}),(0,a.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>R(!1),children:(0,a.jsx)(M.A,{className:"h-4 w-4"})})]}),(0,a.jsx)("div",{className:"h-[calc(100%-60px)]",children:(0,a.jsx)(_.CalendarChatPanel,{userId:B,orgId:X,onEventCreated:H})})]}),(0,a.jsx)(z.cj,{open:C,onOpenChange:D,children:(0,a.jsxs)(z.h,{side:"right",className:"w-full sm:max-w-xl overflow-y-auto",children:[(0,a.jsxs)(z.Fm,{children:[(0,a.jsx)(z.qp,{children:"Create New Event"}),(0,a.jsx)(z.Qs,{children:"Schedule a new meeting or event with participants"})]}),(0,a.jsx)("div",{className:"mt-6",children:(0,a.jsx)(U,{mode:"create",onSubmit:Y,onCancel:()=>D(!1)})})]})}),(0,a.jsx)(z.cj,{open:A,onOpenChange:L,children:(0,a.jsxs)(z.h,{side:"right",className:"w-full sm:max-w-xl overflow-y-auto",children:[(0,a.jsxs)(z.Fm,{children:[(0,a.jsx)(z.qp,{children:(null==E?void 0:E.title)||"Event Details"}),(0,a.jsx)(z.Qs,{children:"View and manage event details"})]}),E&&(0,a.jsxs)("div",{className:"mt-6 space-y-4",children:[(0,a.jsx)(S,{event:{id:E.id,title:E.title,description:E.description||void 0,startTime:E.startTime,endTime:E.endTime,location:E.location||void 0,meetingLink:E.meetingLink||void 0,participants:E.participantEmails||[],status:E.status},onAccept:K,onDecline:ee,isUpdating:G===E.id}),E.description&&(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{className:"pb-2",children:(0,a.jsx)(f.ZB,{className:"text-sm font-medium text-slate-600",children:"Description"})}),(0,a.jsx)(f.Wu,{children:(0,a.jsx)("p",{className:"text-sm text-slate-700",children:E.description})})]}),E.participantEmails&&E.participantEmails.length>0&&(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{className:"pb-2",children:(0,a.jsxs)(f.ZB,{className:"text-sm font-medium text-slate-600",children:["Participants (",E.participantEmails.length,")"]})}),(0,a.jsx)(f.Wu,{children:(0,a.jsx)("div",{className:"space-y-2",children:E.participantEmails.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 text-sm text-slate-700",children:[(0,a.jsx)(v.A,{className:"h-4 w-4 text-slate-400"}),e]},t))})})]}),E.meetingLink&&(0,a.jsxs)(f.Zp,{children:[(0,a.jsx)(f.aR,{className:"pb-2",children:(0,a.jsx)(f.ZB,{className:"text-sm font-medium text-slate-600",children:"Meeting Link"})}),(0,a.jsx)(f.Wu,{children:(0,a.jsx)("a",{href:E.meetingLink,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-astralis-blue hover:underline",children:E.meetingLink})})]}),(0,a.jsx)("div",{className:"flex gap-3 pt-4",children:(0,a.jsx)(u.$,{variant:"outline",className:"flex-1",onClick:()=>L(!1),children:"Close"})})]})]})})]})}},98848:(e,t,s)=>{"use strict";s.d(t,{L:()=>n});var a=s(89407);s(73335);var i=s(45741);let l={default:"max-w-7xl",full:"max-w-full",narrow:"max-w-5xl"};function n(e){let{children:t,className:s,maxWidth:n="default"}=e;return(0,a.jsx)("div",{className:(0,i.cn)("mx-auto w-full px-4 py-6 sm:px-6 lg:px-8",l[n],s),children:t})}}},e=>{e.O(0,[7232,6947,8586,6700,3053,4614,3686,6427,3661,8434,3967,6064,7780,3080,3468,2079,8385,5186,400,4276,2006,7358],()=>e(e.s=18354)),_N_E=e.O()}]);