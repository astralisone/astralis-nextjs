"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8800],{3998:(e,t,a)=>{a.d(t,{$:()=>d});var r=a(95155),s=a(12115),l=a(32467),n=a(83101),i=a(64269);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-semibold transition-all duration-150 ease-out focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{primary:"bg-astralis-blue text-white shadow-md hover:bg-[#245a92] hover:shadow-lg hover:scale-105 dark:bg-astralis-blue dark:hover:bg-[#245a92]",secondary:"border-2 border-astralis-blue text-astralis-blue hover:bg-astralis-blue hover:text-white shadow-sm hover:shadow-md dark:border-astralis-blue dark:text-astralis-blue dark:hover:bg-astralis-blue dark:hover:text-white",destructive:"bg-error text-white shadow-sm hover:bg-error/90 hover:shadow-md dark:bg-error dark:hover:bg-error/90",outline:"border-2 border-slate-300 bg-white text-slate-700 hover:bg-slate-100 hover:border-slate-400 dark:border-slate-600 dark:bg-slate-800 dark:text-slate-200 dark:hover:bg-slate-700 dark:hover:border-slate-500",ghost:"text-slate-700 hover:bg-slate-100 dark:text-slate-200 dark:hover:bg-slate-800",link:"text-astralis-blue underline-offset-4 hover:underline dark:text-astralis-blue"},size:{default:"px-6 py-3 text-base",sm:"px-4 py-2 text-sm",lg:"px-8 py-4 text-lg",icon:"p-3"}},defaultVariants:{variant:"primary",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:a,variant:s,size:n,asChild:d=!1,...c}=e,m=d?l.DX:"button";return(0,r.jsx)(m,{className:(0,i.cn)(o({variant:s,size:n,className:a})),ref:t,...c})});d.displayName="Button"},18332:(e,t,a)=>{a.d(t,{Fc:()=>x,TN:()=>h,XL:()=>f});var r=a(95155),s=a(12115),l=a(83101),n=a(23327),i=a(61362),o=a(78874),d=a(6132),c=a(64269);let m=(0,l.F)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-white border-slate-300 text-slate-900",success:"border-green-500/50 bg-green-50 text-green-900 [&>svg]:text-green-600",error:"border-red-500/50 bg-red-50 text-red-900 [&>svg]:text-red-600",warning:"border-yellow-500/50 bg-yellow-50 text-yellow-900 [&>svg]:text-yellow-600",info:"border-blue-500/50 bg-blue-50 text-blue-900 [&>svg]:text-astralis-blue"}},defaultVariants:{variant:"default"}}),u={default:n.A,success:i.A,error:o.A,warning:d.A,info:n.A},x=s.forwardRef((e,t)=>{let{className:a,variant:s="default",showIcon:l=!1,children:n,...i}=e,o=u[s||"default"];return(0,r.jsxs)("div",{ref:t,role:"alert",className:(0,c.cn)(m({variant:s}),a),...i,children:[l&&(0,r.jsx)(o,{className:"h-4 w-4"}),n]})});x.displayName="Alert";let f=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:(0,c.cn)("mb-1 font-semibold leading-none tracking-tight",a),...s})});f.displayName="AlertTitle";let h=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,c.cn)("text-sm [&_p]:leading-relaxed",a),...s})});h.displayName="AlertDescription"},28800:(e,t,a)=>{a.d(t,{CalendarChatPanel:()=>b});var r=a(95155),s=a(12115),l=a(16485),n=a(35299),i=a(6132),o=a(42529),d=a(78874),c=a(18085),m=a(64269),u=a(3998),x=a(65142),f=a(86948),h=a(18332);function b(e){let{userId:t,orgId:a,className:b,onEventCreated:p}=e,[g,w]=(0,s.useState)([{id:"welcome",role:"assistant",content:'Hi! I\'m your calendar assistant. I can help you:\n\n• View your schedule\n• Schedule new meetings\n• Find available time slots\n• Check your availability\n• Cancel events\n\nTry asking me something like:\n• "What meetings do I have tomorrow?"\n• "Find me 2 hours of focus time this week"\n• "Schedule a meeting with john@example.com next Tuesday at 2pm"',timestamp:new Date}]),[v,y]=(0,s.useState)(""),[N,j]=(0,s.useState)(!1),[k,C]=(0,s.useState)(null),[A,D]=(0,s.useState)(null),R=(0,s.useRef)(null),F=(0,s.useRef)(null);(0,s.useEffect)(()=>{var e;null==(e=R.current)||e.scrollIntoView({behavior:"smooth"})},[g]),(0,s.useEffect)(()=>{var e;null==(e=F.current)||e.focus()},[]);let _=async()=>{if(!v.trim()||N)return;let e={id:"user-".concat(Date.now()),role:"user",content:v.trim(),timestamp:new Date};w(t=>[...t,e]),y(""),C(null),j(!0);try{let t=g.slice(-5).map(e=>({role:e.role,content:e.content})),a=await fetch("/api/chat/calendar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e.content,context:{previousMessages:t,confirmed:!1}})});if(!a.ok){let e=await a.json();throw Error(e.details||e.error||"Failed to send message")}let r=await a.json(),s={id:"assistant-".concat(Date.now()),role:"assistant",content:r.message,timestamp:new Date,requiresConfirmation:r.requiresConfirmation,action:r.action,data:r.data};w(e=>[...e,s]),r.requiresConfirmation&&r.action?D(r.action):D(null)}catch(t){console.error("Failed to send message:",t),C(t instanceof Error?t.message:"Failed to send message");let e={id:"error-".concat(Date.now()),role:"assistant",content:"I encountered an error: ".concat(t instanceof Error?t.message:"Unknown error",". Please try again."),timestamp:new Date};w(t=>[...t,e])}finally{j(!1)}},S=async()=>{if(A){j(!0),C(null);try{let e=await fetch("/api/chat/calendar",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:"Confirmed",context:{confirmed:!0,pendingAction:A}})});if(!e.ok){let t=await e.json();throw Error(t.details||t.error||"Failed to confirm action")}let t=await e.json(),a={id:"confirmation-".concat(Date.now()),role:"assistant",content:t.message,timestamp:new Date,data:t.data};w(e=>[...e,a]),D(null),p&&p()}catch(t){console.error("Failed to confirm action:",t),C(t instanceof Error?t.message:"Failed to confirm action");let e={id:"error-".concat(Date.now()),role:"assistant",content:"Failed to confirm: ".concat(t instanceof Error?t.message:"Unknown error",". Please try again."),timestamp:new Date};w(t=>[...t,e])}finally{j(!1)}}};return(0,r.jsxs)("div",{className:(0,m.cn)("flex flex-col h-full bg-white rounded-lg border border-slate-300 shadow-card",b),children:[(0,r.jsx)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-slate-300 bg-gradient-to-r from-astralis-blue to-blue-600",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-white/20 rounded-lg backdrop-blur-sm",children:(0,r.jsx)(l.A,{className:"h-5 w-5 text-white"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Calendar Assistant"}),(0,r.jsx)("p",{className:"text-xs text-white/80",children:"Manage your schedule with natural language"})]})]})}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4 bg-slate-50",children:[g.map(e=>(0,r.jsx)("div",{className:(0,m.cn)("flex gap-3","user"===e.role?"justify-end":"justify-start"),children:(0,r.jsxs)("div",{className:(0,m.cn)("flex flex-col max-w-[80%] gap-2","user"===e.role?"items-end":"items-start"),children:[(0,r.jsx)(f.Zp,{variant:"default",className:(0,m.cn)("px-4 py-3 shadow-sm","user"===e.role?"bg-astralis-blue text-white border-astralis-blue":"bg-white border-slate-300"),children:(0,r.jsx)("p",{className:(0,m.cn)("text-sm leading-relaxed whitespace-pre-wrap","user"===e.role?"text-white":"text-slate-900"),children:e.content})}),(0,r.jsx)("span",{className:"text-xs text-slate-500",children:new Date(e.timestamp).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})})]})},e.id)),N&&(0,r.jsx)("div",{className:"flex justify-start",children:(0,r.jsx)(f.Zp,{variant:"default",className:"px-4 py-3 bg-white border-slate-300 shadow-sm",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(n.A,{className:"h-5 w-5 text-astralis-blue animate-spin"}),(0,r.jsx)("p",{className:"text-sm text-slate-600 font-medium",children:"Thinking..."})]})})}),k&&(0,r.jsx)(h.Fc,{variant:"error",showIcon:!0,children:(0,r.jsx)(h.TN,{children:k})}),(0,r.jsx)("div",{ref:R})]}),A&&!N&&(0,r.jsx)("div",{className:"px-6 py-4 border-t border-amber-200 bg-amber-50",children:(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)(i.A,{className:"h-5 w-5 text-amber-600 flex-shrink-0 mt-0.5"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-amber-900 mb-3",children:"Confirmation Required"}),(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsxs)(u.$,{onClick:S,variant:"primary",size:"sm",className:"flex items-center gap-2",children:[(0,r.jsx)(o.A,{className:"h-4 w-4"}),"Confirm"]}),(0,r.jsxs)(u.$,{onClick:()=>{D(null);let e={id:"cancel-".concat(Date.now()),role:"assistant",content:"Action cancelled. How else can I help you with your calendar?",timestamp:new Date};w(t=>[...t,e])},variant:"outline",size:"sm",className:"flex items-center gap-2",children:[(0,r.jsx)(d.A,{className:"h-4 w-4"}),"Cancel"]})]})]})]})}),(0,r.jsxs)("div",{className:"px-6 py-4 border-t border-slate-300 bg-white",children:[(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(x.p,{ref:F,value:v,onChange:e=>y(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),_())},placeholder:"Ask about your calendar...",disabled:N,className:"flex-1"}),(0,r.jsx)(u.$,{onClick:_,variant:"primary",size:"icon",disabled:!v.trim()||N,className:"flex-shrink-0",children:N?(0,r.jsx)(n.A,{className:"h-5 w-5 animate-spin"}):(0,r.jsx)(c.A,{className:"h-5 w-5"})})]}),(0,r.jsx)("p",{className:"text-xs text-slate-500 mt-2",children:"Press Enter to send"})]})]})}},64269:(e,t,a)=>{a.d(t,{cn:()=>l});var r=a(2821),s=a(75889);function l(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,s.QP)((0,r.$)(t))}},65142:(e,t,a)=>{a.d(t,{p:()=>n});var r=a(95155),s=a(12115),l=a(64269);let n=s.forwardRef((e,t)=>{let{className:a,type:s,...n}=e;return(0,r.jsx)("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-slate-300 bg-white px-3 py-2 text-sm text-slate-900 placeholder:text-slate-500","dark:bg-slate-800 dark:border-slate-700 dark:text-white dark:placeholder:text-slate-400","transition-all duration-150 ease-out","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-astralis-blue focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-50","file:border-0 file:bg-transparent file:text-sm file:font-medium",a),ref:t,...n})});n.displayName="Input"},86948:(e,t,a)=>{a.d(t,{BT:()=>d,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>i,wL:()=>m});var r=a(95155),s=a(12115),l=a(64269);let n=s.forwardRef((e,t)=>{let{className:a,variant:s="default",hover:n=!1,...i}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("rounded-lg bg-white transition-all duration-200 dark:bg-slate-800 dark:border-slate-700",{default:"border border-slate-200 shadow-[0_2px_8px_rgba(0,0,0,0.06)]",bordered:"border-2 border-slate-300",elevated:"shadow-[0_8px_24px_rgba(0,0,0,0.12)]"}[s],n&&"hover:shadow-[0_8px_24px_rgba(0,0,0,0.12)] hover:border-slate-300",a),...i})});n.displayName="Card";let i=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",a),...s})});i.displayName="CardHeader";let o=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight text-slate-900 dark:text-white",a),...s})});o.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("p",{ref:t,className:(0,l.cn)("text-sm text-slate-500 dark:text-slate-400",a),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("p-6 pt-0",a),...s})});c.displayName="CardContent";let m=s.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",a),...s})});m.displayName="CardFooter"}}]);